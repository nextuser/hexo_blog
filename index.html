<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>nextuser&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="æ­£åœ¨å­¦ä¹ move, sui,walrus">
<meta property="og:type" content="website">
<meta property="og:title" content="nextuser&#39;s blog">
<meta property="og:url" content="http://www.walrus.mov/index.html">
<meta property="og:site_name" content="nextuser&#39;s blog">
<meta property="og:description" content="æ­£åœ¨å­¦ä¹ move, sui,walrus">
<meta property="og:locale">
<meta property="article:author" content="nextuser">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="nextuser's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="css/style.css">

  
    
<link rel="stylesheet" href="fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="index.html" id="logo">nextuser&#39;s blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="index.html" id="subtitle">ç§‘å­¦å‡è‚¥</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="index.html">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Buscar"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Buscar"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.walrus.mov"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-sui/sui witness" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="2024/11/23/sui/sui%20witness/" class="article-date">
  <time class="dt-published" datetime="2024-11-23T01:26:19.374Z" itemprop="datePublished">2024-11-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="move-è¯­è¨€ä¸­çš„witness-æ¨¡å¼"><a href="#move-è¯­è¨€ä¸­çš„witness-æ¨¡å¼" class="headerlink" title="move è¯­è¨€ä¸­çš„witness æ¨¡å¼,"></a>move è¯­è¨€ä¸­çš„witness æ¨¡å¼,</h1><h2 id="witnes-çš„ä¾‹å­è§£é‡Š"><a href="#witnes-çš„ä¾‹å­è§£é‡Š" class="headerlink" title="witnes çš„ä¾‹å­è§£é‡Š"></a>witnes çš„ä¾‹å­è§£é‡Š</h2><p>hohç¤¾åŒºä¸­ uvd å¯¹è¿™ä¸ªæ¨¡å¼ä½¿ç”¨äº†ä¸€ä¸ªæ¯”è¾ƒæœ‰è¶£çš„ç±»æ¯”.æ¯”å¦‚è¦å»ºæˆ¿å­,</p>
<ul>
<li>å»ºæˆ¿å­éœ€è¦æ‰¾æ”¿åºœç”³è¯·å»ºæˆ¿è®¸å¯.</li>
</ul>
<ul>
<li>å»ºå¥½æˆ¿å­ä¹‹å,è¿™ä¸ªå»ºæˆ¿è®¸å¯å°±ä¼šè¢«é”€æ¯</li>
</ul>
<p><img src="images/image-20241123093733016.png" alt="image-20241123093733016"></p>
<h2 id="witnessåˆçº¦ä»£ç "><a href="#witnessåˆçº¦ä»£ç " class="headerlink" title="witnessåˆçº¦ä»£ç :"></a>witnessåˆçº¦ä»£ç :</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> book::witness;</span><br><span class="line">use sui::coin::&#123;Self,Coin&#125;;</span><br><span class="line">use sui::sui::SUI;</span><br><span class="line">use std::string::&#123;Self,String&#125;;</span><br><span class="line"><span class="type">const</span> PASSPORT_FEE:u64 = <span class="number">50000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> <span class="title class_">ShareInfo</span> has key&#123;</span><br><span class="line">    id :UID,</span><br><span class="line">    owner:address,</span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"><span class="function">fun <span class="title">init</span><span class="params">(ctx:&amp;mut TxContext)</span></span>&#123;</span><br><span class="line">    let share_info = ShareInfo&#123;</span><br><span class="line">        id:object::<span class="built_in">new</span>(ctx),</span><br><span class="line">        owner:ctx.<span class="built_in">sender</span>(),</span><br><span class="line">    &#125;;</span><br><span class="line">    transfer::<span class="built_in">freeze_object</span>(share_info);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> <span class="title class_">House</span> has key&#123;</span><br><span class="line">    id:UID,</span><br><span class="line">    name:String,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> <span class="title class_">Passport</span> has drop&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// èŠ±é’±è´­ä¹°ä¸€ä¸ªPassport</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> fun <span class="title">requirePassport</span><span class="params">(mut c:Coin&lt;SUI&gt;,share_info: &amp;ShareInfo, ctx : &amp;mut TxContext)</span> : Passport&#123;</span></span><br><span class="line">    <span class="comment">//åˆ†å‰²å‡ºæ¥æ”¶è´¹</span></span><br><span class="line">    let fee = coin::<span class="built_in">split</span>(&amp;mut c, PASSPORT_FEE, ctx);</span><br><span class="line">    transfer::<span class="built_in">public_transfer</span>(fee,share_info.owner);</span><br><span class="line">    <span class="comment">//å½’è¿˜æ‰¾é›¶çš„é’±</span></span><br><span class="line">    transfer::<span class="built_in">public_transfer</span>(c,ctx.<span class="built_in">sender</span>());</span><br><span class="line">    <span class="comment">//è¿”å›Passport</span></span><br><span class="line">    Passport&#123;&#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">///è·å¾—Passport æ‰èƒ½åˆ›å»ºHouse , Passport æ¯æ¬¡ä½¿ç”¨ä¹‹åéƒ½ä¼šæ¶ˆè€—æ‰</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> fun <span class="title">create_house</span><span class="params">(_:Passport, name:String, ctx:&amp;mut TxContext)</span></span>&#123;</span><br><span class="line">    let house = House&#123;</span><br><span class="line">        id:object::<span class="built_in">new</span>(ctx),</span><br><span class="line">        name:name,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//è½¬è®©æˆ¿å­ç»™äº¤æ˜“å‘èµ·è€…</span></span><br><span class="line">    transfer::<span class="built_in">transfer</span>(house,ctx.<span class="built_in">sender</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// ä¸ºäº†åœ¨æ¨¡å—å¤–æµ‹è¯•ä»£ç è°ƒç”¨initå‡½æ•°</span></span><br><span class="line">#[test_only]</span><br><span class="line"><span class="function"><span class="keyword">public</span> fun <span class="title">test_init</span><span class="params">(ctx:&amp;mut TxContext)</span></span>&#123;</span><br><span class="line">    <span class="built_in">init</span>(ctx);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">///ä¸ºäº†æ¨¡å—å¤–æµ‹è¯•ä»£ç è·å–æœ¬æ¨¡å—å¸¸é‡, å› ä¸ºå¸¸é‡ä¸æ˜¯publicçš„</span></span><br><span class="line">#[test_only]</span><br><span class="line"><span class="function"><span class="keyword">public</span> fun <span class="title">get_passport_fee</span><span class="params">()</span>:u64&#123;</span></span><br><span class="line">    PASSPORT_FEE</span><br><span class="line">&#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>



<h2 id="å•å…ƒæµ‹è¯•ä»£ç "><a href="#å•å…ƒæµ‹è¯•ä»£ç " class="headerlink" title="å•å…ƒæµ‹è¯•ä»£ç "></a>å•å…ƒæµ‹è¯•ä»£ç </h2><p>æˆ‘ä»¬æä¾›ä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹</p>
<ul>
<li>æµ‹è¯•è·å–passport, æµ‹è¯•åˆ›å»ºæˆ¿å­  test_witness_flow</li>
<li>æµ‹è¯•è·å–passport,å› ä¸ºé‡‘é¢ä¸å¤Ÿå¤±è´¥ test_witness_flow_no_enough</li>
</ul>
<p>ç›¸å…³æµ‹è¯•ä»£ç çš„ä½¿ç”¨äº†test_scenario æ¨¡æ‹Ÿåˆçº¦çš„å¤šæ¬¡è°ƒç”¨,æ ¡éªŒåˆçº¦çš„æ•ˆæœ( coinçš„è½¬è®© ,å¯¹è±¡çš„è½¬è®©)</p>
<p>ç›¸å…³ä½¿ç”¨å¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://learnblockchain.cn/article/8066">https://learnblockchain.cn/article/8066</a></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">#[test_only]</span><br><span class="line"><span class="keyword">module</span> book::witness_tests ;</span><br><span class="line">use sui::test_scenario::&#123;Self, Scenario&#125;;</span><br><span class="line">use sui::coin::&#123;Self, Coin&#125;;</span><br><span class="line">use sui::sui::SUI;</span><br><span class="line">use std::string;</span><br><span class="line">use book::witness::&#123;Self, ShareInfo, House, Passport&#125;;</span><br><span class="line">use book::witness::get_passport_fee;</span><br><span class="line"></span><br><span class="line">#[test]</span><br><span class="line"><span class="function">fun <span class="title">test_witness_flow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    let owner = @<span class="number">0xA</span>;</span><br><span class="line">    let user = @<span class="number">0xB</span>;</span><br><span class="line">    <span class="comment">// ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–åœºæ™¯</span></span><br><span class="line">    let mut scenario = test_scenario::<span class="built_in">begin</span>(owner);    </span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–åˆçº¦,åˆ›å»º ShareInfo</span></span><br><span class="line">    test_scenario::<span class="built_in">next_tx</span>(&amp;mut scenario, owner);</span><br><span class="line">    &#123;</span><br><span class="line">        witness::<span class="built_in">test_init</span>(test_scenario::<span class="built_in">ctx</span>(&amp;mut scenario));</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·è´­ä¹° Passport</span></span><br><span class="line">    test_scenario::<span class="built_in">next_tx</span>(&amp;mut scenario, user);</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºæµ‹è¯•ç”¨çš„ SUI coin</span></span><br><span class="line">        let coin = coin::<span class="built_in">mint_for_testing</span>&lt;SUI&gt;(<span class="number">100000</span>, test_scenario::<span class="built_in">ctx</span>(&amp;mut scenario));</span><br><span class="line">        let share_info = test_scenario::<span class="built_in">take_immutable</span>&lt;ShareInfo&gt;(&amp;scenario);</span><br><span class="line">        </span><br><span class="line">        let passport = witness::<span class="built_in">requirePassport</span>(</span><br><span class="line">            coin,</span><br><span class="line">            &amp;share_info,</span><br><span class="line">            test_scenario::<span class="built_in">ctx</span>(&amp;mut scenario)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Passport åˆ›å»º House</span></span><br><span class="line">        witness::<span class="built_in">create_house</span>(</span><br><span class="line">            passport,</span><br><span class="line">            string::<span class="built_in">utf8</span>(b<span class="string">&quot;My House&quot;</span>),</span><br><span class="line">            test_scenario::<span class="built_in">ctx</span>(&amp;mut scenario)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        test_scenario::<span class="built_in">return_immutable</span>(share_info);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯ House æ˜¯å¦åˆ›å»ºæˆåŠŸ</span></span><br><span class="line">    test_scenario::<span class="built_in">next_tx</span>(&amp;mut scenario, user);</span><br><span class="line">    &#123;</span><br><span class="line">        let coin = test_scenario::take_from_address&lt;Coin&lt;SUI&gt;&gt;(&amp;scenario, owner);</span><br><span class="line">        assert!(coin.<span class="built_in">value</span>() == <span class="built_in">get_passport_fee</span>());</span><br><span class="line">        test_scenario::<span class="built_in">return_to_address</span>(owner, coin);</span><br><span class="line"></span><br><span class="line">        let coin = test_scenario::take_from_address&lt;Coin&lt;SUI&gt;&gt;(&amp;scenario, user);</span><br><span class="line">        assert!(coin.<span class="built_in">value</span>() == <span class="number">100000</span> - <span class="built_in">get_passport_fee</span>());</span><br><span class="line">        test_scenario::<span class="built_in">return_to_address</span>(user, coin);</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        assert!(test_scenario::<span class="built_in">has_most_recent_for_sender</span>&lt;House&gt;(&amp;scenario));</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    test_scenario::<span class="built_in">end</span>(scenario);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#[test]</span><br><span class="line">#[<span class="built_in">expected_failure</span>(abort_code = sui::balance::ENotEnough)]</span><br><span class="line"><span class="function">fun <span class="title">test_witness_flow_no_enough</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    let owner = @<span class="number">0xA</span>;</span><br><span class="line">    let user = @<span class="number">0xB</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–åœºæ™¯</span></span><br><span class="line">    let mut scenario = test_scenario::<span class="built_in">begin</span>(owner);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–åˆçº¦,åˆ›å»º ShareInfo</span></span><br><span class="line">    test_scenario::<span class="built_in">next_tx</span>(&amp;mut scenario, owner);</span><br><span class="line">    &#123;</span><br><span class="line">        witness::<span class="built_in">test_init</span>(test_scenario::<span class="built_in">ctx</span>(&amp;mut scenario));</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·è´­ä¹° Passport</span></span><br><span class="line">    test_scenario::<span class="built_in">next_tx</span>(&amp;mut scenario, user);</span><br><span class="line">    &#123;</span><br><span class="line">        let fee = <span class="built_in">get_passport_fee</span>() - <span class="number">1</span>;</span><br><span class="line">        let coin = coin::<span class="built_in">mint_for_testing</span>&lt;SUI&gt;(fee, test_scenario::<span class="built_in">ctx</span>(&amp;mut scenario));</span><br><span class="line">        let share_info = test_scenario::<span class="built_in">take_immutable</span>&lt;ShareInfo&gt;(&amp;scenario);</span><br><span class="line">        <span class="comment">//è¿™é‡Œä¼šå› ä¸ºfee ä¸å¤Ÿè€Œå¤±è´¥</span></span><br><span class="line">        let passport = witness::<span class="built_in">requirePassport</span>(</span><br><span class="line">            coin,</span><br><span class="line">            &amp;share_info,</span><br><span class="line">            test_scenario::<span class="built_in">ctx</span>(&amp;mut scenario)</span><br><span class="line">        );</span><br><span class="line">        test_scenario::<span class="built_in">return_shared</span>(share_info);</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    test_scenario::<span class="built_in">end</span>(scenario);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›¸å…³ä»£ç åœ¨:</p>
<p><a target="_blank" rel="noopener" href="https://github.com/nextuser/move-examples">https://github.com/nextuser/move-examples</a></p>
<h1 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h1><p>æœ€è¿‘åœ¨å‚è§HOHç¤¾åŒºçš„å­¦ä¹ </p>
<p>ğŸ’§ <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/d0brr-ao6cZ5t8Z5OO1Mog">HOHæ°´åˆ†å­å…¬ä¼—å·</a></p>
<p>ğŸŒŠ <a target="_blank" rel="noopener" href="https://x.com/0xHOH">HOHæ°´åˆ†å­Xè´¦å·</a></p>
<p>ğŸ“¹ <a target="_blank" rel="noopener" href="https://space.bilibili.com/3493269495352098">è¯¾ç¨‹Bç«™è´¦å·</a></p>
<p>ğŸ’» Githubä»“åº“ <a target="_blank" rel="noopener" href="https://github.com/move-cn/letsmove">https://github.com/move-cn/letsmove</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.walrus.mov/2024/11/23/sui/sui%20witness/" data-id="cm3tiu6f00000lvo3d6g644mh" data-title="" class="article-share-link"><span class="fa fa-share">Compartir</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-walrus/walrus-first" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="2024/11/19/walrus/walrus-first/" class="article-date">
  <time class="dt-published" datetime="2024-11-19T03:37:09.759Z" itemprop="datePublished">2024-11-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li>ï¼ˆsui warus æ•™ç¨‹ï¼‰[<a target="_blank" rel="noopener" href="https://letswalrus.vercel.app/docs/arch/encode]">https://letswalrus.vercel.app/docs/arch/encode]</a></li>
</ul>
<ul>
<li>install</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:MystenLabs/walrus-sites.git</span><br></pre></td></tr></table></figure>








      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.walrus.mov/2024/11/19/walrus/walrus-first/" data-id="cm3nwlqw800015wo37f0006mm" data-title="" class="article-share-link"><span class="fa fa-share">Compartir</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hexo-install-tips" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="2024/11/19/hexo-install-tips/" class="article-date">
  <time class="dt-published" datetime="2024-11-18T16:08:11.000Z" itemprop="datePublished">2024-11-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="categories/hexo/">hexo</a>â–º<a class="article-category-link" href="categories/hexo/dns/">dns</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="2024/11/19/hexo-install-tips/">ä½¿ç”¨hexoæ­å»ºä¸ªäººä¸»é¡µ</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡:"></a>ç›®æ ‡:</h1><p>æ­å»ºä¸ªäººç½‘ç«™, ä¸è´­ä¹°æœåŠ¡å™¨, æ­å»ºä¸ªäºº blog.</p>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤:"></a>æ­¥éª¤:</h2><ul>
<li>è´­ä¹°åŸŸå , æœ¬ä¾‹ä»porkbun.com è´­ä¹°äº†åŸŸåwalrus.mov</li>
<li>ä¸ä¹°æœåŠ¡å™¨,ç›´æ¥ä½¿ç”¨github pageåŠŸèƒ½</li>
</ul>
<ol>
<li><p>å®‰è£…hexo ,hexoæ˜¯ä¸€ä¸ªåšå®¢ç®¡ç†å·¥å…·,</p>
</li>
<li><p>å°†hexo ç®¡ç†çš„ç½‘é¡µå‘å¸ƒåˆ°ä¸€ä¸ªgithub projectä¸­</p>
</li>
<li><p>å°† github project é…ç½®æˆgithub page<br> è·å¾— nextuser.github.io ç½‘ç«™, é…ç½®github page çš„åŸŸåä¸º<a href="http://www.walrus.mov/">www.walrus.mov</a></p>
</li>
</ol>
<p>  åˆšå¼€å§‹æ˜¯ä¸ä¼šæ ¡éªŒé€šè¿‡çš„.</p>
<ol start="4">
<li>é…ç½®è´­ä¹°çš„dns åœ°å€ ,å…³è”åˆ°github ç½‘ç«™. (è¿™ä¸€æ­¥é…ç½®å¥½å,ç¬¬3æ­¥æ‰ä¼šé…ç½®æˆåŠŸ)</li>
</ol>
<h2 id="å®‰è£…hexo"><a href="#å®‰è£…hexo" class="headerlink" title="å®‰è£…hexo"></a>å®‰è£…hexo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npmg i -g hexo</span><br></pre></td></tr></table></figure>

<h2 id="åˆå§‹åŒ–ç›®å½•"><a href="#åˆå§‹åŒ–ç›®å½•" class="headerlink" title="åˆå§‹åŒ–ç›®å½•"></a>åˆå§‹åŒ–ç›®å½•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx hexo init  blog</span><br></pre></td></tr></table></figure>

<ul>
<li><p>é—®é¢˜ ..&#x2F;..&#x2F;..&#x2F;package.json: No license field</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fatal: unable to access <span class="string">&#x27;https://github.com/hexojs/hexo-starter.git/&#x27;</span>: GnuTLS recv error (-110): The TLS connection was non-properly terminated.</span><br><span class="line">WARN  git <span class="built_in">clone</span> failed. Copying data instead</span><br><span class="line">INFO  Install dependencies</span><br><span class="line">warning ../../../package.json: No license field</span><br><span class="line">error Error: certificate has expired</span><br><span class="line">    at TLSSocket.onConnectSecure (node:_tls_wrap:1539:34)</span><br><span class="line">    at TLSSocket.emit (node:events:513:28)</span><br><span class="line">    at TLSSocket._finishInit (node:_tls_wrap:953:8)</span><br><span class="line">    at TLSWrap.ssl.onhandshakedone (node:_tls_wrap:734:12)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯¹ç­–</p>
<ul>
<li>ä¿®æ”¹package.json,å¢åŠ license æè¿°</li>
<li>æ‰§è¡Œ npm install</li>
</ul>
</li>
</ul>
<figure class="highlight json"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  # package.json</span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo-site&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<h2 id="æ‰§è¡Œç¼–è¯‘å’Œå¼€å¯æœåŠ¡"><a href="#æ‰§è¡Œç¼–è¯‘å’Œå¼€å¯æœåŠ¡" class="headerlink" title="æ‰§è¡Œç¼–è¯‘å’Œå¼€å¯æœåŠ¡"></a>æ‰§è¡Œç¼–è¯‘å’Œå¼€å¯æœåŠ¡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npx hexo g</span><br><span class="line">npx hexo s</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥åœ¨ localhost:4000æŸ¥çœ‹é¡µé¢</p>
<h2 id="å‘å¸ƒåˆ°git"><a href="#å‘å¸ƒåˆ°git" class="headerlink" title="å‘å¸ƒåˆ°git"></a>å‘å¸ƒåˆ°git</h2><h3 id="ä¿®æ”¹-config-yml-é…ç½®å’Œgitå…³è”"><a href="#ä¿®æ”¹-config-yml-é…ç½®å’Œgitå…³è”" class="headerlink" title="ä¿®æ”¹_config.yml é…ç½®å’Œgitå…³è”"></a>ä¿®æ”¹_config.yml é…ç½®å’Œgitå…³è”</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">git@github.com:nextuser/hexo_blog.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…é…å¥—æ’ä»¶"><a href="#å®‰è£…é…å¥—æ’ä»¶" class="headerlink" title="å®‰è£…é…å¥—æ’ä»¶"></a>å®‰è£…é…å¥—æ’ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -save hexo-deployer-git</span><br></pre></td></tr></table></figure>
<h3 id="æ‰§è¡Œéƒ¨ç½²deployå‘½ä»¤"><a href="#æ‰§è¡Œéƒ¨ç½²deployå‘½ä»¤" class="headerlink" title="æ‰§è¡Œéƒ¨ç½²deployå‘½ä»¤"></a>æ‰§è¡Œéƒ¨ç½²deployå‘½ä»¤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx hexo d</span><br></pre></td></tr></table></figure>
<p>ä¼šå°†publicç›®å½•çš„æ–‡ä»¶æäº¤åˆ°githubæ‰§è¡Œçš„é¡¹ç›®ç›®å½•ä¸‹.</p>
<h2 id="åœ¨github-project-settings-é…ç½®github-page"><a href="#åœ¨github-project-settings-é…ç½®github-page" class="headerlink" title="åœ¨github project-&gt;settings  é…ç½®github page"></a>åœ¨github project-&gt;settings  é…ç½®github page</h2><p><img src="/images/image-20241118232126863.png" alt="image-20241118232126863"></p>
<h2 id="é…ç½®-dns-github"><a href="#é…ç½®-dns-github" class="headerlink" title="é…ç½® dns &#x3D;&gt; github"></a>é…ç½® dns &#x3D;&gt; github</h2><p>åœ¨porkbun.com é…ç½®æˆ‘çš„dnsåŸŸåå’Œgithubçš„å…³è”å…³ç³»: dns å’Œgithub pageå…³è”</p>
<ul>
<li><p>è¿›å…¥åŸŸåç®¡ç†</p>
<p><img src="/images/image-20241118232306366.png" alt="image-20241118232306366"></p>
</li>
</ul>
<p>ç¼–è¾‘ dns record</p>
<ul>
<li><p>dns å…³è”åˆ°github</p>
<p><img src="/images/image-20241118232507380.png" alt="image-20241118232507380"></p>
</li>
<li><p>è®¾ç½® dnså’Œgithub åœ°å€çš„å¯¹åº”å…³ç³»</p>
<p><img src="/images/image-20241118232644409.png" alt="image-20241118232644409"></p>
</li>
<li><p>éœ€è¦ä¸‹è½½  CNAME æ–‡ä»¶æ”¾åˆ° blog&#x2F;public ç›®å½•ä¸­</p>
</li>
</ul>
<h1 id="æ—¥å¸¸ç¼–å†™åšå®¢ä½¿ç”¨æ­¥éª¤"><a href="#æ—¥å¸¸ç¼–å†™åšå®¢ä½¿ç”¨æ­¥éª¤" class="headerlink" title="æ—¥å¸¸ç¼–å†™åšå®¢ä½¿ç”¨æ­¥éª¤"></a>æ—¥å¸¸ç¼–å†™åšå®¢ä½¿ç”¨æ­¥éª¤</h1><ol>
<li><p>ä½¿ç”¨typora æˆ–vs code ,åœ¨  source&#x2F;_posts ç›®å½•ä¸‹å»ºç«‹markdownæ—¥è®°æ–‡ä»¶</p>
</li>
<li><p>ç¼–å†™å®Œæ¯•ä¹‹å,æ‰§è¡Œç”Ÿæˆæ—¥è®°åŠŸèƒ½</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx hexo g</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>æ‰“å¼€æœåŠ¡,æµ‹è¯• (å¯é€‰ï¼Œå¦‚æœæœåŠ¡å·²ç»æ‰“å¼€ï¼Œä¸éœ€è¦æ‰§è¡Œæ­¤æœåŠ¡)</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx hexo s</span><br></pre></td></tr></table></figure>
<p>è®¿é—® <a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000</a> æŸ¥çœ‹ç½‘é¡µæ˜¯å¦æ­£å¸¸</p>
<ol start="4">
<li>éƒ¨ç½²åˆ°github</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx hexo d</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>è®¿é—®æˆ‘å®šåˆ¶çš„ç½‘ç«™  <a href="http://www.walrus.mov/">www.walrus.mov</a></li>
</ol>
<ul>
<li>é—®é¢˜ ï¼š markdown æ–‡ä»¶å¼•ç”¨çš„ _post&#x2F;images æ–‡ä»¶ä¸ä¼šæ‹·è´åˆ°publicï¼Œä¼šå¯¼è‡´å›¾ç‰‡ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚<ul>
<li>æ®è¯´_config.yml é…ç½®å¦‚ä¸‹<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>ä¸‹è½½å¦‚ä¸‹æ’ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.walrus.mov/2024/11/19/hexo-install-tips/" data-id="cm3n5gh0h00007bo3bkref0du" data-title="ä½¿ç”¨hexoæ­å»ºä¸ªäººä¸»é¡µ" class="article-share-link"><span class="fa fa-share">Compartir</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/blog/" rel="tag">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/dns/" rel="tag">dns</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/github-page/" rel="tag">github page</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="2024/11/18/hello-world/" class="article-date">
  <time class="dt-published" datetime="2024-11-18T14:06:03.187Z" itemprop="datePublished">2024-11-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="2024/11/18/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.walrus.mov/2024/11/18/hello-world/" data-id="cm3n3pkf600003qo3ctkzfxz9" data-title="Hello World" class="article-share-link"><span class="fa fa-share">Compartir</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-sui/sui-colearn-qa1" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="2024/11/11/sui/sui-colearn-qa1/" class="article-date">
  <time class="dt-published" datetime="2024-11-11T13:47:08.000Z" itemprop="datePublished">2024-11-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="categories/sui/">sui</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="2024/11/11/sui/sui-colearn-qa1/">2024 -11-11  ç¬¬ä¸€å‘¨Sui Moveè®­ç»ƒè¥è¯¾ç¨‹ç­”ç–‘é—®é¢˜</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>2024 -11-11  ç¬¬ä¸€å‘¨Sui Moveè®­ç»ƒè¥è¯¾ç¨‹ç­”ç–‘é—®é¢˜</p>
<h3 id="1-github-ä¸‹è½½é—®é¢˜-ç¼–è¯‘æ—¶ä¸èƒ½è®¿é—®githubè·¯å¾„"><a href="#1-github-ä¸‹è½½é—®é¢˜-ç¼–è¯‘æ—¶ä¸èƒ½è®¿é—®githubè·¯å¾„" class="headerlink" title="1 github ä¸‹è½½é—®é¢˜,ç¼–è¯‘æ—¶ä¸èƒ½è®¿é—®githubè·¯å¾„"></a>1 github ä¸‹è½½é—®é¢˜,ç¼–è¯‘æ—¶ä¸èƒ½è®¿é—®githubè·¯å¾„</h3><p><img src="images/77cab47def96df0bfa0bc2000f6533c.png" alt="77cab47def96df0bfa0bc2000f6533c"></p>
<ul>
<li>å¯¹ç­–:</li>
</ul>
<p>ä¿®æ”¹Move.toml ä¸­çš„githubæˆgitee</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[dependencies]</span><br><span class="line">#Sui = &#123; git = &quot;https://github.com/MystenLabs/sui.git&quot;, subdir = &quot;crates/sui-framework/packages/sui-framework&quot;, rev = &quot;framework/testnet&quot; &#125;</span><br><span class="line">Sui = &#123; git = &quot;https://gitee.com/MystenLabs/sui.git&quot;, subdir = &quot;crates/sui-framework/packages/sui-framework&quot;, rev = &quot;framework/testnet&quot; &#125;</span><br></pre></td></tr></table></figure>



<h3 id="2-git-pull-pullä¸ä¸‹æ¥ï¼ŒæŠ¥é”™è¿‡æ—©æ–‡ä»¶ç»“æŸ"><a href="#2-git-pull-pullä¸ä¸‹æ¥ï¼ŒæŠ¥é”™è¿‡æ—©æ–‡ä»¶ç»“æŸ" class="headerlink" title="2  git pull pullä¸ä¸‹æ¥ï¼ŒæŠ¥é”™è¿‡æ—©æ–‡ä»¶ç»“æŸ"></a>2  git pull pullä¸ä¸‹æ¥ï¼ŒæŠ¥é”™è¿‡æ—©æ–‡ä»¶ç»“æŸ</h3><h4 id="2-1-å¦‚æœæ˜¯-githubä¸‹è½½é—®é¢˜-æ›´æ¢æ˜¯gitee"><a href="#2-1-å¦‚æœæ˜¯-githubä¸‹è½½é—®é¢˜-æ›´æ¢æ˜¯gitee" class="headerlink" title="2.1 å¦‚æœæ˜¯ githubä¸‹è½½é—®é¢˜,æ›´æ¢æ˜¯gitee"></a>2.1 å¦‚æœæ˜¯ githubä¸‹è½½é—®é¢˜,æ›´æ¢æ˜¯gitee</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[dependencies]</span><br><span class="line">#Sui = &#123; git = &quot;https://github.com/MystenLabs/sui.git&quot;, subdir = &quot;crates/sui-framework/packages/sui-framework&quot;, rev = &quot;framework/testnet&quot; &#125;</span><br><span class="line">Sui = &#123; git = &quot;https://gitee.com/MystenLabs/sui.git&quot;, subdir = &quot;crates/sui-framework/packages/sui-framework&quot;, rev = &quot;framework/testnet&quot; &#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-giteeä¸‹è½½å­˜åœ¨é—®é¢˜"><a href="#2-2-giteeä¸‹è½½å­˜åœ¨é—®é¢˜" class="headerlink" title="2.2  giteeä¸‹è½½å­˜åœ¨é—®é¢˜"></a>2.2  giteeä¸‹è½½å­˜åœ¨é—®é¢˜</h4><ul>
<li><p>å¯¹ç­–:  </p>
<ul>
<li><p>windows: ä½¿ç”¨git bash  æ‰§è¡Œä»¥ä¸‹å‘½ä»¤,å°†ä»£ç ä¸‹è½½åˆ°æœ¬åœ°</p>
</li>
<li><p>é‡‡ç”¨ ssh ä¸‹è½½</p>
<p>å¦‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@gitee.com:mystenLabs/sui.git</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>æ–¹æ³•ä¸€ :ä»£ç å¯ä»¥ä½¿ç”¨ç™¾åº¦ç½‘ç›˜ä¸‹è½½</p>
<p>æå–ç task</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://pan.baidu.com/s/1LQwwlPz6Q2DVAod-DhD1UA</span><br></pre></td></tr></table></figure>

<p><img src="images/image-20241111124128818.png" alt="image-20241111124128818"></p>
<p>è§£å‹åˆ°æœ¬åœ°è·¯å¾„</p>
<ul>
<li>linuxå¦‚ä¸‹å‘½ä»¤</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/sui-local</span><br><span class="line"><span class="built_in">cd</span> ~/sui-local</span><br><span class="line">git <span class="built_in">clone</span> git@gitee.com:mystenLabs/sui.git</span><br><span class="line">git checkout framework/testnet</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure>



<h4 id="2-3-ä¿®æ”¹-Move-toml-suiæ¡†æ¶ä¾èµ–æœ¬åœ°ä»£ç "><a href="#2-3-ä¿®æ”¹-Move-toml-suiæ¡†æ¶ä¾èµ–æœ¬åœ°ä»£ç " class="headerlink" title="2.3 ä¿®æ”¹ Move.toml ,suiæ¡†æ¶ä¾èµ–æœ¬åœ°ä»£ç "></a>2.3 ä¿®æ”¹ Move.toml ,suiæ¡†æ¶ä¾èµ–æœ¬åœ°ä»£ç </h4><ul>
<li><p>ç¡®å®š ç”¨æˆ·çš„ä¸»ç›®å½•</p>
<figure class="highlight bash"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ljl@ljl-i5-14400:~/work/sui/demo/table_example$ <span class="built_in">cd</span> ~</span><br><span class="line">ljl@ljl-i5-14400:~$ <span class="built_in">pwd</span></span><br><span class="line">/home/ljl</span><br></pre></td></tr></table></figure>


</li>
<li><p>ä¾‹å­ä¸­çš„&#x2F;home&#x2F;ljl æ˜¯æˆ‘çš„ä¸»ç›®å½•,ä½ å¯ä»¥æ›´æ¢æˆä½ ä¸‹è½½çš„sui ä»£ç è·¯å¾„</p>
</li>
</ul>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="comment">#Sui = &#123; git = &quot;https://gitee.com/MystenLabs/sui.git&quot;, subdir = &quot;crates/sui-framework/packages/sui-framework&quot;, rev = &quot;framework/testnet&quot; &#125;</span></span><br><span class="line"><span class="attr">Sui</span> = &#123;local=<span class="string">&quot;/home/ljl/sui-local/sui/crates/sui-framework/packages/sui-framework&quot;</span> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h3 id="é—®é¢˜3-æ¯æ¬¡ç¼–è¯‘éƒ½æç¤º-fail-to-resolve-dependencies-é—®é¢˜"><a href="#é—®é¢˜3-æ¯æ¬¡ç¼–è¯‘éƒ½æç¤º-fail-to-resolve-dependencies-é—®é¢˜" class="headerlink" title="é—®é¢˜3. æ¯æ¬¡ç¼–è¯‘éƒ½æç¤º, fail to resolve dependencies é—®é¢˜"></a>é—®é¢˜3. æ¯æ¬¡ç¼–è¯‘éƒ½æç¤º, fail to resolve dependencies é—®é¢˜</h3><p><img src="images/eee52dccc6c1235a42e6b2025f3accc.png" alt="eee52dccc6c1235a42e6b2025f3accc"></p>
<h4 id="3-1-åŸå› "><a href="#3-1-åŸå› " class="headerlink" title="3.1 åŸå› "></a>3.1 åŸå› </h4><p>githubç½‘ç»œè®¿é—®æ¯”è¾ƒå›°éš¾</p>
<h4 id="3-2-å¯¹ç­–"><a href="#3-2-å¯¹ç­–" class="headerlink" title="3.2 å¯¹ç­–"></a>3.2 å¯¹ç­–</h4><ul>
<li>æ–¹æ³•1 ä¿®æ”¹å·¥ç¨‹</li>
</ul>
<figure class="highlight bash"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Move.toml</span></span><br><span class="line">[dependencies]</span><br><span class="line">Sui = &#123; git = <span class="string">&quot;https://gitee.com/MystenLabs/sui.git&quot;</span>, subdir = <span class="string">&quot;crates/sui-framework/packages/sui-framework&quot;</span>, rev = <span class="string">&quot;framework/testnet&quot;</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>æ–¹æ³•2  </p>
<figure class="highlight bash"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sui move --skip-fetch-latest-git-deps  build</span><br></pre></td></tr></table></figure>



<p>å¯ä»¥å†™ä¸€ä¸ªsuibçš„è„šæœ¬, åç»­æ‰§è¡Œ suibå³å¯</p>
<figure class="highlight bash"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ljl@ljl-i5-14400:~/work/sui/demo/bb$ <span class="built_in">cat</span> /usr/bin/suib</span><br><span class="line">sui move build --skip-fetch-latest-git-deps</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="4-publish-å¤±è´¥çš„åŸå› -ä¸èƒ½æ‰¾åˆ°-clien-server-api-version-mismatch"><a href="#4-publish-å¤±è´¥çš„åŸå› -ä¸èƒ½æ‰¾åˆ°-clien-server-api-version-mismatch" class="headerlink" title="4 publish å¤±è´¥çš„åŸå› , ä¸èƒ½æ‰¾åˆ° clien&#x2F;server api version mismatch"></a>4 publish å¤±è´¥çš„åŸå› , ä¸èƒ½æ‰¾åˆ° clien&#x2F;server api version mismatch</h3><p><img src="images/b751b6d5fe797767bdc15617707d711.jpg" alt="b751b6d5fe797767bdc15617707d711"></p>
<p>è¿™ä¸ªæ˜¯å› ä¸ºsui clientçš„ç‰ˆæœ¬æ¯”è¾ƒè€,testnetå·²ç»æ˜¯1.37.1</p>
<ul>
<li>æ–¹æ³•ä¸€</li>
</ul>
<p>åº”è¯¥æ˜¯å®‰è£…çš„sui äºŒè¿›åˆ¶æ–‡ä»¶ç‰ˆæœ¬æ¯”è¾ƒè€,éœ€è¦ä»æœåŠ¡å™¨ä¸‹è½½æ›´æ–°çš„sui äºŒè¿›åˆ¶æ–‡ä»¶  </p>
<p> <a target="_blank" rel="noopener" href="https://github.com/MystenLabs/sui/releases/tag/testnet-v1.37.1">https://github.com/MystenLabs/sui/releases/tag/testnet-v1.37.1</a></p>
<p>ä¹Ÿæœ‰å¯èƒ½æ˜¯ giteeä¸Šçš„ä»£ç æ¯”è¾ƒè€, éœ€è¦æ›´æ¢Move.tomlä¸­dependencies çš„ä»¥æ¥è·¯å¾„</p>
<ul>
<li>æ–¹æ³•äºŒ</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sui client publish --skip-dependency-verification</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h3 id="5-publishé—®é¢˜-æ²¡æœ‰æ‰¾åˆ°Move-toml-unable-to-find-package-manifest"><a href="#5-publishé—®é¢˜-æ²¡æœ‰æ‰¾åˆ°Move-toml-unable-to-find-package-manifest" class="headerlink" title="5. publishé—®é¢˜:æ²¡æœ‰æ‰¾åˆ°Move.toml (unable to find package manifest)"></a>5. publishé—®é¢˜:æ²¡æœ‰æ‰¾åˆ°Move.toml (unable to find package manifest)</h3><p><img src="images/4c9df0a037a48da78f174af4c63b80a.jpg" alt="4c9df0a037a48da78f174af4c63b80a"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">D:\work\sui&gt;sui client publish</span><br><span class="line">Unable to find package manifest at <span class="string">&#x27;\\?\D:\work\sui/Move.toml&#x27;</span> or <span class="keyword">in</span> its parents</span><br></pre></td></tr></table></figure>

<p><img src="images/image-20241109195541791.png" alt="image-20241109195541791"></p>
<h4 id="5-1-åŸå› "><a href="#5-1-åŸå› " class="headerlink" title="5.1 åŸå› "></a>5.1 åŸå› </h4><p>è¿™æ˜¯å› ä¸ºå½“å‰è·¯å¾„æ²¡æœ‰æ‰¾åˆ°Move.toml æ–‡ä»¶, å› ä¸ºæ²¡æœ‰cd åˆ°é¡¹ç›®ä»£ç ä¸­.</p>
<p>å¦‚ä¸‹å›¾,  sui move new æ–°å»ºé¡¹ç›®ç›®å½•ä¹‹å,éœ€è¦cd åˆ°é¡¹ç›®ç›®å½•é‡Œé¢</p>
<p><img src="images/image-20241109194128504.png" alt="image-20241109194128504"></p>
<p>å‚è§ä¸Šå›¾ä¸­æ­¥éª¤,ç¬¬ä¸‰éƒ¨éœ€è¦cd åˆ›å»ºçš„é¡¹ç›®çš„ç›®å½•, sui move build ä¼šåœ¨å½“å‰ç›®å½•æŸ¥æ‰¾Move.toml</p>
<h3 id="6-pubish-å¤±è´¥-æ²¡æœ‰gas"><a href="#6-pubish-å¤±è´¥-æ²¡æœ‰gas" class="headerlink" title="6. pubish å¤±è´¥,æ²¡æœ‰gas"></a>6. pubish å¤±è´¥,æ²¡æœ‰gas</h3><h4 id="6-1-publishå¤±è´¥-gasä¸è¶³"><a href="#6-1-publishå¤±è´¥-gasä¸è¶³" class="headerlink" title="6.1 publishå¤±è´¥,gasä¸è¶³"></a>6.1 publishå¤±è´¥,gasä¸è¶³</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">D:\work\sui\task1&gt;sui client balance</span><br><span class="line">No coins found for this address.</span><br><span class="line"></span><br><span class="line">D:\work\sui\task1&gt;sui client faucet</span><br><span class="line">Request successful. It can take up to 1 minute to get the coin. Run sui client gas to check your gas coins.</span><br><span class="line"></span><br><span class="line">D:\work\sui\task1&gt;sui client balance</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ Balance of coins owned by this address â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®    â”‚</span><br><span class="line">â”‚ â”‚ coin  balance (raw)  balance    â”‚    â”‚</span><br><span class="line">â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚</span><br><span class="line">â”‚ â”‚ Sui   1000000000     1.00 SUI   â”‚    â”‚</span><br><span class="line">â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯    â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br></pre></td></tr></table></figure>



<h3 id="7-æç¤º-éœ€è¦-â€“gas-budget"><a href="#7-æç¤º-éœ€è¦-â€“gas-budget" class="headerlink" title="7. æç¤º éœ€è¦ â€“gas-budget"></a>7. æç¤º éœ€è¦ â€“gas-budget</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Could not automatically determine the gas budget. Please supply one using the --gas-budget flag.</span><br></pre></td></tr></table></figure>



<p><img src="images/8983d211b2b1dceaf57ffe22183c955.png" alt="8983d211b2b1dceaf57ffe22183c955"></p>
<h4 id="å¯¹ç­–-æä¾›-gas-budget-å‚æ•°"><a href="#å¯¹ç­–-æä¾›-gas-budget-å‚æ•°" class="headerlink" title="å¯¹ç­–:æä¾› gas-budget å‚æ•°"></a>å¯¹ç­–:æä¾› gas-budget å‚æ•°</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sui client publish --gas-budget 40000000</span><br></pre></td></tr></table></figure>



<h3 id="8-æé—®é¢„ç¼–è¯‘çš„ä¸‹è½½åŒ…å¦‚ä½•ä½¿ç”¨"><a href="#8-æé—®é¢„ç¼–è¯‘çš„ä¸‹è½½åŒ…å¦‚ä½•ä½¿ç”¨" class="headerlink" title="8 .æé—®é¢„ç¼–è¯‘çš„ä¸‹è½½åŒ…å¦‚ä½•ä½¿ç”¨"></a>8 .æé—®é¢„ç¼–è¯‘çš„ä¸‹è½½åŒ…å¦‚ä½•ä½¿ç”¨</h3><h3 id="8-1-ä¸‹è½½sui-ç¼–è¯‘åŒ…"><a href="#8-1-ä¸‹è½½sui-ç¼–è¯‘åŒ…" class="headerlink" title="8.1  ä¸‹è½½sui  ç¼–è¯‘åŒ…"></a>8.1  ä¸‹è½½sui  ç¼–è¯‘åŒ…</h3><p>ç›®å‰çš„sui é¢„ç¼–è¯‘ä¸‹è½½åŒ…,åœ¨</p>
<p><a target="_blank" rel="noopener" href="https://github.com/MystenLabs/sui/releases">https://github.com/MystenLabs/sui/releases</a></p>
<p>æ ¹æ®ä¸åŒæ“ä½œç³»ç»Ÿ,ä¸‹è½½å¯¹åº”çš„åŒ…, ä¸‹è½½ä¹‹å,éœ€è¦è§£å‹æ–‡ä»¶</p>
<h3 id="8-2-ç¯å¢ƒå˜é‡è®¾ç½®"><a href="#8-2-ç¯å¢ƒå˜é‡è®¾ç½®" class="headerlink" title="8.2 ç¯å¢ƒå˜é‡è®¾ç½®"></a>8.2 ç¯å¢ƒå˜é‡è®¾ç½®</h3><h5 id="8-2-1-windows-çš„è§£å‹å’Œpathå˜é‡è®¾ç½®"><a href="#8-2-1-windows-çš„è§£å‹å’Œpathå˜é‡è®¾ç½®" class="headerlink" title="8.2.1 windows çš„è§£å‹å’Œpathå˜é‡è®¾ç½®"></a>8.2.1 windows çš„è§£å‹å’Œpathå˜é‡è®¾ç½®</h5><p>windows ä½¿ç”¨ 7-zipèƒ½è§£å‹åˆ°æ¯”å¦‚ d:\app\sui æ–‡ä»¶ç›®å½•</p>
<p><img src="images/image-20241110213627080.png" alt="image-20241110213627080"></p>
<p><img src="images/image-20241110213815476.png" alt="image-20241110213815476"></p>
<p>éœ€è¦åœ¨windowsè®¾ç½®path </p>
<p><img src="images/image-20241110214212301.png" alt="image-20241110214212301"></p>
<p><img src="images/image-20241110214031742.png" alt="image-20241110214031742"></p>
<h5 id="8-2-2-linuxçš„è§£å‹å’Œpath-å˜é‡è®¾ç½®"><a href="#8-2-2-linuxçš„è§£å‹å’Œpath-å˜é‡è®¾ç½®" class="headerlink" title="8.2.2 linuxçš„è§£å‹å’Œpath å˜é‡è®¾ç½®"></a>8.2.2 linuxçš„è§£å‹å’Œpath å˜é‡è®¾ç½®</h5><h6 id="8-2-2-1-linux-ä¸‹è½½æ–‡ä»¶åè§£å‹"><a href="#8-2-2-1-linux-ä¸‹è½½æ–‡ä»¶åè§£å‹" class="headerlink" title="8.2.2.1 linux ä¸‹è½½æ–‡ä»¶åè§£å‹"></a>8.2.2.1 linux ä¸‹è½½æ–‡ä»¶åè§£å‹</h6><p>ä¸‹è½½æ–‡ä»¶åˆ° ~&#x2F; ç›®å½• ,ä¸‹é¢çš„ä»£ç å°† tgz æ–‡ä»¶è§£å‹åˆ°sui ç›®å½•, å¦‚æœä½ éœ€è¦</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ljl@ljl-i5-14400:~$ <span class="built_in">ls</span> *.tgz</span><br><span class="line">sui-testnet-v1.36.2-ubuntu-x86_64.tgz  sui-testnet-v1.37.1-ubuntu-x86_64.tgz</span><br><span class="line">ljl@ljl-i5-14400:~$ <span class="built_in">mkdir</span> sui</span><br><span class="line">ljl@ljl-i5-14400:~$ <span class="built_in">cd</span> sui</span><br><span class="line">ljl@ljl-i5-14400:~/sui$ tar xzf ../sui-testnet-v1.37.1-ubuntu-x86_64.tgz</span><br><span class="line">ljl@ljl-i5-14400:~/sui$ <span class="built_in">ls</span></span><br><span class="line">move-analyzer  sui-bridge      sui-data-ingestion  sui-faucet       sui-node            sui-tool</span><br><span class="line">sui            sui-bridge-cli  sui-debug           sui-graphql-rpc  sui-test-validator</span><br><span class="line">ljl@ljl-i5-14400:~/sui$ <span class="built_in">pwd</span></span><br><span class="line">/home/ljl/sui</span><br></pre></td></tr></table></figure>

<ul>
<li><p>æ³¨æ„$ ä¹‹å‰çš„æ˜¯å‘½ä»¤è¡Œæç¤º</p>
</li>
<li><p>æœ€åçš„pwdçœ‹åˆ°çš„ç›®å½•å’Œä½ æœ¬äººç”¨æˆ·ä¸»ç›®å½•æœ‰å…³.</p>
<h6 id="8-2-2-2-è®¾ç½®-path"><a href="#8-2-2-2-è®¾ç½®-path" class="headerlink" title="8.2.2.2 è®¾ç½® path"></a>8.2.2.2 è®¾ç½® path</h6></li>
</ul>
<ul>
<li><p>å¯ä»¥ä¿®æ”¹&#x2F;etc&#x2F;profile æˆ– ~&#x2F;.bashrc æ–‡ä»¶çš„å°¾éƒ¨,å¢åŠ ä¸€è¡Œ</p>
</li>
<li><p>æ³¨æ„ä½ å°†&#x2F;home&#x2F;ljl&#x2F;sui ä¿®æ”¹æˆä½ çš„sui è§£å‹çš„è·¯å¾„</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$PATH:/home/ljl/sui</span><br></pre></td></tr></table></figure>

<ul>
<li>æ‰§è¡Œ source  ~&#x2F;.bashrc</li>
</ul>
<h5 id="8-2-3-macç¯å¢ƒå˜é‡è®¾ç½®"><a href="#8-2-3-macç¯å¢ƒå˜é‡è®¾ç½®" class="headerlink" title="8.2.3  macç¯å¢ƒå˜é‡è®¾ç½®"></a>8.2.3  macç¯å¢ƒå˜é‡è®¾ç½®</h5><h6 id="mac-çš„å®‰è£…ç±»ä¼¼linux-æœ€åè·¯å¾„è®¾ç½®éœ€è¦é…ç½®åœ¨-etc-profile"><a href="#mac-çš„å®‰è£…ç±»ä¼¼linux-æœ€åè·¯å¾„è®¾ç½®éœ€è¦é…ç½®åœ¨-etc-profile" class="headerlink" title="mac çš„å®‰è£…ç±»ä¼¼linux, æœ€åè·¯å¾„è®¾ç½®éœ€è¦é…ç½®åœ¨ &#x2F;etc&#x2F;profile"></a>mac çš„å®‰è£…ç±»ä¼¼linux, æœ€åè·¯å¾„è®¾ç½®éœ€è¦é…ç½®åœ¨ &#x2F;etc&#x2F;profile</h6><h1 id><a href="#" class="headerlink" title></a></h1><h3 id="9-otw-æœ‰ä»€ä¹ˆç”¨"><a href="#9-otw-æœ‰ä»€ä¹ˆç”¨" class="headerlink" title="9 otw æœ‰ä»€ä¹ˆç”¨"></a>9 otw æœ‰ä»€ä¹ˆç”¨</h3><ul>
<li>é—®é¢˜: è§è¯è€…å¯¹è±¡æœ‰ä»€ä¹ˆä½œç”¨ï¼Œæˆ‘åœ¨å¥½å‡ ä¸ªåœ°æ–¹çœ‹åˆ°ï¼ŒåªçŸ¥é“æ€ä¹ˆç”¨ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™</li>
</ul>
<p>otw åœ¨coinå‘å¸çš„æ—¶å€™ç”¨å¾—å¾ˆå¤š,  å› ä¸ºotwå¯¹è±¡æ™ºèƒ½ç”±packageæ„é€ ,   </p>
<p>è€Œå‚ä¸å¢åŠ è´§å¸ç›¸å…³çš„æ–¹æ³•,éƒ½æ˜¯ç”±ä¸€ä¸ª<T> å‚æ•°,è¿™ä¸ªç±»å‹å‚æ•°æ˜¯ä¸€ä¸ªOTWå‚æ•°.   ä½¿ç”¨OTW ç±»å‹åšæ³›å‹çš„å¯¹è±¡,</T></p>
<p>åªåœ¨OTW æ¨¡å—åˆå§‹åŒ–çš„æ—¶å€™æ‰èƒ½åˆ›å»º,ä»¥åéƒ½æ— æ³•åˆ›å»º. One time witness </p>
<p>æ³¨æ„</p>
<figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">struct <span class="title class_">Balance</span>&lt;T&gt;&#123;&#125;</span><br><span class="line">struct <span class="title class_">Supply</span>&lt;T&gt;&#123;&#125;</span><br><span class="line">struct <span class="title class_">Coin</span>&lt;T&gt;&#123;&#125;</span><br><span class="line">struct <span class="title class_">TreasureCap</span>&lt;T&gt;&#123;&#125;</span><br><span class="line"><span class="comment">/// unique instance of CoinMetadata&lt;T&gt; that stores the metadata for this coin type.</span></span><br><span class="line"><span class="keyword">public</span> struct <span class="title class_">CoinMetadata</span>&lt;phantom T&gt; has key, store &#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"><span class="variable language_">module</span> <span class="attr">pkg</span>::hk&#123;</span><br><span class="line">    <span class="keyword">public</span> struct <span class="variable constant_">HK</span> has drop &#123;&#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">init</span>(<span class="params"><span class="attr">hk</span>:&amp;mut HK, <span class="attr">ctx</span>:mut <span class="title class_">TxContext</span></span>)&#123;</span><br><span class="line">        <span class="title function_">let</span> (cap,meta) = <span class="attr">coin</span>::<span class="title function_">create_currency</span>(hk,&amp;mut ctx);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>åˆ›å»ºçš„è´§å¸æ²¾æŸ“äº†ä¸€ä¸ªT, è¿™ä¸ªT  æ˜¯ä¸€ä¸ªOTW  struct, æ— æ³•åˆ›å»º,æ— æ³•åœ¨å¤–éƒ¨ä½¿ç”¨</p>
<p><img src="images/image-20241111221059544.png" alt="image-20241111221059544"></p>
<p><img src="images/image-20241111221218590.png" alt="image-20241111221218590"></p>
<ul>
<li><p>supplyå¯¹è±¡æä¾›äº†å¢é•¿è´§å¸ä½™é¢balanceçš„æ–¹æ³•,  </p>
</li>
<li><p>balanceå¯ä»¥è½¬æ¢æˆcoin. </p>
</li>
<li><p>sui::balance::create_supply æ˜¯æœ€å…³é”®çš„åˆ›å»ºè´§å¸çš„æ–¹æ³•</p>
</li>
<li><p>sui::balance::create_supply éœ€è¦ä¸€ä¸ªotwå¯¹è±¡åšå‚æ•°.</p>
</li>
</ul>
<p> create_supply éœ€è¦ä¸€ä¸ªotwå¯¹è±¡.  åˆ›å»ºè´§å¸ éœ€è¦Balance,åˆ›å»ºBalance éœ€è¦Supply, åˆ›å»ºSupply éœ€è¦ä¸€ä¸ªotwå¯¹è±¡hk</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> sui::balance;</span><br><span class="line"><span class="keyword">public</span> fun balance::<span class="built_in">create_supply</span>&lt;T: drop&gt;(_: T): Supply&lt;T&gt; &#123;</span><br><span class="line">    Supply &#123; value: <span class="number">0</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> fun <span class="built_in">increase_supply</span>&lt;T&gt;(self: &amp;mut Supply&lt;T&gt;, value: u64): Balance&lt;T&gt; &#123;</span><br><span class="line">    assert!(value &lt; (<span class="number">18446744073709551615u</span>64 - self.value), EOverflow);</span><br><span class="line">    self.value = self.value + value;</span><br><span class="line">    Balance &#123; value &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>sui::balance è¿™ä¸ªSupply å’ŒBalance éƒ½éœ€è¦ä¸€ä¸ªOTWç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public struct Supply&lt;phantom T&gt; has store &#123;</span><br><span class="line">    value: u64,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/// Storable balance - an inner struct of a Coin type.</span><br><span class="line">/// Can be used to store coins which don&#x27;t need the key ability.</span><br><span class="line">public struct Balance&lt;phantom T&gt; has store &#123;</span><br><span class="line">    value: u64,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>sui::coin ä¹Ÿæœ‰ä¸€ä¸ªtype arg éœ€è¦ä¸€ä¸ªOTW ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/// A coin of type `T` worth `value`. Transferable and storable</span><br><span class="line">public struct Coin&lt;phantom T&gt; has key, store &#123;</span><br><span class="line">    id: UID,</span><br><span class="line">    balance: Balance&lt;T&gt;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> æˆ‘ä»¬åˆ›å»ºè´§å¸ä¹‹å,æŸ¥çœ‹åˆ°çš„TreasuryCap,æŒæœ‰ä¸€ä¸ªSupplyå¯¹è±¡,å› æ­¤æŒæœ‰äº†å¢é•¿è´§å¸çš„èƒ½åŠ›.</p>
<p><img src="images/image-20241111110333165.png" alt="image-20241111110333165"></p>
<p>è´§å¸åˆ›å»º,å¦‚ä¸‹å›¾ä¸­çš„HK ä¸èƒ½æ‰‹å·¥åˆ›å»º,åé¢åˆ›å»ºçš„è´§å¸,éƒ½ä½¿ç”¨HK ç±»å‹å‚æ•°</p>
<figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span> <span class="attr">coin_owner</span>::hk &#123;</span><br><span class="line">    use <span class="attr">sui</span>::<span class="attr">coin</span>::create_currency;</span><br><span class="line">    use <span class="attr">sui</span>::<span class="attr">tx_context</span>::&#123;<span class="title class_">TxContext</span>, sender&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> struct <span class="variable constant_">HK</span> has drop &#123;&#125;</span><br><span class="line"></span><br><span class="line">    fun <span class="title function_">init</span>(<span class="params"><span class="attr">hk</span>: HK, <span class="attr">ctx</span>: &amp;mut <span class="title class_">TxContext</span></span>) &#123;</span><br><span class="line">        <span class="title function_">let</span> (treasury_cap, coin_metadata) =</span><br><span class="line">            <span class="title function_">create_currency</span>(</span><br><span class="line">            hk,</span><br><span class="line">            <span class="number">8</span>,</span><br><span class="line">            b<span class="string">&quot;HK&quot;</span>,</span><br><span class="line">            b<span class="string">&quot;HK  made in hongkong&quot;</span>,</span><br><span class="line">            b<span class="string">&quot;HK  made in hongkong&quot;</span>,</span><br><span class="line">            <span class="attr">option</span>::<span class="title function_">none</span>(),</span><br><span class="line">            ctx);</span><br><span class="line">        <span class="attr">transfer</span>::<span class="title function_">public_freeze_object</span>(coin_metadata);</span><br><span class="line">        <span class="keyword">let</span> my_address = <span class="title function_">sender</span>(ctx);</span><br><span class="line">        <span class="attr">transfer</span>::<span class="title function_">public_transfer</span>(treasury_cap, my_address)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è´§å¸åˆ›å»ºæ–¹æ³• coin::create_currency, é‡Œé¢éœ€è¦ç¬¬ä¸€ä¸ªå‚æ•° witnessæ˜¯ One time witness</p>
<p><img src="images/image-20241111114413049.png" alt="image-20241111114413049"></p>
<p>ä»¥ä¸‹æ¨è®º:</p>
<ol>
<li><p>å®šä¹‰è´§å¸çš„package publishä¹‹å,è·å¾—å¯¹è±¡id ,æˆä¸ºpkg_id</p>
</li>
<li><p>publishçš„æ—¶å€™,ä¸´æ—¶åˆ›å»ºäº†ä¸€ä¸ª pkg_id::hk::HK structçš„å¯¹è±¡</p>
</li>
<li><p>coin::create_currency  åˆ›å»ºå‡ºæ¥äº† </p>
<p><code>Supply&lt;pkg_id::hk::HK&gt; </code> å¯¹è±¡<br>è¿™ä¸ªå¯¹è±¡èƒ½ç”Ÿæˆ <code>Balance&lt;pkg_id::hk::HK&gt;</code> å¯¹è±¡<br>èƒ½ç”Ÿæˆ <code>Coin&lt;pkg_id::hk::HK&gt;</code></p>
</li>
</ol>
<p> 4 .åªæœ‰æŒæœ‰<code>Supply&lt;pkg_id::hk::HK&gt;</code> å¯¹è±¡æ‰èƒ½å‘å¸, ä»¥åæ— æ³•æ‰‹å·¥åˆ›å»º<code>Supply&lt;pkg_id::hk::HK&gt;</code> å¯¹è±¡,å› ä¸º</p>
<p><code>public fun balance::create_supply&lt;T: drop&gt;(_: T): Supply&lt;T&gt;</code>  éœ€è¦ä¸€ä¸ªpkg_id::hk::HK ç±»å‹çš„å¯¹è±¡åšè¾“å…¥å‚æ•°, packageå‘å¸ƒä¹‹å,æ— æ³•é€šè¿‡ç¼–ç¨‹åˆ›å»º.</p>
<ol start="5">
<li><p>TreasuryCap åªæ˜¯Supply å¯¹è±¡çš„ä¸€ç§é“¾ä¸Šå­˜å‚¨å½¢å¼. </p>
</li>
<li><p>coin::create_currency éœ€è¦ä¸€ä¸ªotw å¯¹è±¡, è¿™ä¸ªæ–¹æ³•æ‰æä¾›äº†CoinMetadata,æ‰èƒ½å½“åšçœŸæ­£çš„è´§å¸.</p>
<figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> fun create_currency&lt;<span class="attr">T</span>: drop&gt;(</span><br><span class="line">    <span class="attr">witness</span>: T,</span><br><span class="line">    <span class="attr">decimals</span>: u8,</span><br><span class="line">    <span class="attr">symbol</span>: vector&lt;u8&gt;,</span><br><span class="line">    <span class="attr">name</span>: vector&lt;u8&gt;,</span><br><span class="line">    <span class="attr">description</span>: vector&lt;u8&gt;,</span><br><span class="line">    <span class="attr">icon_url</span>: <span class="title class_">Option</span>&lt;<span class="title class_">Url</span>&gt;,</span><br><span class="line">    <span class="attr">ctx</span>: &amp;mut <span class="title class_">TxContext</span>,</span><br><span class="line">): (<span class="title class_">TreasuryCap</span>&lt;T&gt;, <span class="title class_">CoinMetadata</span>&lt;T&gt;) &#123;</span><br><span class="line">    <span class="comment">// Make sure there&#x27;s only one instance of the type T</span></span><br><span class="line">    assert!(<span class="attr">sui</span>::<span class="attr">types</span>::<span class="title function_">is_one_time_witness</span>(&amp;witness), <span class="title class_">EBadWitness</span>);</span><br><span class="line"></span><br><span class="line">    (</span><br><span class="line">        <span class="title class_">TreasuryCap</span> &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="attr">object</span>::<span class="title function_">new</span>(ctx),</span><br><span class="line">            <span class="attr">total_supply</span>: <span class="attr">balance</span>::<span class="title function_">create_supply</span>(witness),</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title class_">CoinMetadata</span> &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="attr">object</span>::<span class="title function_">new</span>(ctx),</span><br><span class="line">            decimals,</span><br><span class="line">            <span class="attr">name</span>: <span class="attr">string</span>::<span class="title function_">utf8</span>(name),</span><br><span class="line">            <span class="attr">symbol</span>: <span class="attr">ascii</span>::<span class="title function_">string</span>(<span class="built_in">symbol</span>),</span><br><span class="line">            <span class="attr">description</span>: <span class="attr">string</span>::<span class="title function_">utf8</span>(description),</span><br><span class="line">            icon_url,</span><br><span class="line">        &#125;,</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>è™½ç„¶ä¹Ÿå¯ä»¥ç”¨balance::createSupplyåˆ›å»ºå…¶ä»–ç±»å‹çš„balance å’Œcoin,ä½†æ˜¯ä¼šå½“åšå…¶ä»–å¯¹è±¡çœ‹å¾….</p>
<p>ä¸‹æ–‡ä¸­ä¸ä½¿ç”¨otwåˆ›å»ºçš„Supply,å¯ä»¥ç”¨æ¥åˆ›å»ºbalanceå’Œcoin.</p>
<p>ä¸åŒç”¨æˆ·éƒ½å¯ä»¥è°ƒç”¨è¿™ä¸ªmint_to æ–¹æ³•. åˆ›å»ºå‡ºæ¥çš„coin ä¸èƒ½è§†ä¸ºä»£å¸,ä½¿ç”¨ sui client balance   ä¸èƒ½çœ‹åˆ°.  å› ä¸ºæ²¡æœ‰å¯¹åº”çš„CoinMetadata</p>
<figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span> <span class="attr">strange_coin</span>::jp;</span><br><span class="line">use <span class="attr">sui</span>::<span class="attr">balance</span>::&#123;<span class="title class_">Supply</span>,<span class="title class_">Balance</span>&#125;;</span><br><span class="line"><span class="keyword">public</span> struct <span class="title class_">Other</span> has drop&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> struct <span class="title class_">SupplyHold</span> has key,store&#123;</span><br><span class="line">    id : <span class="variable constant_">UID</span>,</span><br><span class="line">    supply :<span class="title class_">Supply</span>&lt;<span class="title class_">Other</span>&gt;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> entry fun <span class="title function_">mint_to</span>(<span class="params">amount :u64,<span class="attr">to</span>:address,ctx : &amp;mut <span class="title class_">TxContext</span></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> other = <span class="title class_">Other</span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">let</span> mut supply = <span class="attr">sui</span>::<span class="attr">balance</span>::<span class="title function_">create_supply</span>(other);</span><br><span class="line">    <span class="keyword">let</span> balance = supply.<span class="title function_">increase_supply</span>(amount);</span><br><span class="line">    <span class="keyword">let</span> coin = <span class="attr">sui</span>::<span class="attr">coin</span>::<span class="title function_">from_balance</span>(balance, ctx);</span><br><span class="line">    <span class="keyword">let</span> hold = <span class="title class_">SupplyHold</span>&#123;</span><br><span class="line">        id : <span class="attr">object</span>::<span class="title function_">new</span>(ctx),</span><br><span class="line">        supply,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="attr">transfer</span>::<span class="title function_">public_transfer</span>(hold,<span class="attr">tx_context</span>::<span class="title function_">sender</span>(ctx));</span><br><span class="line">    <span class="attr">transfer</span>::<span class="title function_">public_transfer</span>(coin,to);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="10-move-table-å¯¹è±¡çš„é“¾ä¸ŠæŸ¥çœ‹é—®é¢˜"><a href="#10-move-table-å¯¹è±¡çš„é“¾ä¸ŠæŸ¥çœ‹é—®é¢˜" class="headerlink" title="10. move table å¯¹è±¡çš„é“¾ä¸ŠæŸ¥çœ‹é—®é¢˜"></a>10. move table å¯¹è±¡çš„é“¾ä¸ŠæŸ¥çœ‹é—®é¢˜</h3><ul>
<li>é—®é¢˜æŸ¥çœ‹</li>
</ul>
<p>move ä¸­ Table æ˜¯é€šè¿‡ dynamic field å®ç°çš„ï¼Œåœ¨æµè§ˆå™¨ä¸­ä¼¼ä¹æ²¡æœ‰åŠæ³•æŸ¥åˆ° table ä¸­æ‰€æœ‰çš„æ•°æ®ï¼Œtable å¯¹åº”çš„é‚£ä¸ª object id åœ¨suiæµè§ˆå™¨ä¸­ä¹Ÿæ— æ³•è®¿é—®ã€‚åªæ˜¯æµè§ˆå™¨ä¸æ”¯æŒï¼Œè¿˜æ˜¯è¯´ä¸èƒ½å®ç°åœ¨é“¾ä¸‹æŸ¥åˆ° table é‡Œæ‰€æœ‰çš„æ•°æ®ã€‚</p>
<ul>
<li><p>ç­”å¤,å¯ä»¥çœ‹åˆ°åŠ¨æ€å­—æ®µ</p>
<h4 id="10-1-ç›´æ¥ä¿å­˜çš„tableå¯¹è±¡"><a href="#10-1-ç›´æ¥ä¿å­˜çš„tableå¯¹è±¡" class="headerlink" title="10.1  ç›´æ¥ä¿å­˜çš„tableå¯¹è±¡"></a>10.1  ç›´æ¥ä¿å­˜çš„tableå¯¹è±¡</h4><ul>
<li>ç›¸å…³ä»£ç </li>
</ul>
<figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span> <span class="attr">table_example</span>::table_example;</span><br><span class="line">use <span class="attr">sui</span>::<span class="attr">table</span>::&#123;<span class="title class_">Self</span>,<span class="title class_">Table</span>&#125;;</span><br><span class="line">use <span class="attr">std</span>::<span class="attr">string</span>::<span class="title class_">String</span>;</span><br><span class="line"></span><br><span class="line">fun <span class="title function_">init</span>(<span class="params">ctx : &amp;mut <span class="title class_">TxContext</span></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> mut tb =  <span class="attr">table</span>::<span class="keyword">new</span>&lt;<span class="title class_">String</span>,u32&gt;(ctx);</span><br><span class="line">    tb.<span class="title function_">add</span>(b<span class="string">&quot;abc&quot;</span>.<span class="title function_">to_string</span>(),<span class="number">1</span>);</span><br><span class="line">    tb.<span class="title function_">add</span>(b<span class="string">&quot;def&quot;</span>.<span class="title function_">to_string</span>(),<span class="number">2</span>);</span><br><span class="line">    <span class="attr">transfer</span>::<span class="title function_">public_transfer</span>(tb,<span class="attr">tx_context</span>::<span class="title function_">sender</span>(ctx));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><p>æŸ¥çœ‹publishä¸Šå»çš„å¯¹è±¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sui client publish --skip-fetch-latest-git-deps  </span><br></pre></td></tr></table></figure>

<p>ç›¸å…³log</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ Object Changes                                                                                   â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ Created Objects:                                                                                 â”‚</span><br><span class="line">â”‚  â”Œâ”€â”€                                                                                             â”‚</span><br><span class="line">â”‚  â”‚ ObjectID: 0x007c0c0b8d4139290a27523bd2645833853bfa12b6278573083abf9a8a6f8f5c                  â”‚</span><br><span class="line">â”‚  â”‚ Sender: 0x540105a7d2f5f54a812c630f2996f1790ed0e60d1f9a870ce397f03e4cec9b38                    â”‚</span><br><span class="line">â”‚  â”‚ Owner: Object ID: ( 0x2e05841c8910b5450efc2744ad379a2986c73cd451fcac469833d0083ccacf9c )      â”‚</span><br><span class="line">â”‚  â”‚ ObjectType: 0x2::dynamic_field::Field&lt;0x1::string::String, u32&gt;                               â”‚</span><br><span class="line">â”‚  â”‚ Version: 206232477                                                                            â”‚</span><br><span class="line">â”‚  â”‚ Digest: 3NMXpcaGLVMa81CPJmR6Da7pKB9xdksv3qTcQzwT3Bxb                                          â”‚</span><br><span class="line">â”‚  â””â”€â”€                                                                                             â”‚</span><br><span class="line">â”‚  â”Œâ”€â”€                                                                                             â”‚</span><br><span class="line">â”‚  â”‚ ObjectID: 0x2e05841c8910b5450efc2744ad379a2986c73cd451fcac469833d0083ccacf9c                  â”‚</span><br><span class="line">â”‚  â”‚ Sender: 0x540105a7d2f5f54a812c630f2996f1790ed0e60d1f9a870ce397f03e4cec9b38                    â”‚</span><br><span class="line">â”‚  â”‚ Owner: Account Address ( 0x540105a7d2f5f54a812c630f2996f1790ed0e60d1f9a870ce397f03e4cec9b38 ) â”‚</span><br><span class="line">â”‚  â”‚ ObjectType: 0x2::table::Table&lt;0x1::string::String, u32&gt;                                       â”‚</span><br><span class="line">â”‚  â”‚ Version: 206232477                                                                            â”‚</span><br><span class="line">â”‚  â”‚ Digest: Ei39HsytUhDxrxWPX5uYohJ7CsSWbysxqvbTCEVKhZEf                                          â”‚</span><br><span class="line">â”‚  â””â”€â”€                                                  </span><br></pre></td></tr></table></figure>


</li>
<li><p>suiscanæµè§ˆ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://suiscan.xyz/testnet/object/0x2e05841c8910b5450efc2744ad379a2986c73cd451fcac469833d0083ccacf9c</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p><img src="images/image-20241110234724177.png" alt="image-20241110234724177"></p>
<ul>
<li>ç›¸å…³å­—æ®µ</li>
</ul>
<figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// Adds a key-value pair to the table `table: &amp;mut Table&lt;K, V&gt;`</span></span><br><span class="line"><span class="comment">/// Aborts with `sui::dynamic_field::EFieldAlreadyExists` if the table already has an entry with</span></span><br><span class="line"><span class="comment">/// that key `k: K`.</span></span><br><span class="line"><span class="keyword">public</span> fun add&lt;<span class="attr">K</span>: copy + drop + store, <span class="attr">V</span>: store&gt;(<span class="attr">table</span>: &amp;mut <span class="title class_">Table</span>&lt;K, V&gt;, <span class="attr">k</span>: K, <span class="attr">v</span>: V) &#123;</span><br><span class="line">    <span class="attr">field</span>::<span class="title function_">add</span>(&amp;mut table.<span class="property">id</span>, k, v);</span><br><span class="line">    table.<span class="property">size</span> = table.<span class="property">size</span> + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>dynamic field,  é€šè¿‡table address å’Œ å±æ€§å,ä¸€èµ·è®¡ç®—å­—æ®µ.</p>
<figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> fun add&lt;<span class="title class_">Name</span>: copy + drop + store, <span class="title class_">Value</span>: store&gt;(</span><br><span class="line">    <span class="comment">// we use &amp;mut UID in several spots for access control</span></span><br><span class="line">    <span class="attr">object</span>: &amp;mut <span class="variable constant_">UID</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="title class_">Name</span>,</span><br><span class="line">    <span class="attr">value</span>: <span class="title class_">Value</span>,</span><br><span class="line">) &#123;</span><br><span class="line">    <span class="keyword">let</span> object_addr = <span class="built_in">object</span>.<span class="title function_">to_address</span>();</span><br><span class="line">    <span class="keyword">let</span> hash = <span class="title function_">hash_type_and_key</span>(object_addr, name);</span><br><span class="line">    assert!(!<span class="title function_">has_child_object</span>(object_addr, hash), <span class="title class_">EFieldAlreadyExists</span>);</span><br><span class="line">    <span class="keyword">let</span> field = <span class="title class_">Field</span> &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="attr">object</span>::<span class="title function_">new_uid_from_hash</span>(hash),</span><br><span class="line">        name,</span><br><span class="line">        value,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">add_child_object</span>(object_addr, field)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="tableå¯¹è±¡ä½œä¸ºå­—æ®µåœ¨-suivision-å¯ä»¥æŸ¥çœ‹"><a href="#tableå¯¹è±¡ä½œä¸ºå­—æ®µåœ¨-suivision-å¯ä»¥æŸ¥çœ‹" class="headerlink" title="tableå¯¹è±¡ä½œä¸ºå­—æ®µåœ¨ suivision å¯ä»¥æŸ¥çœ‹"></a>tableå¯¹è±¡ä½œä¸ºå­—æ®µåœ¨ suivision å¯ä»¥æŸ¥çœ‹</h4><p><a target="_blank" rel="noopener" href="https://testnet.suivision.xyz/object/0x0a6a64b85ce448afa134c0634487bdc7bb6d4f5a621237dc92e3f1671a2467fd">Sui Object</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://testnet.suivision.xyz/object/0x0a6a64b85ce448afa134c0634487bdc7bb6d4f5a621237dc92e3f1671a2467fd</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">struct</span> <span class="title">MyStore</span>  <span class="title">has</span> <span class="title">key</span> ,<span class="title">store</span>&#123;</span></span><br><span class="line">    id:UID,</span><br><span class="line">    total_balance : Balance&lt;SUI&gt;,</span><br><span class="line">    received: Table&lt;address,u64&gt; ,</span><br><span class="line">&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><img src="images/image-20241111141423819.png" alt="image-20241111141423819"></p>
<p>ç›¸å…³å¯¹è±¡å®šä¹‰:</p>
<figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> struct <span class="title class_">MyStore</span>  has key ,store&#123;</span><br><span class="line">    <span class="attr">id</span>:<span class="variable constant_">UID</span>,</span><br><span class="line">    total_balance : <span class="title class_">Balance</span>&lt;<span class="variable constant_">SUI</span>&gt;,</span><br><span class="line">    <span class="attr">received</span>: <span class="title class_">Table</span>&lt;address,u64&gt; ,</span><br><span class="line">&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ç›¸å…³åŠ¨æ€å­—æ®µçš„ç¡®çœ‹ä¸åˆ°</p>
<h3 id="11-sui-é’±åŒ…åœ°å€å’Œclientåœ°å€"><a href="#11-sui-é’±åŒ…åœ°å€å’Œclientåœ°å€" class="headerlink" title="11 sui  é’±åŒ…åœ°å€å’Œclientåœ°å€"></a>11 sui  é’±åŒ…åœ°å€å’Œclientåœ°å€</h3><p>é’±åŒ…åœ°å€ä¸ sui å®¢æˆ·ç«¯åœ°å€çš„å…³ç³»</p>
<ul>
<li><p>ä¸¤ä¸ªä¸åŒå¾—åœ°å€ï¼Œå¯ä»¥è®¤ä¸ºä½ æœ‰ä¸¤ä¸ªé’±åŒ…ï¼Œæ¯ä¸ªé’±åŒ…æœ‰ä¸åŒå¾—å¯†ç ï¼Œ ä¸€èˆ¬å¤§å®¶é‡‡ç”¨å¸®åŠ©è®°å¿†çš„12ä¸ªå•è¯æ¥è®°å¿†</p>
</li>
<li><p>å¯ä»¥åšé’±åŒ…Aä¸­çš„coin  è½¬ç§» åˆ°é’±åŒ…B</p>
<figure class="highlight bash"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®¢æˆ·ç«¯é’±åŒ…çš„åœ°å€ï¼Œ</span></span><br><span class="line"><span class="built_in">export</span>    C_ADDR=<span class="string">&quot;`sui client active-address`&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$C_ADDR</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æµè§ˆå™¨é’±åŒ…çš„åœ°å€ï¼Œå¯ä»¥ä¿®æ”¹æˆä½ çš„é’±åŒ…åœ°å€</span></span><br><span class="line"><span class="built_in">export</span> W_ADDR=0xafe36044ef56d22494bfe6231e78dd128f097693f2d974761ee4d649e61f5fa2</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$W_ADDR</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥æŸ¥åˆ°C_ADDR çš„coin</span></span><br><span class="line">sui client gas <span class="variable">$C_ADDR</span></span><br><span class="line"></span><br><span class="line">ljl@ljl-i5-14400:~$ sui client gas <span class="variable">$C_ADDR</span></span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ gasCoinId                                                          â”‚ mistBalance (MIST) â”‚ suiBalance (SUI) â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ 0xa957fcfae2a624189f4ee5e24d07be6f2e492668c8a8a3a810bb684c7ae25300 â”‚ 3667910060         â”‚ 3.66             â”‚</span><br><span class="line">â”‚ 0xb2fbb77f3168b61d21ac6c005086a1747ce451df29ade1be057c4eefcd17493b â”‚ 1000000000         â”‚ 1.00             â”‚</span><br><span class="line">â”‚ 0xda2e7328acd44f9167e306f18debf134f4200f9339241d904bc2bdd18266b00d â”‚ 1000000000         â”‚ 1.00             â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line"></span><br><span class="line">sui client balance <span class="variable">$W_ADDR</span></span><br><span class="line"><span class="comment"># æ ¹æ®è¾“å‡ºçš„gasCoinId å‘é€ç»™W_ADDR</span></span><br><span class="line"><span class="built_in">export</span> COIN=0xda2e7328acd44f9167e306f18debf134f4200f9339241d904bc2bdd18266b00d</span><br><span class="line"></span><br><span class="line">sui client transfer --to <span class="variable">$W_ADDR</span> --object-id <span class="variable">$COIN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹é’±åŒ…ä¸­çš„coin</span></span><br><span class="line"></span><br><span class="line">sui client gas <span class="variable">$W_ADDR</span></span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ gasCoinId                                                          â”‚ mistBalance (MIST) â”‚ suiBalance (SUI) â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ 0x2cbbd85ae56bb9d95746797283a6ef045fdad20d76bfe5690097f6467f96693a â”‚ 997666048          â”‚ 0.99             â”‚</span><br><span class="line">â”‚ 0x761035a215b60f6d3c08dff837b85a67f1e2620ba63a0904785924d37095c201 â”‚ 922766720          â”‚ 0.92             â”‚</span><br><span class="line">â”‚ 0xda2e7328acd44f9167e306f18debf134f4200f9339241d904bc2bdd18266b00d â”‚ 1000000000         â”‚ 1.00             â”‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sui client balance <span class="variable">$W_ADDR</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="æˆ‘ä»¬æ¯æ¬¡åšpublishæˆ–move-callï¼Œéƒ½éœ€è¦åŒºå—é“¾ç½‘ç»œè®¡ç®—å’Œå­˜å‚¨ï¼Œè¿™äº›è®¡ç®—å’Œå­˜å‚¨éœ€è¦æ¶ˆè€—gaså€¼ã€‚"><a href="#æˆ‘ä»¬æ¯æ¬¡åšpublishæˆ–move-callï¼Œéƒ½éœ€è¦åŒºå—é“¾ç½‘ç»œè®¡ç®—å’Œå­˜å‚¨ï¼Œè¿™äº›è®¡ç®—å’Œå­˜å‚¨éœ€è¦æ¶ˆè€—gaså€¼ã€‚" class="headerlink" title="æˆ‘ä»¬æ¯æ¬¡åšpublishæˆ–move-callï¼Œéƒ½éœ€è¦åŒºå—é“¾ç½‘ç»œè®¡ç®—å’Œå­˜å‚¨ï¼Œè¿™äº›è®¡ç®—å’Œå­˜å‚¨éœ€è¦æ¶ˆè€—gaså€¼ã€‚"></a>æˆ‘ä»¬æ¯æ¬¡åšpublishæˆ–move-callï¼Œéƒ½éœ€è¦åŒºå—é“¾ç½‘ç»œè®¡ç®—å’Œå­˜å‚¨ï¼Œè¿™äº›è®¡ç®—å’Œå­˜å‚¨éœ€è¦æ¶ˆè€—gaså€¼ã€‚</h3><p><img src="images/image-20241110231811470.png" alt="image-20241110231811470"></p>
<h3 id="12-æŸ¥çœ‹å½“å‰æ”¯æŒçš„ç½‘ç»œ"><a href="#12-æŸ¥çœ‹å½“å‰æ”¯æŒçš„ç½‘ç»œ" class="headerlink" title="12 æŸ¥çœ‹å½“å‰æ”¯æŒçš„ç½‘ç»œ"></a>12 æŸ¥çœ‹å½“å‰æ”¯æŒçš„ç½‘ç»œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> sui client envs</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ <span class="built_in">alias</span>   â”‚ url                                 â”‚ active â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ testnet â”‚ https://fullnode.testnet.sui.io:443 â”‚ *      â”‚</span><br><span class="line">â”‚ devnet  â”‚ https://fullnode.devnet.sui.io:443  â”‚        â”‚</span><br><span class="line">â”‚ <span class="built_in">local</span>   â”‚ http://127.0.0.1:9000               â”‚        â”‚</span><br><span class="line">â”‚ mainnet â”‚ https://fullnode.mainnet.sui.io:443 â”‚        â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br></pre></td></tr></table></figure>



<p>é…ç½®ç½‘ç»œdevnet</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sui client new-env --<span class="built_in">alias</span> devnet --rpc https://fullnode.devnet.sui.io:443</span><br></pre></td></tr></table></figure>



<p>å¦‚æœæ²¡æœ‰devnet</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sui client switch --env  devnet</span><br></pre></td></tr></table></figure>



<h3 id="11-è‡ªåŠ¨publishåˆ°äº†devnetä¸Šé¢ï¼Œä¸çŸ¥é“æ€ä¹ˆå›äº‹ï¼Œscanä¸Šé¢åœ¨devnetä¸Šèƒ½æœåˆ°idï¼Œä½†æ˜¯source-codeæ˜¾ç¤ºä¸å‡º"><a href="#11-è‡ªåŠ¨publishåˆ°äº†devnetä¸Šé¢ï¼Œä¸çŸ¥é“æ€ä¹ˆå›äº‹ï¼Œscanä¸Šé¢åœ¨devnetä¸Šèƒ½æœåˆ°idï¼Œä½†æ˜¯source-codeæ˜¾ç¤ºä¸å‡º" class="headerlink" title="11 è‡ªåŠ¨publishåˆ°äº†devnetä¸Šé¢ï¼Œä¸çŸ¥é“æ€ä¹ˆå›äº‹ï¼Œscanä¸Šé¢åœ¨devnetä¸Šèƒ½æœåˆ°idï¼Œä½†æ˜¯source codeæ˜¾ç¤ºä¸å‡º"></a>11 è‡ªåŠ¨publishåˆ°äº†devnetä¸Šé¢ï¼Œä¸çŸ¥é“æ€ä¹ˆå›äº‹ï¼Œscanä¸Šé¢åœ¨devnetä¸Šèƒ½æœåˆ°idï¼Œä½†æ˜¯source codeæ˜¾ç¤ºä¸å‡º</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#  æŸ¥çœ‹å½“å‰çš„ç¯å¢ƒ</span><br><span class="line">sui client envs</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ alias   â”‚ url                                 â”‚ active â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ testnet â”‚ https://fullnode.testnet.sui.io:443 â”‚        â”‚</span><br><span class="line">â”‚ devnet  â”‚ https://fullnode.devnet.sui.io:443  â”‚ *      â”‚</span><br><span class="line">â”‚ local   â”‚ http://127.0.0.1:9000               â”‚        â”‚</span><br><span class="line">â”‚ mainnet â”‚ https://fullnode.mainnet.sui.io:443 â”‚        â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line"># å¸¦æ˜Ÿå·çš„æ˜¯å½“å‰çš„ç¯å¢ƒ</span><br><span class="line">sui client active-env</span><br><span class="line"># åˆ‡æ¢ç¯å¢ƒåˆ°testnet</span><br><span class="line"> sui client switch --env  testnet</span><br><span class="line">Active environment switched to [testnet]</span><br></pre></td></tr></table></figure>



<h3 id="13-ability"><a href="#13-ability" class="headerlink" title="13  ability"></a>13  ability</h3><ul>
<li>é—®é¢˜: moveçš„åŸºç¡€è¯­æ³•ä¸ç†Ÿæ‚‰ï¼Œæ¯”å¦‚::æ˜¯ä»€ä¹ˆæ„æ€ï¼Œdropã€keyè¿™äº›éƒ½æ˜¯ä»€ä¹ˆå«ä¹‰ç­‰ç­‰ï¼Œæ„Ÿè§‰å¯ä»¥è¾¹helloworldè¾¹è®²è§£ä¸€ä¸‹è¯­æ³•ï¼Œæ¯ä¸ªè¯å¯¹åº”çš„æ„æ€ï¼Œä¸ºä»€ä¹ˆéœ€è¦è¿™äº›</li>
</ul>
<p>å‚çœ‹ move-book.com ,å¯ä»¥ä½¿ç”¨æµè§ˆå™¨ç¿»è¯‘æŸ¥çœ‹</p>
<h4 id="-1"><a href="#-1" class="headerlink" title></a></h4><p>å¯¹è±¡çš„4ä¸­èƒ½åŠ›(abliity)</p>
<p>è¿™å››ç§èƒ½åŠ›æ˜¯ï¼š</p>
<ul>
<li><p><code>copy</code></p>
<ul>
<li>å…è®¸å¤åˆ¶å…·æœ‰æ­¤åŠŸèƒ½çš„ç±»å‹çš„å€¼ã€‚</li>
</ul>
</li>
<li><p><code>drop</code></p>
<ul>
<li>å…è®¸è·³å‡ºä½œç”¨åŸŸè‡ªåŠ¨åˆ é™¤</li>
</ul>
</li>
<li><p><code>store</code></p>
<ul>
<li>å…è®¸å…·æœ‰æ­¤åŠŸèƒ½çš„ç±»å‹çš„å€¼å­˜åœ¨äº é“¾ä¸Šä¸­çš„å€¼ä¸­ã€‚  å­˜åœ¨sui ç½‘ç»œä¸Šçš„å¯¹è±¡çš„å­—æ®µ</li>
<li>å¯¹äº Suiï¼Œæ§åˆ¶å¯¹è±¡å†…éƒ¨å¯ä»¥å­˜å‚¨å“ªäº›<a target="_blank" rel="noopener" href="https://move-book.com/reference/abilities/object.html">æ•°æ®ã€‚</a> è¿˜æ§åˆ¶å“ªäº›ç±»å‹å¯ä»¥åœ¨å…¶å®šä¹‰æ¨¡å—ä¹‹å¤–ä¼ </li>
</ul>
</li>
<li><p><code>key</code></p>
<ul>
<li><p>å…è®¸ç±»å‹ç”¨ä½œå­˜å‚¨çš„ â€œkeyâ€ã€‚è¡¨é¢ä¸Šï¼Œè¿™æ„å‘³ç€è¯¥å€¼å¯ä»¥æ˜¯ å­˜å‚¨ä¸­çš„é¡¶çº§ä»·å€¼;æ¢å¥è¯è¯´ï¼Œå®ƒä¸éœ€è¦åŒ…å«åœ¨å¦ä¸€ä¸ªå€¼ä¸­ï¼Œä»¥ åœ¨ä»“åº“é‡Œã€‚</p>
</li>
<li><p>å¯¹äº Suiï¼Œç”¨äºè¡¨ç¤º<a target="_blank" rel="noopener" href="https://move-book.com/reference/abilities/object.html">å¯¹è±¡</a>ã€‚</p>
</li>
</ul>
</li>
</ul>
<p>13.1 å¯¹è±¡çš„å‡ ç§å­˜å‚¨çŠ¶æ€:</p>
<h5 id="13-1-1-é”€æ¯"><a href="#13-1-1-é”€æ¯" class="headerlink" title="13.1.1 é”€æ¯:"></a>13.1.1 é”€æ¯:</h5><ul>
<li><p>ç¦»å¼€ä½œç”¨åŸŸè‡ªåŠ¨é”€æ¯,å…·æœ‰dropèƒ½åŠ›</p>
<figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> struct <span class="title class_">IgnoreMe</span> has drop&#123;</span><br><span class="line">    <span class="attr">a</span>:u32,</span><br><span class="line">    <span class="attr">b</span>:u32</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">#[test]</span><br><span class="line">fun <span class="title function_">test_ignore</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> im = <span class="title class_">IgnoreMe</span>&#123;<span class="attr">a</span>:<span class="number">3</span>,<span class="attr">b</span>:<span class="number">4</span>&#125;;</span><br><span class="line">    <span class="title function_">print</span>(&amp;im);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šæ–‡å®šä¹‰çš„IgnoreMe å¯¹è±¡im å…·æœ‰è‡ªåŠ¨ææ„çš„èƒ½åŠ›<code>has drop</code>,åœ¨ç¦»å¼€å‡½æ•°çš„ä½œç”¨åŸŸæ—¶å€™è‡ªåŠ¨ææ„.</p>
</li>
<li><p>ç¼–ç ä¸»åŠ¨ææ„</p>
</li>
</ul>
 <figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> struct <span class="title class_">NoDrop</span>&#123; value :u64 &#125;</span><br><span class="line"></span><br><span class="line"> #[test]</span><br><span class="line"> fun <span class="title function_">test_nodrop</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">let</span> no_drop = <span class="title class_">NoDrop</span>&#123; value :<span class="number">34</span>&#125;;</span><br><span class="line">     <span class="title function_">print</span>(&amp;no_drop);</span><br><span class="line">     </span><br><span class="line">     <span class="keyword">let</span> <span class="title class_">NoDrop</span>&#123; <span class="attr">value</span>: _ &#125; = no_drop;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­ NoDropç±»å‹æ²¡æœ‰dropèƒ½åŠ›,å¯¹è±¡ç¦»å¼€ä½œç”¨åŸŸ,éœ€è¦ææ„,æˆ–è€…å°†å¯¹è±¡çš„æ‰€æœ‰æƒè½¬ç§».</p>
<ul>
<li>ç¬¬8è¡Œæ˜¯ææ„å¯¹è±¡çš„ä»£ç </li>
</ul>
<h5 id="13-1-2-è½¬ç§»"><a href="#13-1-2-è½¬ç§»" class="headerlink" title="13.1.2 è½¬ç§»:"></a>13.1.2 è½¬ç§»:</h5><h4 id="-2"><a href="#-2" class="headerlink" title></a></h4> <figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fun <span class="title function_">useNoDrop</span>(o : <span class="title class_">NoDrop</span> ) : <span class="title class_">NoDrop</span>&#123;</span><br><span class="line">    <span class="attr">std</span>::<span class="attr">debug</span>::<span class="title function_">print</span>(&amp;o);</span><br><span class="line">    o</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#[test]</span><br><span class="line">fun <span class="title function_">testUseNoDrop</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> o = <span class="title class_">NoDrop</span>&#123;value :<span class="number">4</span>&#125;;</span><br><span class="line">    <span class="keyword">let</span> d = <span class="title function_">useNoDrop</span>(o);</span><br><span class="line">    <span class="title class_">NoDrop</span>&#123;<span class="attr">value</span>:_&#125; = d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¬¬1è¡Œå‡½æ•°UseNoDropè·å¾—äº†å¯¹è±¡o</li>
<li>ç¬¬3è¡Œ,å‡½æ•°å°†Nå“¦Dropå¯¹è±¡o è¿”å›å‡ºå»,å°†æ‰€æœ‰æƒè½¬ç§»å‡ºå».</li>
<li>ç¬¬10 è¡Œ,æ˜¾ç¤ºä»£ç ææ„è¿™ä¸ªNoDropå¯¹è±¡</li>
</ul>
<h5 id="13-1-3-key-ç‹¬ç«‹å­˜å‚¨åœ¨é“¾ä¸Š"><a href="#13-1-3-key-ç‹¬ç«‹å­˜å‚¨åœ¨é“¾ä¸Š" class="headerlink" title="13.1.3  key:ç‹¬ç«‹å­˜å‚¨åœ¨é“¾ä¸Š:"></a>13.1.3  key:ç‹¬ç«‹å­˜å‚¨åœ¨é“¾ä¸Š:</h5><p>å¯¹è±¡ç‹¬ç«‹å­˜å‚¨åœ¨é“¾ä¸Š,å¿…é¡»å…·æœ‰keyèƒ½åŠ› <code>has key</code></p>
<p><img src="images/image-20241114085958845.png" alt="image-20241114085958845"></p>
<figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> struct <span class="title class_">Keyable</span> has key&#123;</span><br><span class="line">    id : <span class="variable constant_">UID</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#[test]</span><br><span class="line">fun <span class="title function_">test_key</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> mut ctx = tx_context ::<span class="title function_">dummy</span>();</span><br><span class="line">    <span class="keyword">let</span> k = <span class="title class_">Keyable</span>&#123; <span class="attr">id</span>: <span class="attr">object</span>::<span class="title function_">new</span>(&amp;mut ctx)&#125;;</span><br><span class="line">    <span class="attr">std</span>::<span class="attr">debug</span>::<span class="title function_">print</span>(&amp;k);</span><br><span class="line">    <span class="attr">transfer</span>::<span class="title function_">transfer</span>(k,ctx.<span class="title function_">sender</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­ä¸­Keyableæ˜¯å…·æœ‰keyèƒ½åŠ›çš„,å¯ä»¥é€šè¿‡transferä¼ é€’åˆ°suiç½‘ç»œä¸Šå­˜å‚¨, æŒ‡å®šowneråœ°å€.</p>
<h5 id="13-1-4-å¯¹è±¡ä½œä¸º-å…±äº«å¯¹è±¡å­˜å‚¨åœ¨é“¾ä¸Š-éœ€è¦å…·æœ‰keyèƒ½åŠ›"><a href="#13-1-4-å¯¹è±¡ä½œä¸º-å…±äº«å¯¹è±¡å­˜å‚¨åœ¨é“¾ä¸Š-éœ€è¦å…·æœ‰keyèƒ½åŠ›" class="headerlink" title="13.1.4  å¯¹è±¡ä½œä¸º å…±äº«å¯¹è±¡å­˜å‚¨åœ¨é“¾ä¸Š,éœ€è¦å…·æœ‰keyèƒ½åŠ›"></a>13.1.4  å¯¹è±¡ä½œä¸º å…±äº«å¯¹è±¡å­˜å‚¨åœ¨é“¾ä¸Š,éœ€è¦å…·æœ‰keyèƒ½åŠ›</h5><p><img src="images/image-20241114091033160.png" alt="image-20241114091033160"></p>
<h5 id="13-1-4-å¯¹è±¡ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†å­˜å‚¨-éœ€è¦å…·æœ‰storeèƒ½åŠ›"><a href="#13-1-4-å¯¹è±¡ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†å­˜å‚¨-éœ€è¦å…·æœ‰storeèƒ½åŠ›" class="headerlink" title="13.1.4 å¯¹è±¡ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†å­˜å‚¨,éœ€è¦å…·æœ‰storeèƒ½åŠ›"></a>13.1.4 å¯¹è±¡ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†å­˜å‚¨,éœ€è¦å…·æœ‰storeèƒ½åŠ›</h5><figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">use <span class="attr">std</span>::<span class="attr">string</span>::<span class="title class_">String</span>;</span><br><span class="line"><span class="keyword">public</span> struct <span class="title class_">Grandson</span> has store&#123;</span><br><span class="line">    name : <span class="title class_">String</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> struct <span class="title class_">Child</span> has store&#123;</span><br><span class="line">    name : <span class="title class_">String</span>,</span><br><span class="line">    child : <span class="title class_">Grandson</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> struct <span class="title class_">Parent</span> has key&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="variable constant_">UID</span>,</span><br><span class="line">    <span class="attr">child</span>: <span class="title class_">Child</span>,</span><br><span class="line">&#125;</span><br><span class="line">#[test]</span><br><span class="line">fun  <span class="title function_">test_store_child</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> mut ctx = <span class="attr">tx_context</span>::<span class="title function_">dummy</span>();</span><br><span class="line">    <span class="keyword">let</span> foo = <span class="title class_">Parent</span> &#123;</span><br><span class="line">        id : <span class="attr">object</span>::<span class="title function_">new</span>(&amp;mut ctx),</span><br><span class="line">        <span class="attr">child</span>: <span class="title class_">Child</span> &#123;</span><br><span class="line">            name : b<span class="string">&quot;one child&quot;</span>.<span class="title function_">to_string</span>(),</span><br><span class="line">            <span class="attr">child</span>: <span class="title class_">Grandson</span>&#123;</span><br><span class="line">                name : b<span class="string">&quot;a grandson&quot;</span>.<span class="title function_">to_string</span>(),</span><br><span class="line"></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="attr">std</span>::<span class="attr">debug</span>::<span class="title function_">print</span>(&amp;foo);</span><br><span class="line">    <span class="attr">transfer</span>::<span class="title function_">freeze_object</span>(foo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Parentæ˜¯ç‹¬ç«‹å­˜å‚¨,å…·æœ‰keyèƒ½åŠ›</p>
</li>
<li><p>Child éƒ½æ˜¯ä½œä¸ºç‹¬ç«‹å­˜å‚¨å¯¹è±¡Parentçš„å­—æ®µ</p>
</li>
<li><p>Grandson ä½œä¸ºChildçš„å­—æ®µå­˜å‚¨åœ¨é“¾ä¸Š,</p>
</li>
<li><p>Child å’ŒGrandson éƒ½å…·æœ‰storeèƒ½åŠ›</p>
</li>
</ul>
<p><img src="images/image-20241114095326972.png" alt="image-20241114095326972"></p>
<p>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/ifadai/article/details/136046263">https://blog.csdn.net/ifadai/article/details/136046263</a><br><a target="_blank" rel="noopener" href="https://move-book.com/reference/abilities.html">ç±»å‹æŠ€èƒ½ - Move å‚è€ƒ</a></p>
<h4 id="13-2-å››ç§èƒ½åŠ›"><a href="#13-2-å››ç§èƒ½åŠ›" class="headerlink" title="13.2 å››ç§èƒ½åŠ›"></a>13.2 <a target="_blank" rel="noopener" href="https://move-book.com/reference/abilities.html#the-four-abilities">å››ç§èƒ½åŠ›</a></h4><p>è¿™å››ç§èƒ½åŠ›æ˜¯ï¼š</p>
<ul>
<li><p><code>copy</code></p>
<ul>
<li>å…è®¸å¤åˆ¶å…·æœ‰æ­¤åŠŸèƒ½çš„ç±»å‹çš„å€¼ã€‚</li>
</ul>
</li>
<li><p><code>drop</code></p>
<ul>
<li>å…è®¸è·³å‡ºä½œç”¨åŸŸè‡ªåŠ¨åˆ é™¤</li>
</ul>
</li>
<li><p><code>store</code></p>
<ul>
<li>å…è®¸å…·æœ‰æ­¤åŠŸèƒ½çš„ç±»å‹çš„å€¼å­˜åœ¨äº é“¾ä¸Šä¸­çš„å€¼ä¸­ã€‚  å­˜åœ¨sui ç½‘ç»œä¸Šçš„å¯¹è±¡çš„å­—æ®µ</li>
<li>å¯¹äº Suiï¼Œæ§åˆ¶å¯¹è±¡å†…éƒ¨å¯ä»¥å­˜å‚¨å“ªäº›<a target="_blank" rel="noopener" href="https://move-book.com/reference/abilities/object.html">æ•°æ®ã€‚</a> è¿˜æ§åˆ¶å“ªäº›ç±»å‹å¯ä»¥åœ¨å…¶å®šä¹‰æ¨¡å—ä¹‹å¤–ä¼ </li>
</ul>
</li>
<li><p><code>key</code></p>
<ul>
<li><p>å…è®¸ç±»å‹ç”¨ä½œå­˜å‚¨çš„ â€œkeyâ€ã€‚è¡¨é¢ä¸Šï¼Œè¿™æ„å‘³ç€è¯¥å€¼å¯ä»¥æ˜¯ å­˜å‚¨ä¸­çš„é¡¶çº§ä»·å€¼;æ¢å¥è¯è¯´ï¼Œå®ƒä¸éœ€è¦åŒ…å«åœ¨å¦ä¸€ä¸ªå€¼ä¸­ï¼Œä»¥ åœ¨ä»“åº“é‡Œã€‚</p>
</li>
<li><p>å¯¹äº Suiï¼Œç”¨äºè¡¨ç¤º<a target="_blank" rel="noopener" href="https://move-book.com/reference/abilities/object.html">å¯¹è±¡</a>ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 id="13-2-1-å¦‚æœæœ‰copyèƒ½åŠ›-èµ‹å€¼å°±æ˜¯æ‹·è´æˆä¸€ä¸ªæ–°å¯¹è±¡"><a href="#13-2-1-å¦‚æœæœ‰copyèƒ½åŠ›-èµ‹å€¼å°±æ˜¯æ‹·è´æˆä¸€ä¸ªæ–°å¯¹è±¡" class="headerlink" title="13.2.1 å¦‚æœæœ‰copyèƒ½åŠ›,èµ‹å€¼å°±æ˜¯æ‹·è´æˆä¸€ä¸ªæ–°å¯¹è±¡"></a>13.2.1 å¦‚æœæœ‰copyèƒ½åŠ›,èµ‹å€¼å°±æ˜¯æ‹·è´æˆä¸€ä¸ªæ–°å¯¹è±¡</h4><p><img src="images/image-20241111194804064.png" alt="image-20241111194804064"></p>
<ul>
<li><p>ä¸Šå›¾ä¸­27è¡Œ,cå¯¹è±¡è¢«æ‹·è´åˆ°d,cå’ŒdæŒ‡å‘çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡, </p>
</li>
<li><p>28 è¡Œä¿®æ”¹äº†d,ä½†æ˜¯cæ²¡æœ‰è¢«ä¿®æ”¹</p>
</li>
<li><p>32è¡Œå’Œ33è¡Œä¸­,cå’Œdå–å€¼ä¸åŒ.</p>
</li>
</ul>
<h4 id="13-2-å¦‚æœæ²¡æœ‰copy-èƒ½åŠ›-èµ‹å€¼å°±æ˜¯ç§»åŠ¨å¯¹è±¡"><a href="#13-2-å¦‚æœæ²¡æœ‰copy-èƒ½åŠ›-èµ‹å€¼å°±æ˜¯ç§»åŠ¨å¯¹è±¡" class="headerlink" title="13.2 å¦‚æœæ²¡æœ‰copy èƒ½åŠ›,èµ‹å€¼å°±æ˜¯ç§»åŠ¨å¯¹è±¡"></a>13.2 å¦‚æœæ²¡æœ‰copy èƒ½åŠ›,èµ‹å€¼å°±æ˜¯ç§»åŠ¨å¯¹è±¡</h4><p><img src="images/image-20241111194357890.png" alt="image-20241111194357890"></p>
<h4 id="13-3-å¦‚æœæ²¡æœ‰ability-å°±å¿…é¡»åœ¨moduleå†…æä¾›æ–¹æ³•å»ææ„å®ƒ"><a href="#13-3-å¦‚æœæ²¡æœ‰ability-å°±å¿…é¡»åœ¨moduleå†…æä¾›æ–¹æ³•å»ææ„å®ƒ" class="headerlink" title="13.3 å¦‚æœæ²¡æœ‰ability,å°±å¿…é¡»åœ¨moduleå†…æä¾›æ–¹æ³•å»ææ„å®ƒ"></a>13.3 å¦‚æœæ²¡æœ‰ability,å°±å¿…é¡»åœ¨moduleå†…æä¾›æ–¹æ³•å»ææ„å®ƒ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>



<p><img src="images/image-20241114080921239.png" alt="image-20241114080921239"></p>
<p><img src="images/image-20241111213310276.png" alt="image-20241111213310276"></p>
<ul>
<li>å®šä¹‰é—ªç”µè´·çš„å‡ºå€Ÿæ–¹,åœ¨borrowçš„æ—¶å€™è·å¾—Coinå’Œ Loanå¯¹è±¡,  </li>
<li>åœ¨repayçš„æ—¶å€™æ‰èƒ½é”€æ¯Loanå¯¹è±¡, å¦‚æœå€Ÿå‡ºæ”¾ä¸è°ƒç”¨repay,æ— æ³•é”€æ¯Loanå¯¹è±¡,äº¤æ˜“ä¼šå›æ»š.</li>
<li>replayçš„æ—¶å€™éœ€è¦æ ¡éªŒä¼ å…¥çš„coin è¦å¤šäºborrowçš„coin, å¤šå‡ºæ¥çš„éƒ¨åˆ†ä½œä¸ºå›æŠ¥.<ul>
<li>ä¸‹é¢æ˜¯ è´·æ–¹ä»£ç çš„ä¾‹å­</li>
</ul>
</li>
</ul>
<figure class="highlight c++"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> book::loan;</span><br><span class="line"><span class="comment">//hot potato pattern</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> <span class="title class_">Loan</span>&#123;</span><br><span class="line">    feedback: u64, <span class="comment">//è¿˜é’±æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> <span class="title class_">Coin</span> has key,store&#123;</span><br><span class="line">	id:UID,</span><br><span class="line">	amount:u64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å€Ÿå‡ºé’±</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> fun <span class="title">borrow</span><span class="params">(amount:u64,ctx:&amp;mut TxContext)</span> :(Coin,Loan)&#123;</span></span><br><span class="line">	let feedback = amount * <span class="number">103</span> /<span class="number">100</span>;</span><br><span class="line">	let c = Coin&#123; id: object::<span class="built_in">new</span>(ctx),amount&#125;;</span><br><span class="line">	(c, Loan&#123;feedback&#125;) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> ErrNotEnoughFeedback:u64 = <span class="number">43</span>;</span><br><span class="line"><span class="type">const</span> OWNER_ADDR :address = @<span class="number">0xafe36044ef56d22494bfe6231e78dd128f097693f2d974761ee4d649e61f5fa2</span>;<span class="comment">//todo</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> fun <span class="title">repay</span><span class="params">(coin: Coin,loan:Loan)</span></span>&#123;</span><br><span class="line">	assert!(coin.amount &gt;= loan.feedback,ErrNotEnoughFeedback);</span><br><span class="line">	transfer::<span class="built_in">public_transfer</span>(coin,OWNER_ADDR);</span><br><span class="line">	Loan&#123; feedback:_&#125; = loan;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">``` &#123;.line-numbers&#125;</span><br><span class="line"></span><br><span class="line">ä¸‹é¢æ˜¯å€Ÿæ–¹æ¨¡å—çš„ä»£ç ,ä½¿ç”¨æµ‹è¯•ä»£ç æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">```c++</span><br><span class="line">#[test_only]</span><br><span class="line"><span class="keyword">module</span> book::test_loan;</span><br><span class="line">use book::loan::Coin;</span><br><span class="line"></span><br><span class="line"><span class="comment">////todo è´·æ¬¾åèµšé’±çš„ä¸šåŠ¡é€»è¾‘,è¿™é‡Œæ²¡æœ‰å®ç°</span></span><br><span class="line"><span class="function">fun <span class="title">earn_money</span><span class="params">(coin : Coin )</span> :Coin&#123;</span></span><br><span class="line">    coin</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#[test]</span><br><span class="line">#[<span class="built_in">expected_failure</span>(abort_code=book::loan::ErrNotEnoughFeedback)]</span><br><span class="line"><span class="function">fun <span class="title">borrow_test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	let mut ctx = tx_context::<span class="built_in">dummy</span>();</span><br><span class="line">	<span class="built_in">let</span> (coin,loan) = book::loan::<span class="built_in">borrow</span>(<span class="number">233</span>,&amp;mut ctx);</span><br><span class="line">	let new_money = <span class="built_in">earn_money</span>(coin);</span><br><span class="line">	book::loan::<span class="built_in">repay</span>(new_money,loan);</span><br><span class="line">	<span class="comment">//todo èµšé’±äº†ï¼Œå¯ä»¥æŠŠfeedback-amount çš„é’±ï¼Œå­˜å…¥è‡ªå·±é’±åŒ…</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="13-5-key-ability"><a href="#13-5-key-ability" class="headerlink" title="13.5 key ability"></a>13.5 key ability</h4><p>ç›®å‰å…¶ä»–æ¨¡å—å­˜åˆ°é“¾ä¸Šçš„å¯¹è±¡,éƒ½éœ€è¦key+storeèƒ½åŠ›</p>
<p>transfer::public_transfer</p>
<p>transfer::public_freeze_object </p>
<p>transfer::public_share_object</p>
<p><img src="images/image-20241111213712296.png" alt="image-20241111213712296"></p>
<h4 id="store"><a href="#store" class="headerlink" title="store"></a>store</h4><p>å¯ä»¥ä½œä¸ºå­˜åœ¨é“¾ä¸Šå¯¹è±¡çš„ä¸€ä¸ªå­—æ®µ.</p>
<p><img src="images/image-20241111213346673.png" alt="image-20241111213346673"></p>
<h3 id="11-åˆ‡å‰²coin"><a href="#11-åˆ‡å‰²coin" class="headerlink" title="11 åˆ‡å‰²coin"></a>11 åˆ‡å‰²coin</h3><p>ä¸‹ä¾‹ ä»å½“å‰çš„ä½™é¢ä¸­åˆ†å‰²å‡ºæ¥ 0.05 ä¸ªsui , ç„¶åä¼ ç»™å½“å‰åœ°å€</p>
<figure class="highlight bash"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> C_ADDR=`sui client  active-address`</span><br><span class="line"></span><br><span class="line">sui client ptb \</span><br><span class="line">--split-coins gas [1000] \</span><br><span class="line">--assign coin \</span><br><span class="line">--transfer-objects [coin] @<span class="variable">$C_ADDR</span> \</span><br><span class="line">--gas-budget 50000000</span><br></pre></td></tr></table></figure>







<h2 id="ç›¸å…³é—®é¢˜"><a href="#ç›¸å…³é—®é¢˜" class="headerlink" title="ç›¸å…³é—®é¢˜"></a>ç›¸å…³é—®é¢˜</h2><table>
<thead>
<tr>
<th>2024å¹´11æœˆ10æ—¥ 11:49</th>
<th>adadadadadadad</th>
<th>å¾å¦»å¤©ä¾ç¾å¦‚ç”»</th>
</tr>
</thead>
<tbody><tr>
<td>2024å¹´11æœˆ10æ—¥ 11:52</td>
<td>å®Œå…¨æŒ‰ç…§è§†é¢‘ä¸­æ“ä½œï¼Œå´ä¸è§†é¢‘ä¸­å¾—åˆ°çš„ç»“æœä¸ä¸€æ ·ï¼Œå¯èƒ½æ˜¯ç‰ˆæœ¬å’Œç³»ç»Ÿä¸ä¸€æ ·å§ï¼Œä½†è‡ªå·±åˆä¸ä¼šè°ƒè¯•</td>
<td>æ¸</td>
</tr>
<tr>
<td>2024å¹´11æœˆ10æ—¥ 11:57</td>
<td>å°ç™½æé—®é¢„ç¼–è¯‘çš„ä¸‹è½½åŒ…å¦‚ä½•ä½¿ç”¨</td>
<td>krypton</td>
</tr>
<tr>
<td>2024å¹´11æœˆ10æ—¥ 12:00</td>
<td>è§è¯è€…å¯¹è±¡æœ‰ä»€ä¹ˆä½œç”¨ï¼Œæˆ‘åœ¨å¥½å‡ ä¸ªåœ°æ–¹çœ‹åˆ°ï¼ŒåªçŸ¥é“æ€ä¹ˆç”¨ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™</td>
<td>æŸ æ €gardenia</td>
</tr>
<tr>
<td>2024å¹´11æœˆ10æ—¥ 14:02</td>
<td>move ä¸­ Table æ˜¯é€šè¿‡ dynamic field å®ç°çš„ï¼Œåœ¨æµè§ˆå™¨ä¸­ä¼¼ä¹æ²¡æœ‰åŠæ³•æŸ¥åˆ° table ä¸­æ‰€æœ‰çš„æ•°æ®ï¼Œtable å¯¹åº”çš„é‚£ä¸ª object id åœ¨suiæµè§ˆå™¨ä¸­ä¹Ÿæ— æ³•è®¿é—®ã€‚åªæ˜¯æµè§ˆå™¨ä¸æ”¯æŒï¼Œè¿˜æ˜¯è¯´ä¸èƒ½å®ç°åœ¨é“¾ä¸‹æŸ¥åˆ° table é‡Œæ‰€æœ‰çš„æ•°æ®ã€‚</td>
<td>Allen</td>
</tr>
<tr>
<td>2024å¹´11æœˆ10æ—¥ 16:17</td>
<td>é’±åŒ…åœ°å€ä¸ sui å®¢æˆ·ç«¯åœ°å€çš„å…³ç³»</td>
<td>ç½—åŸº</td>
</tr>
<tr>
<td>2024å¹´11æœˆ10æ—¥ 21:05</td>
<td>git pull pullä¸ä¸‹æ¥ï¼ŒæŠ¥é”™è¿‡æ—©æ–‡ä»¶ç»“æŸ</td>
<td>å•Šå§å•Šå§</td>
</tr>
<tr>
<td>2024å¹´11æœˆ11æ—¥ 12:41</td>
<td>è‡ªåŠ¨publishåˆ°äº†devnetä¸Šé¢ï¼Œä¸çŸ¥é“æ€ä¹ˆå›äº‹ï¼Œscanä¸Šé¢åœ¨devnetä¸Šèƒ½æœåˆ°idï¼Œä½†æ˜¯source codeæ˜¾ç¤ºä¸å‡º</td>
<td>æ´—å¤´å°±æ˜¯çˆ½</td>
</tr>
<tr>
<td>2024å¹´11æœˆ11æ—¥ 14:15</td>
<td>moveçš„åŸºç¡€è¯­æ³•ä¸ç†Ÿæ‚‰ï¼Œæ¯”å¦‚::æ˜¯ä»€ä¹ˆæ„æ€ï¼Œdropã€keyè¿™äº›éƒ½æ˜¯ä»€ä¹ˆå«ä¹‰ç­‰ç­‰ï¼Œæ„Ÿè§‰å¯ä»¥è¾¹helloworldè¾¹è®²è§£ä¸€ä¸‹è¯­æ³•ï¼Œæ¯ä¸ªè¯å¯¹åº”çš„æ„æ€ï¼Œä¸ºä»€ä¹ˆéœ€è¦è¿™äº›</td>
<td>å‘¨é›¨é˜³</td>
</tr>
</tbody></table>
<h1 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•:"></a>é™„å½•:</h1><p>æœ€è¿‘åœ¨å‚åŠ HOH å…±å­¦æ´»åŠ¨,</p>
<p>ğŸ’§ <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/d0brr-ao6cZ5t8Z5OO1Mog">HOHæ°´åˆ†å­å…¬ä¼—å·</a></p>
<p>ğŸŒŠ <a target="_blank" rel="noopener" href="https://x.com/0xHOH">HOHæ°´åˆ†å­Xè´¦å·</a></p>
<p>ğŸ“¹ <a target="_blank" rel="noopener" href="https://space.bilibili.com/3493269495352098">è¯¾ç¨‹Bç«™è´¦å·</a></p>
<p>ğŸ’» Githubä»“åº“ <a target="_blank" rel="noopener" href="https://github.com/move-cn/letsmove">https://github.com/move-cn/letsmove</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.walrus.mov/2024/11/11/sui/sui-colearn-qa1/" data-id="cm3n9q6w500004eo37lb4ceaf" data-title="2024 -11-11  ç¬¬ä¸€å‘¨Sui Moveè®­ç»ƒè¥è¯¾ç¨‹ç­”ç–‘é—®é¢˜" class="article-share-link"><span class="fa fa-share">Compartir</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/move/" rel="tag">move</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/sui/" rel="tag">sui</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-sui/sui-cap-transfer" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="2024/11/11/sui/sui-cap-transfer/" class="article-date">
  <time class="dt-published" datetime="2024-11-11T13:47:08.000Z" itemprop="datePublished">2024-11-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="categories/sui/">sui</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="2024/11/11/sui/sui-cap-transfer/">2024 -11-20  sui å­˜é’±ç½çš„æƒé™æ§åˆ¶å’Œpacakgeå‡çº§å¸¦æ¥çš„é£é™©</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1.æ¦‚è¿°"></a>1.æ¦‚è¿°</h2><ul>
<li>å‡è®¾å†™ä¸€ä¸ªå­˜é’±ç½åˆçº¦ï¼Œå¯ä»¥ä»åˆçº¦ä¸­å­˜å…¥è´§å¸ï¼Œæå–è´§å¸ï¼Œ<ul>
<li>å­˜é’±ä¸æ§åˆ¶æƒé™ï¼Œæ¯ä¸ªäººéƒ½èƒ½å­˜</li>
<li>åªæœ‰æ‹¥æœ‰AdminCapå¯¹è±¡çš„äººæ‰èƒ½å–é’±ã€‚<ul>
<li>å–é’±å‡½æ•°æœ‰ä¸€ä¸ªAdminCapå‚æ•°ï¼Œsui åˆ¤æ–­è°æ‹¥æœ‰Admincap å¯¹è±¡æ‰èƒ½è°ƒç”¨ withdraw</li>
</ul>
</li>
<li>åˆçº¦æ„é€ è€…Aå¯ä»¥å°†AdminCapå¯¹è±¡ è½¬è®©ç»™B<ul>
<li>è¡¨é¢ä¸Šåªæœ‰B èƒ½è·å¾—æƒé™å–é’±</li>
</ul>
</li>
</ul>
</li>
<li>é£é™©<ul>
<li>åˆçº¦æ„é€ è€…è¿˜æ‹¥æœ‰å‡çº§åˆçº¦çš„æƒé™ï¼Œå¯èƒ½é€šè¿‡å‡çº§åˆçº¦æ¥è·å–æ–°çš„å–é’±æƒé™</li>
</ul>
</li>
</ul>
<h2 id="2-åˆçº¦ä»£ç "><a href="#2-åˆçº¦ä»£ç " class="headerlink" title="2. åˆçº¦ä»£ç "></a>2. åˆçº¦ä»£ç </h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">module upgrade_demo::upgrade_demo ;</span><br><span class="line">    <span class="keyword">use</span> sui::object::&#123;<span class="keyword">Self</span>, UID&#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::transfer;</span><br><span class="line">    <span class="keyword">use</span> sui::balance::&#123;<span class="keyword">Self</span>, Balance&#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::coin::&#123;<span class="keyword">Self</span>, Coin&#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::sui::SUI;</span><br><span class="line">    <span class="keyword">use</span> sui::tx_context::&#123;<span class="keyword">Self</span>, TxContext&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// é”™è¯¯ç </span></span><br><span class="line">    <span class="keyword">const</span> ENotAdmin: <span class="type">u64</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> EInsufficientBalance: <span class="type">u64</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç®¡ç†å‘˜æƒé™å‡­è¯</span></span><br><span class="line">    public <span class="keyword">struct</span> <span class="title class_">AdminCap</span> has key, store &#123;</span><br><span class="line">        id: UID</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡‘åº“ç»“æ„</span></span><br><span class="line">    public <span class="keyword">struct</span> <span class="title class_">Treasury</span> has key &#123;</span><br><span class="line">        id: UID,</span><br><span class="line">        balance: Balance&lt;SUI&gt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–å‡½æ•° - åˆ›å»ºç®¡ç†å‘˜å‡­è¯å’Œé‡‘åº“</span></span><br><span class="line">    fun <span class="title function_ invoke__">init</span>(ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">admin_cap</span> = AdminCap &#123;</span><br><span class="line">            id: object::<span class="title function_ invoke__">new</span>(ctx)</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> <span class="variable">treasury</span> = Treasury &#123;</span><br><span class="line">            id: object::<span class="title function_ invoke__">new</span>(ctx),</span><br><span class="line">            balance: balance::<span class="title function_ invoke__">zero</span>(),</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†AdminCapè½¬ç§»ç»™éƒ¨ç½²åˆçº¦çš„åœ°å€</span></span><br><span class="line">        transfer::<span class="title function_ invoke__">transfer</span>(admin_cap, tx_context::<span class="title function_ invoke__">sender</span>(ctx));</span><br><span class="line">        <span class="comment">// å…±äº«é‡‘åº“å¯¹è±¡</span></span><br><span class="line">        transfer::<span class="title function_ invoke__">share_object</span>(treasury);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­˜å…¥SUIä»£å¸</span></span><br><span class="line">    public fun <span class="title function_ invoke__">deposit</span>(treasury: &amp;<span class="keyword">mut</span> Treasury, payment: Coin&lt;SUI&gt;) &#123;</span><br><span class="line">        sui::balance::<span class="title function_ invoke__">join</span>(&amp;<span class="keyword">mut</span> treasury.balance, payment.<span class="title function_ invoke__">into_balance</span>());</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// ç®¡ç†å‘˜æå–SUIä»£å¸</span></span><br><span class="line">    public fun <span class="title function_ invoke__">withdraw</span>(</span><br><span class="line">        treasury: &amp;<span class="keyword">mut</span> Treasury, </span><br><span class="line">        amount: <span class="type">u64</span>,</span><br><span class="line">        _admin_cap: &amp;AdminCap,</span><br><span class="line">        ctx: &amp;<span class="keyword">mut</span> TxContext</span><br><span class="line">    ): Coin&lt;SUI&gt; &#123;</span><br><span class="line">        <span class="comment">// æ£€æŸ¥ä½™é¢æ˜¯å¦å……è¶³</span></span><br><span class="line">        <span class="built_in">assert!</span>(balance::<span class="title function_ invoke__">value</span>(&amp;treasury.balance) &gt;= amount, EInsufficientBalance);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä»é‡‘åº“ä¸­æå–ä»£å¸</span></span><br><span class="line">        coin::<span class="title function_ invoke__">from_balance</span>(balance::<span class="title function_ invoke__">split</span>(&amp;<span class="keyword">mut</span> treasury.balance, amount), ctx)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢é‡‘åº“ä½™é¢</span></span><br><span class="line">    public fun <span class="title function_ invoke__">balanceOf</span>(treasury: &amp;Treasury): <span class="type">u64</span> &#123;</span><br><span class="line">        balance::<span class="title function_ invoke__">value</span>(&amp;treasury.balance)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-å‘å¸ƒåˆçº¦"><a href="#3-å‘å¸ƒåˆçº¦" class="headerlink" title="3. å‘å¸ƒåˆçº¦"></a>3. å‘å¸ƒåˆçº¦</h2><ul>
<li>è·å¾—å¯¹è±¡</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sui move   --skip-fetch-latest-git-deps  publish</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ Object Changes                                                                                             â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ Created Objects:                                                                                           â”‚</span><br><span class="line">â”‚  â”Œâ”€â”€                                                                                                       â”‚</span><br><span class="line">â”‚  â”‚ ObjectID: 0x10ca605ce0437c10274bcc260901ef5b34bab91c747f2dc498b722ae151a5baf                            â”‚</span><br><span class="line">â”‚  â”‚ Sender: 0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c                              â”‚</span><br><span class="line">â”‚  â”‚ Owner: Account Address ( 0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c )           â”‚</span><br><span class="line">â”‚  â”‚ ObjectType: 0x38417a57a4f061487895b2c97b3e188e847c25de37762c5e0146bd6a32cd5a89::upgrade_demo::AdminCap  â”‚</span><br><span class="line">â”‚  â”‚ Version: 245323791                                                                                      â”‚</span><br><span class="line">â”‚  â”‚ Digest: BLp2DjwNMD1fZ4Y4HxNMRz1AQq28afgMQ57pNFt4BZoa                                                    â”‚</span><br><span class="line">â”‚  â””â”€â”€  </span><br><span class="line"></span><br><span class="line">â”‚  â”Œâ”€â”€                                                                                                       â”‚</span><br><span class="line">â”‚  â”‚ ObjectID: 0x67a5815e053ab8be8248c894ec288baf79bc6f323321812074cac70e63915bb0                            â”‚</span><br><span class="line">â”‚  â”‚ Sender: 0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c                              â”‚</span><br><span class="line">â”‚  â”‚ Owner: Account Address ( 0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c )           â”‚</span><br><span class="line">â”‚  â”‚ ObjectType: 0x2::package::UpgradeCap                                                                    â”‚</span><br><span class="line">â”‚  â”‚ Version: 245323791                                                                                      â”‚</span><br><span class="line">â”‚  â”‚ Di</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> â”Œâ”€â”€                                                                                                       â”‚</span><br><span class="line">â”‚  â”‚ ObjectID: 0x830243c107ff3ad19e4506d9a61d04af4a0c35771445e468c3a7befbc6d9293c                            â”‚</span><br><span class="line">â”‚  â”‚ Sender: 0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c                              â”‚</span><br><span class="line">â”‚  â”‚ Owner: Shared( 245323791 )                                                                              â”‚</span><br><span class="line">â”‚  â”‚ ObjectType: 0x38417a57a4f061487895b2c97b3e188e847c25de37762c5e0146bd6a32cd5a89::upgrade_demo::Treasury  â”‚</span><br><span class="line">â”‚  â”‚ Version: 245323791                                                                                      â”‚</span><br><span class="line">â”‚  â”‚ Digest: Enq9zenKrY4r3fXYEWr9XJCcA8FixSTZhKbVqXqDueNM </span><br></pre></td></tr></table></figure>
<ul>
<li>å¯¹è±¡è¯´æ˜</li>
</ul>
<table>
<thead>
<tr>
<th>å¯¹è±¡å</th>
<th>å–å€¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>package address</td>
<td>0x38417a57a4f061487895b2c97b3e188e847c25de37762c5e0146bd6a32cd5a89</td>
<td>åˆçº¦åŒ…çš„åœ°å€</td>
</tr>
<tr>
<td>upgradeCap</td>
<td>0x67a5815e053ab8be8248c894ec288baf79bc6f323321812074cac70e63915bb0</td>
<td>æ§åˆ¶å‡çº§çš„æƒé™</td>
</tr>
<tr>
<td>adminCap</td>
<td>0x10ca605ce0437c10274bcc260901ef5b34bab91c747f2dc498b722ae151a5baf</td>
<td>æ§åˆ¶æå–Treasuryä½™é¢</td>
</tr>
<tr>
<td>owner</td>
<td>0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c</td>
<td>ç›®å‰åˆçº¦å‘å¸ƒè€…æ‹¥æœ‰adminCap,upgradeCap</td>
</tr>
<tr>
<td>treasury</td>
<td>0x830243c107ff3ad19e4506d9a61d04af4a0c35771445e468c3a7befbc6d9293c</td>
<td>å­˜é’±ç½</td>
</tr>
</tbody></table>
<ul>
<li><p>æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„coin</p>
<figure class="highlight bash"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sui client gas</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ gasCoinId                                                          â”‚ mistBalance (MIST) â”‚ suiBalance (SUI) â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ 0x09119914c43f80a486b30cc5d4f1382d0b57929eabd70f116ae4e918d9c89bf0 â”‚ 470927364          â”‚ 0.47             â”‚</span><br><span class="line">â”‚ 0xae3da3cb598610db16ea040ad6b09cfd324e146a2a7e5b18ccfa76b34b8d3b22 â”‚ 497664604          â”‚ 0.49             â”‚</span><br><span class="line">â”‚ 0xeda78a0ba9b2ef153a209f51380d8e77af0f35c60eb8ea26d4239c639844680d â”‚ 995399888          â”‚ 0.99             â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="4-Aç”¨æˆ·å­˜é’±"><a href="#4-Aç”¨æˆ·å­˜é’±" class="headerlink" title="4. Aç”¨æˆ·å­˜é’±"></a>4. Aç”¨æˆ·å­˜é’±</h2><ul>
<li>é…ç½®ä¸€äº›å˜é‡ï¼Œæ–¹ä¾¿åé¢çš„è„šæœ¬ä½¿ç”¨</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PKG=0x38417a57a4f061487895b2c97b3e188e847c25de37762c5e0146bd6a32cd5a89</span><br><span class="line"><span class="built_in">export</span> ADMIN_CAP=0x10ca605ce0437c10274bcc260901ef5b34bab91c747f2dc498b722ae151a5baf</span><br><span class="line"><span class="built_in">export</span> UPGRADE_CAP=0x67a5815e053ab8be8248c894ec288baf79bc6f323321812074cac70e63915bb0</span><br><span class="line"><span class="built_in">export</span> TREASURY=0x830243c107ff3ad19e4506d9a61d04af4a0c35771445e468c3a7befbc6d9293c     </span><br><span class="line"><span class="built_in">export</span> ADDR_A=0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c</span><br><span class="line"><span class="built_in">export</span> ADDR_B=0x7cbe5e6596e23266dd5763dd89b4ab1195516908ecde8febfe96685c7cbe6432</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç”¨æˆ·æœ‰å“ªäº›coin</span></span><br><span class="line">sui client switch --address <span class="variable">$ADDR_A</span></span><br><span class="line">sui client gas</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ gasCoinId                                                          â”‚ mistBalance (MIST) â”‚ suiBalance (SUI) â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ 0x09119914c43f80a486b30cc5d4f1382d0b57929eabd70f116ae4e918d9c89bf0 â”‚ 470927364          â”‚ 0.47             â”‚</span><br><span class="line">â”‚ 0xae3da3cb598610db16ea040ad6b09cfd324e146a2a7e5b18ccfa76b34b8d3b22 â”‚ 497664604          â”‚ 0.49             â”‚</span><br><span class="line">â”‚ 0xeda78a0ba9b2ef153a209f51380d8e77af0f35c60eb8ea26d4239c639844680d â”‚ 995399888          â”‚ 0.99             â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ®å‰é¢çš„è¾“å‡ºï¼Œè®¾ç½®éœ€è¦å­˜å…¥çš„coin</span></span><br><span class="line"><span class="built_in">export</span> COIN_A=0xae3da3cb598610db16ea040ad6b09cfd324e146a2a7e5b18ccfa76b34b8d3b22</span><br><span class="line"><span class="comment"># å­˜å…¥è´§å¸</span></span><br><span class="line">sui client ptb --move-call <span class="variable">$PKG</span>::upgrade_demo::deposit   <span class="string">&quot;@<span class="variable">$TREASURY</span>,@<span class="variable">$COIN_A</span>&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="5-A-ç”¨æˆ·å–é’±"><a href="#5-A-ç”¨æˆ·å–é’±" class="headerlink" title="5. A ç”¨æˆ·å–é’±"></a>5. A ç”¨æˆ·å–é’±</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sui client ptb --move-call <span class="variable">$PKG</span>::upgrade_demo::deposit   <span class="string">&quot;@<span class="variable">$TREASURY</span> @0xae3da3cb598610db16ea040ad6b09cfd324e146a2a7e5b18ccfa76b34b8d3b22&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>å–å›5000å•ä½</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sui client ptb --move-call <span class="variable">$PKG</span>::upgrade_demo::withdraw <span class="string">&quot;@<span class="variable">$TREASURY</span> 50000 @<span class="variable">$ADMIN_CAP</span>&quot;</span></span><br><span class="line">sui client ptb --move-call <span class="variable">$PKG</span>::upgrade_demo::withdraw <span class="string">&quot;@<span class="variable">$TREASURY</span> 50000 @<span class="variable">$ADMIN_CAP</span>&quot;</span> --assign coin1 --transfer-objects [coin1] @<span class="variable">$ADDR_A</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹å½“å‰Aç”¨æˆ·æ‹¥æœ‰çš„coin</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sui client gas $ADDR_A</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ gasCoinId                                                          â”‚ mistBalance (MIST) â”‚ suiBalance (SUI) â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ 0x09119914c43f80a486b30cc5d4f1382d0b57929eabd70f116ae4e918d9c89bf0 â”‚ 466808880          â”‚ 0.46             â”‚</span><br><span class="line">â”‚ 0xd91123cfc325ba1eff95e839837a1bf443046cc00a72da5192a005ffea1a7117 â”‚ 50000              â”‚ 0.00             â”‚</span><br><span class="line">â”‚ 0xeda78a0ba9b2ef153a209f51380d8e77af0f35c60eb8ea26d4239c639844680d â”‚ 995399888          â”‚ 0.99             â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br></pre></td></tr></table></figure>


<h2 id="6-A-ç”¨æˆ·è½¬ç§»adminCap-ç»™B"><a href="#6-A-ç”¨æˆ·è½¬ç§»adminCap-ç»™B" class="headerlink" title="6. A ç”¨æˆ·è½¬ç§»adminCap ç»™B"></a>6. A ç”¨æˆ·è½¬ç§»adminCap ç»™B</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sui client ptb --transfer-objects [@<span class="variable">$ADMIN_CAP</span>] @<span class="variable">$ADDR_B</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºADMIN_CAP å¯¹è±¡çš„owneræ˜¯0x7cbe5e6596e23266dd5763dd89b4ab1195516908ecde8febfe96685c7cbe6432</span></span><br><span class="line"></span><br><span class="line">â”‚  â”Œâ”€â”€                                                                                                       â”‚</span><br><span class="line">â”‚  â”‚ ObjectID: 0x10ca605ce0437c10274bcc260901ef5b34bab91c747f2dc498b722ae151a5baf                            â”‚</span><br><span class="line">â”‚  â”‚ Sender: 0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c                              â”‚</span><br><span class="line">â”‚  â”‚ Owner: Account Address ( 0x7cbe5e6596e23266dd5763dd89b4ab1195516908ecde8febfe96685c7cbe6432 )           â”‚</span><br><span class="line">â”‚  â”‚ ObjectType: 0x38417a57a4f061487895b2c97b3e188e847c25de37762c5e0146bd6a32cd5a89::upgrade_demo::AdminCap  â”‚</span><br><span class="line">â”‚  â”‚ Version: 245323796                                                                                      â”‚</span><br><span class="line">â”‚  â”‚ Digest: 6QpfZqgrTFjTcaySHPrfS5cDE1K1L5xvuWDQRxh1vumS                                                    â”‚</span><br><span class="line">â”‚  â””â”€â”€ </span><br></pre></td></tr></table></figure>

<h2 id="7-Aç”¨æˆ·-å†æ¬¡å–æ¬¾ï¼Œé¢„æœŸä¼šå¤±è´¥"><a href="#7-Aç”¨æˆ·-å†æ¬¡å–æ¬¾ï¼Œé¢„æœŸä¼šå¤±è´¥" class="headerlink" title="7. Aç”¨æˆ· å†æ¬¡å–æ¬¾ï¼Œé¢„æœŸä¼šå¤±è´¥"></a>7. Aç”¨æˆ· å†æ¬¡å–æ¬¾ï¼Œé¢„æœŸä¼šå¤±è´¥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sui client ptb --move-call <span class="variable">$PKG</span>::upgrade_demo::withdraw <span class="string">&quot;@<span class="variable">$TREASURY</span> 50000 @<span class="variable">$ADMIN_CAP</span>&quot;</span> --assign coin1 --transfer-objects [coin1] @<span class="variable">$ADDR_A</span> --gas-budget 30000000</span><br><span class="line">RPC call failed: ErrorObject &#123; code: ServerError(-32002), message: <span class="string">&quot;Transaction validator signing failed due to issues with transaction inputs, please review the errors and try again:\n- Transaction was not signed by the correct sender: Object 0x10ca605ce0437c10274bcc260901ef5b34bab91c747f2dc498b722ae151a5baf is owned by account address 0x7cbe5e6596e23266dd5763dd89b4ab1195516908ecde8febfe96685c7cbe6432, but given owner/signer address is 0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c\n- Could not find the referenced object 0x38417a57a4f061487895b2c97b3e188e847c25de37762c5e0146bd6a32cd5a89 at version None&quot;</span>, data: None &#125;</span><br></pre></td></tr></table></figure>

<h2 id="8-åˆ‡æ¢B-ç”¨æˆ·ï¼Œå–æ¬¾æˆåŠŸ"><a href="#8-åˆ‡æ¢B-ç”¨æˆ·ï¼Œå–æ¬¾æˆåŠŸ" class="headerlink" title="8. åˆ‡æ¢B ç”¨æˆ·ï¼Œå–æ¬¾æˆåŠŸ"></a>8. åˆ‡æ¢B ç”¨æˆ·ï¼Œå–æ¬¾æˆåŠŸ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢åˆ°ADDR_B</span></span><br><span class="line">$ sui client switch --address <span class="variable">$ADDR_B</span></span><br><span class="line">Active address switched to 0x7cbe5e6596e23266dd5763dd89b4ab1195516908ecde8febfe96685c7cbe6432</span><br><span class="line"><span class="comment"># è°ƒç”¨withdrawå–æ¬¾</span></span><br><span class="line">$ sui client ptb --move-call <span class="variable">$PKG</span>::upgrade_demo::withdraw <span class="string">&quot;@<span class="variable">$TREASURY</span> 50000 @<span class="variable">$ADMIN_CAP</span>&quot;</span> --assign coin1 --transfer-objects [coin1] @<span class="variable">$ADDR_B</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹è·å¾—50000 mistçš„coin</span></span><br><span class="line">$ sui client gas</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ gasCoinId                                                          â”‚ mistBalance (MIST) â”‚ suiBalance (SUI) â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ 0x015a3cb7a04cdcd7631e4056f56e8a55b77a1a7d05dc7da6f30e9ac705d19b7c â”‚ 50000              â”‚ 0.00             â”‚</span><br><span class="line">â”‚ 0x418760c10d6fe9ecaa2594803848412c834f58983f1be03b26962a22dd84f9e5 â”‚ 995949216          â”‚ 0.99             â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br></pre></td></tr></table></figure>

<h2 id="9-A-ç”¨æˆ·å‘èµ·æ”»å‡»ï¼Œå‡çº§åˆçº¦åŒ…ï¼Œ-æ–°å»ºAdminCapå¯¹è±¡adminCap2"><a href="#9-A-ç”¨æˆ·å‘èµ·æ”»å‡»ï¼Œå‡çº§åˆçº¦åŒ…ï¼Œ-æ–°å»ºAdminCapå¯¹è±¡adminCap2" class="headerlink" title="9. A ç”¨æˆ·å‘èµ·æ”»å‡»ï¼Œå‡çº§åˆçº¦åŒ…ï¼Œ æ–°å»ºAdminCapå¯¹è±¡adminCap2"></a>9. A ç”¨æˆ·å‘èµ·æ”»å‡»ï¼Œå‡çº§åˆçº¦åŒ…ï¼Œ æ–°å»ºAdminCapå¯¹è±¡adminCap2</h2><h3 id="9-1-ä¿®æ”¹åˆçº¦ä»£ç ï¼Œæ–°æ„é€ AdminCapå¯¹è±¡"><a href="#9-1-ä¿®æ”¹åˆçº¦ä»£ç ï¼Œæ–°æ„é€ AdminCapå¯¹è±¡" class="headerlink" title="9.1 ä¿®æ”¹åˆçº¦ä»£ç ï¼Œæ–°æ„é€ AdminCapå¯¹è±¡"></a>9.1 ä¿®æ”¹åˆçº¦ä»£ç ï¼Œæ–°æ„é€ AdminCapå¯¹è±¡</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> fun <span class="title">mintCap</span><span class="params">(ctx: &amp;mut TxContext)</span>: AdminCap &#123;</span></span><br><span class="line">    AdminCap&#123;id: object::<span class="keyword">new</span>(ctx)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-2-å‡çº§åˆçº¦"><a href="#9-2-å‡çº§åˆçº¦" class="headerlink" title="9.2 å‡çº§åˆçº¦"></a>9.2 å‡çº§åˆçº¦</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢ä¸ºA</span></span><br><span class="line">sui client switch --address <span class="variable">$ADDR_A</span></span><br><span class="line">Active address switched to 0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c</span><br><span class="line"><span class="comment"># A å‡çº§åˆçº¦</span></span><br><span class="line">sui client upgrade  --upgrade-capability <span class="variable">$UPGRADE_CAP</span>  --gas-budget 100000000  --skip-fetch-latest-git-deps</span><br><span class="line"><span class="comment"># å‡çº§å¯¹è±¡å˜æ›´ï¼Œpackageç‰ˆæœ¬å¢é•¿ ,ç‰ˆæœ¬id å˜æˆäº† 0xc163e33f376cae7a90b0c56b49af9a0aa387c210792d6c76aba0a12a22de8869</span></span><br><span class="line">è€çš„ç‰ˆæœ¬<span class="built_in">id</span>æ˜¯0x38417a57a4f061487895b2c97b3e188e847c25de37762c5e0146bd6a32cd5a89</span><br><span class="line">â”‚  â”Œâ”€â”€                                                                                             â”‚</span><br><span class="line">â”‚  â”‚ ObjectID: 0x67a5815e053ab8be8248c894ec288baf79bc6f323321812074cac70e63915bb0                  â”‚</span><br><span class="line">â”‚  â”‚ Sender: 0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c                    â”‚</span><br><span class="line">â”‚  â”‚ Owner: Account Address ( 0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c ) â”‚</span><br><span class="line">â”‚  â”‚ ObjectType: 0x2::package::UpgradeCap                                                          â”‚</span><br><span class="line">â”‚  â”‚ Version: 245323797                                                                            â”‚</span><br><span class="line">â”‚  â”‚ Digest: 64rX9ChLmX5mupim2UqRGUoKnHD3wTiiYg4uXxzjvppc                                          â”‚</span><br><span class="line">â”‚  â””â”€â”€                                                                                             â”‚</span><br><span class="line">â”‚ Published Objects:                                                                               â”‚</span><br><span class="line">â”‚  â”Œâ”€â”€                                                                                             â”‚</span><br><span class="line">â”‚  â”‚ PackageID: 0xc163e33f376cae7a90b0c56b49af9a0aa387c210792d6c76aba0a12a22de8869                 â”‚</span><br><span class="line">â”‚  â”‚ Version: 2                                                                                    â”‚</span><br><span class="line">â”‚  â”‚ Digest: 8aWACYMu9nLjAG3MHQGteXMsNiBUY5xCt6KhKmMEmrTX                                          â”‚</span><br><span class="line">â”‚  â”‚ Modules: upgrade_demo                                                                         â”‚</span><br><span class="line">â”‚  â””â”€â”€                   </span><br></pre></td></tr></table></figure>

<ul>
<li><p>æ–°å‘å¸ƒçš„çš„åŒ… idå‘ç”Ÿæ”¹å˜</p>
<p>0x67a5815e053ab8be8248c894ec288baf79bc6f323321812074cac70e63915bb0</p>
</li>
</ul>
<h2 id="9-3-å‘èµ·æ”»å‡»"><a href="#9-3-å‘èµ·æ”»å‡»" class="headerlink" title="9.3  å‘èµ·æ”»å‡»"></a>9.3  å‘èµ·æ”»å‡»</h2><p>ç”¨æˆ·ç”¨æ–°åˆ›å»ºçš„adminCap2 æ¥å–é’±</p>
<p>åˆå§‹çš„package</p>
<p><img src="images/image-20241120130414556.png" alt="image-20241120130414556"></p>
<ul>
<li>1 pacakge object id</li>
<li>2 ç‰ˆæœ¬</li>
<li>3 ä»£ç ä¸­çš„åŒ…åœ°å€ã€‚</li>
</ul>
<p>å‡çº§åçš„packageidå‘ç”Ÿå˜æ›´</p>
<p><img src="images/image-20241120125933911.png" alt="image-20241120125933911"></p>
<ul>
<li>1 package object id</li>
<li>2 ç‰ˆæœ¬</li>
<li>3 ä»£ç ä¸­çš„packageåœ°å€</li>
</ul>
<p>ä½†æ˜¯ä»ä»£ç çœ‹ï¼Œpackageåœ°å€ è¿˜æ˜¯æœ€åˆå‘å¸ƒçš„åœ°å€ï¼Œversion&#x3D;2ï¼Œ ä»£ç moduleåé¢çš„åœ°å€ä¸å˜ã€‚ ä½†æ˜¯objectidå‘ç”Ÿå˜æ›´ï¼ˆå›¾1ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$  <span class="built_in">export</span> PKG2=0xc163e33f376cae7a90b0c56b49af9a0aa387c210792d6c76aba0a12a22de8869</span><br><span class="line">$  sui client ptb --move-call <span class="variable">$PKG2</span>::upgrade_demo::mintCap --assign new_cap --transfer-objects [<span class="string">&quot;new_cap&quot;</span> ] @<span class="variable">$ADDR_A</span></span><br><span class="line"></span><br><span class="line"> Created Objects:                                                                                           â”‚</span><br><span class="line">â”‚  â”Œâ”€â”€                                                                                                       â”‚</span><br><span class="line">â”‚  â”‚ ObjectID: 0xb71d4b11e35d769bcdefa42f9706af118b76b2ab2896fe2a294639e19f52d816                            â”‚</span><br><span class="line">â”‚  â”‚ Sender: 0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c                              â”‚</span><br><span class="line">â”‚  â”‚ Owner: Account Address ( 0x6560a053cd8d98925b33ab2b951d656736d0133734def0b5d679402fc555576c )           â”‚</span><br><span class="line">â”‚  â”‚ ObjectType: 0x38417a57a4f061487895b2c97b3e188e847c25de37762c5e0146bd6a32cd5a89::upgrade_demo::AdminCap  â”‚</span><br><span class="line">â”‚  â”‚ Version: 245323798                                                                                      â”‚</span><br><span class="line">â”‚  â”‚ Digest: 8xio19V93oLgmF8jLxWKoCfgCpSitFJqYLLLTbN9Wc77                                                    â”‚</span><br><span class="line">â”‚  â””â”€â”€  </span><br><span class="line">$ <span class="built_in">export</span>  ADMIN_CAP2=0xb71d4b11e35d769bcdefa42f9706af118b76b2ab2896fe2a294639e19f52d816</span><br><span class="line">$ sui client ptb --move-call <span class="variable">$PKG2</span>::upgrade_demo::withdraw <span class="string">&quot;@<span class="variable">$TREASURY</span> 6000 @<span class="variable">$ADMIN_CAP2</span>&quot;</span> \</span><br><span class="line">--assign coin2 --transfer-objects [coin2] @<span class="variable">$ADDR_A</span></span><br><span class="line"><span class="comment"># å·å–æˆåŠŸï¼Œè·å¾—ä¸€ä¸ª6000mistçš„coin</span></span><br><span class="line">$ sui client gas <span class="variable">$ADDR_A</span></span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ gasCoinId                                                          â”‚ mistBalance (MIST) â”‚ suiBalance (SUI) â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ 0x09119914c43f80a486b30cc5d4f1382d0b57929eabd70f116ae4e918d9c89bf0 â”‚ 450920664          â”‚ 0.45             â”‚</span><br><span class="line">â”‚ 0x33233ad9e71a8ef079b7c1c58ac9c99a263d04620f585d37e1ae94b4bd64d538 â”‚ 6000               â”‚ 0.00             â”‚</span><br><span class="line">â”‚ 0x64502383e84a24dda2e531ec0cac4d8123c9c4d7820451a1b42a02eae1888bea â”‚ 50000              â”‚ 0.00             â”‚</span><br><span class="line">â”‚ 0xd91123cfc325ba1eff95e839837a1bf443046cc00a72da5192a005ffea1a7117 â”‚ 50000              â”‚ 0.00             â”‚</span><br><span class="line">â”‚ 0xeda78a0ba9b2ef153a209f51380d8e77af0f35c60eb8ea26d4239c639844680d â”‚ 995399888          â”‚ 0.99             â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PKG=0x38417a57a4f061487895b2c97b3e188e847c25de37762c5e0146bd6a32cd5a89</span><br><span class="line"><span class="built_in">export</span> UPGRADE_CAP=0x67a5815e053ab8be8248c894ec288baf79bc6f323321812074cac70e63915å—¯å—¯</span><br><span class="line"></span><br><span class="line">$ sui client upgrade  --upgrade-capability <span class="variable">$UPGRADE_CAP</span> --package-id <span class="variable">$PKG</span> --gas-budget 100000000</span><br></pre></td></tr></table></figure>

<h2 id="å¯¹ç­–ï¼š"><a href="#å¯¹ç­–ï¼š" class="headerlink" title="å¯¹ç­–ï¼š"></a>å¯¹ç­–ï¼š</h2><h3 id="æ–¹æ³•1"><a href="#æ–¹æ³•1" class="headerlink" title="æ–¹æ³•1"></a>æ–¹æ³•1</h3><ul>
<li>è½¬ç§»æƒé™æ—¶ï¼Œå°†UpgradeCapä¹Ÿè½¬ç§»</li>
</ul>
<h3 id="æ–¹æ³•2"><a href="#æ–¹æ³•2" class="headerlink" title="æ–¹æ³•2"></a>æ–¹æ³•2</h3><ul>
<li><p>åœ¨ Treasury ä¸­æ·»åŠ adminCapçš„idã€‚</p>
</li>
<li><p>åœ¨å–æ¬¾çš„æ—¶å€™åšæ ¡éªŒ</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> <span class="comment">// é‡‘åº“ç»“æ„</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">struct</span> <span class="title class_">Treasury</span> has key &#123;</span><br><span class="line">     id: UID,</span><br><span class="line">     balance: Balance&lt;SUI&gt;,</span><br><span class="line"> +   admin_id : ID,</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// åˆå§‹åŒ–å‡½æ•° - åˆ›å»ºç®¡ç†å‘˜å‡­è¯å’Œé‡‘åº“</span></span><br><span class="line"> <span class="function">fun <span class="title">init</span><span class="params">(ctx: &amp;mut TxContext)</span> </span>&#123;</span><br><span class="line">     let admin_cap = AdminCap &#123;</span><br><span class="line">         id: object::<span class="built_in">new</span>(ctx)</span><br><span class="line">     &#125;;</span><br><span class="line">     </span><br><span class="line">     let treasury = Treasury &#123;</span><br><span class="line">         id: object::<span class="built_in">new</span>(ctx),</span><br><span class="line">         balance: balance::<span class="built_in">zero</span>(),</span><br><span class="line">+        admin_id: *admin_cap.id.<span class="built_in">as_inner</span>(),</span><br><span class="line">     &#125;</span><br><span class="line">     ...</span><br><span class="line">         </span><br><span class="line">         </span><br><span class="line">              <span class="comment">// ç®¡ç†å‘˜æå–SUIä»£å¸</span></span><br><span class="line"> <span class="keyword">public</span> fun <span class="built_in">withdraw</span>(</span><br><span class="line">     treasury: &amp;mut Treasury, </span><br><span class="line">     amount: u64,</span><br><span class="line">     admin_cap: &amp;AdminCap,</span><br><span class="line">     ctx: &amp;mut TxContext</span><br><span class="line"> ): Coin&lt;SUI&gt; &#123;</span><br><span class="line">+     assert!(admin_cap.id.<span class="built_in">as_inner</span>() == treasury.admin_id, ENotAdmin);</span><br><span class="line">   ...</span><br><span class="line">       </span><br></pre></td></tr></table></figure>



<h1 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•:"></a>é™„å½•:</h1><p>æœ€è¿‘åœ¨å‚åŠ HOH å…±å­¦æ´»åŠ¨,</p>
<p>ğŸ’§ <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/d0brr-ao6cZ5t8Z5OO1Mog">HOHæ°´åˆ†å­å…¬ä¼—å·</a></p>
<p>ğŸŒŠ <a target="_blank" rel="noopener" href="https://x.com/0xHOH">HOHæ°´åˆ†å­Xè´¦å·</a></p>
<p>ğŸ“¹ <a target="_blank" rel="noopener" href="https://space.bilibili.com/3493269495352098">è¯¾ç¨‹Bç«™è´¦å·</a></p>
<p>ğŸ’» Githubä»“åº“ <a target="_blank" rel="noopener" href="https://github.com/move-cn/letsmove">https://github.com/move-cn/letsmove</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.walrus.mov/2024/11/11/sui/sui-cap-transfer/" data-id="cm3pg1bfv0002zno33wp74z5s" data-title="2024 -11-20  sui å­˜é’±ç½çš„æƒé™æ§åˆ¶å’Œpacakgeå‡çº§å¸¦æ¥çš„é£é™©" class="article-share-link"><span class="fa fa-share">Compartir</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/move/" rel="tag">move</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/package-upgrade/" rel="tag">package upgrade</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/sui/" rel="tag">sui</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-sui/sui-coin-concepts" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="2024/11/10/sui/sui-coin-concepts/" class="article-date">
  <time class="dt-published" datetime="2024-11-10T02:08:11.000Z" itemprop="datePublished">2024-11-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="categories/sui/">sui</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="2024/11/10/sui/sui-coin-concepts/">sui coin çš„ä¸€äº›æ¦‚å¿µ è®¾è®¡æ€æƒ³å’Œç»ƒä¹ </a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-è´§å¸å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼Œ-sui-coin-å®ç°å¯¹åº”çš„ç‰¹å¾"><a href="#1-è´§å¸å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼Œ-sui-coin-å®ç°å¯¹åº”çš„ç‰¹å¾" class="headerlink" title="1. è´§å¸å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼Œ sui coin å®ç°å¯¹åº”çš„ç‰¹å¾"></a>1. è´§å¸å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼Œ sui coin å®ç°å¯¹åº”çš„ç‰¹å¾</h1><h2 id="1-1-è´§å¸çš„ç‰¹å¾"><a href="#1-1-è´§å¸çš„ç‰¹å¾" class="headerlink" title="1.1 è´§å¸çš„ç‰¹å¾"></a>1.1 è´§å¸çš„ç‰¹å¾</h2><ul>
<li><p>å‘å¸æƒé™</p>
<ul>
<li>æ§åˆ¶å‘å¸ƒæƒé™<ul>
<li>ä¸€èˆ¬æ¥è¯´,æˆ‘ä»¬éœ€è¦æ§åˆ¶è´§å¸çš„å‘è¡Œé‡, ä¸€èˆ¬é™åˆ¶ç‰¹å®šçš„äººæˆ–ç»„ç»‡æ‰èƒ½å‘å‹è´§å¸.<ul>
<li>è‹¥è´§å¸æ— é™åˆ¶å‘å‹, è´§å¸å°±æ²¡æœ‰ä»·å€¼</li>
</ul>
</li>
</ul>
</li>
<li>sui ä½¿ç”¨TreasuryCap å¯¹è±¡çš„æ‰€æœ‰æƒæ¥æ§åˆ¶è´§å¸çš„å‘è¡Œæƒ</li>
<li>å…±äº«å‘å¸æƒé™â€”faucet<ul>
<li>è¿™ç§æƒ…å†µåªç”¨ä½œæµ‹è¯• æœ¬æ–‡ä¸åšè®¨è®ºã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>è´§å¸çš„æ€»ä¾›åº”é‡</p>
<ul>
<li>sui é‡‡ç”¨ Supply<ul>
<li>èƒ½å¢åŠ å‘è¡Œé‡ï¼Œ æä¾›æ–°çš„ä½™é¢Balance  ï¼Œ increase_supply</li>
<li>èƒ½å›æ”¶è´§å¸ä½™é¢ï¼Œå‡å°‘è´§å¸ä¾›åº”  decrease_supply</li>
</ul>
</li>
</ul>
</li>
<li><p>coinè´§å¸çš„ä½™é¢(balance) , ä¹Ÿå°±æ˜¯:é¢å€¼å‡ å—é’±</p>
<ul>
<li>æ•°å­—è´§å¸,ä½™é¢å¯ä»¥å˜åŠ¨</li>
<li>å¯ä»¥3å—çš„è´§å¸,æ‹†æˆ 2.5å…ƒ  å’Œ0.5å…ƒ ä¸¤ä¸ªcoin</li>
</ul>
</li>
<li><p>coin è´§å¸æœ‰ç‰¹å¾, äººæ°‘å¸ä¹‹æ‰€ä»¥æ˜¯äººæ°‘å¸,ä¸æ˜¯ç¾å…ƒ,æ˜¯å› ä¸ºäººæ°‘å¸æœ‰ç‹¬ç‰¹çš„å›¾å½¢ </p>
<ul>
<li>å¯¹åº”  CoinMetadata</li>
</ul>
</li>
</ul>
<h2 id="1-2-Sui-Coinç›¸å…³å¯¹è±¡ç±»å‹å…³ç³»å›¾"><a href="#1-2-Sui-Coinç›¸å…³å¯¹è±¡ç±»å‹å…³ç³»å›¾" class="headerlink" title="1.2 Sui Coinç›¸å…³å¯¹è±¡ç±»å‹å…³ç³»å›¾"></a>1.2 Sui Coinç›¸å…³å¯¹è±¡ç±»å‹å…³ç³»å›¾</h2><p>  <img src="images/image-20241116221238292-1731949327268-7.png" alt="image-20241116221238292"></p>
<pre><code>- create_currency æ˜¯è´§å¸åˆ›å»ºçš„å‡½æ•°, è¿”å›ä¸€ä¸ªTreasuryCap å¯¹è±¡å’Œä¸€ä¸ªCoinMetadataå¯¹è±¡
- CoinMetadata è¡¨ç¤ºè´§å¸çš„å°æ•°ä½,åç§°,å›¾æ ‡.
- TreasuryCap æŒæœ‰ä¸€ä¸ªSupplyå¯¹è±¡,è¿™ä¸ªSupplyæ˜¯å®ç°è´§å¸å¢é•¿å’Œå‡å°‘çš„å…³é”®å¯¹è±¡.
- Supply èƒ½æä¾›è´§å¸ä½™é¢ Balance, åŒæ—¶å¢åŠ æ€»è´§å¸ä¾›åº”é‡.
- Coin è¡¨ç¤ºå¯ä»¥ä¿å­˜åœ¨é“¾ä¸Šçš„è´§å¸
- Balance å¯ä»¥è½¬æ¢æˆCoin å­˜å‚¨åˆ°é“¾ä¸Š,è½¬ç§»ç»™æŸä¸ªç”¨æˆ·
- Coinä¹Ÿå¯ä»¥è½¬æ¢æˆBalance  ä½™é¢,Balanceæ²¡æœ‰keyèƒ½åŠ›, ä½†æ˜¯å…·æœ‰storeèƒ½åŠ›,å¯ä»¥ä½œä¸ºå…¶ä»–å¯¹è±¡çš„å­—æ®µ.
- Coin å’ŒBalance å¯ä»¥é€šè¿‡join(ä¸¤ä¸ªå¸åˆæˆä¸€ä¸ª),split( ä¸€ä¸ªå¸åˆ†æˆ2ä¸ª)
</code></pre>
<h2 id="1-3-CoinMetadata"><a href="#1-3-CoinMetadata" class="headerlink" title="1.3 CoinMetadata ,"></a>1.3 CoinMetadata ,</h2><p>å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§è´§å¸çš„å±•ç°å½¢å¼, ä¾‹å¦‚æ²¡æœ‰,å°±æ˜¯è¿™ä¸ªæ ·å­çš„.</p>
<p>é€šè¿‡è¿™ä¸ªæ•°æ®ç»“æ„,å‘Šè¯‰æˆ‘çš„è´§å¸æ˜¯ç¾å…ƒ,å°±èƒ½å±•ç°æˆç¾å…ƒçš„å½¢å¼.</p>
<p><img src="images/v2-6c896a325f97d97fad2ce3a82a70b183_720w-1731949327268-6.jpg" alt="ç”µå½±ã€Šæ— åŒã€‹ä¸­ä¸ºä»€ä¹ˆç”»å®¶éœ€è¦æ‰‹ç»˜ç¾å…ƒæ¯ç‰ˆï¼Ÿ - çŸ¥ä¹"></p>
<p>æˆ–è€…æ—¥å…ƒ:</p>
<p><img src="images/OIP-C-1731949327268-5.jpeg" alt="img"></p>
<h2 id="1-4-æˆ‘ä»¬å®šä¹‰çš„è´§å¸Coin-å’ŒCoinMetadata-æ˜¯æ€ä¹ˆå…³è”ä¸Šçš„å‘¢"><a href="#1-4-æˆ‘ä»¬å®šä¹‰çš„è´§å¸Coin-å’ŒCoinMetadata-æ˜¯æ€ä¹ˆå…³è”ä¸Šçš„å‘¢" class="headerlink" title="1.4 æˆ‘ä»¬å®šä¹‰çš„è´§å¸Coin , å’ŒCoinMetadata æ˜¯æ€ä¹ˆå…³è”ä¸Šçš„å‘¢**?"></a>1.4 æˆ‘ä»¬å®šä¹‰çš„è´§å¸Coin , å’ŒCoinMetadata æ˜¯æ€ä¹ˆå…³è”ä¸Šçš„å‘¢**?</h2><ul>
<li>æ˜¯æ ¹æ®ä»–ä»¬çš„<strong>æ³›å‹å‚æ•°T</strong>  å…³è”çš„</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// A coin of type `T` worth `value`. Transferable and storable</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> <span class="title class_">Coin</span>&lt;phantom T&gt; has key, store &#123;</span><br><span class="line">    id: UID,</span><br><span class="line">    balance: Balance&lt;T&gt;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// Each Coin type T created through `create_currency` function will have a</span></span><br><span class="line"><span class="comment">/// unique instance of CoinMetadata&lt;T&gt; that stores the metadata for this coin type.</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> <span class="title class_">CoinMetadata</span>&lt;phantom T&gt; has key, store &#123;</span><br><span class="line">    id: UID,</span><br><span class="line">    <span class="comment">/// Number of decimal places the coin uses.</span></span><br><span class="line">    <span class="comment">/// A coin with `value ` N and `decimals` D should be shown as N / 10^D</span></span><br><span class="line">    <span class="comment">/// E.g., a coin with `value` 7002 and decimals 3 should be displayed as 7.002</span></span><br><span class="line">    <span class="comment">/// This is metadata for display usage only.</span></span><br><span class="line">    decimals: u8,</span><br><span class="line">    <span class="comment">/// Name for the token</span></span><br><span class="line">    name: string::String,</span><br><span class="line">    <span class="comment">/// Symbol for the token</span></span><br><span class="line">    symbol: ascii::String,</span><br><span class="line">    <span class="comment">/// Description of the token</span></span><br><span class="line">    description: string::String,</span><br><span class="line">    <span class="comment">/// URL for the token logo</span></span><br><span class="line">    icon_url: Option&lt;Url&gt;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="2-è´§å¸çš„è¯ç”Ÿï¼š"><a href="#2-è´§å¸çš„è¯ç”Ÿï¼š" class="headerlink" title="2. è´§å¸çš„è¯ç”Ÿï¼š"></a>2. è´§å¸çš„è¯ç”Ÿï¼š</h1><h2 id="2-1-è´§å¸è¯ç”Ÿç›¸å…³å‡½æ•°çš„å¯å‘"><a href="#2-1-è´§å¸è¯ç”Ÿç›¸å…³å‡½æ•°çš„å¯å‘" class="headerlink" title="2.1 è´§å¸è¯ç”Ÿç›¸å…³å‡½æ•°çš„å¯å‘"></a>2.1 è´§å¸è¯ç”Ÿç›¸å…³å‡½æ•°çš„å¯å‘</h2><p>å‚çœ‹ 0x2:sui::coin çš„åˆ›å»ºè´§å¸çš„ä»£ç ,éœ€è¦ä¸€ä¸ªotwå¯¹è±¡.<br><img src="images/image-20241111221059544-1731949327268-8.png" alt="image-20241111221059544"></p>
<p>è´§å¸è¯ç”Ÿéœ€è¦è¿™ä¸ªæ³›å‹å‚æ•°witnessä¸¢æƒ³æ˜¯ä¸€ä¸ªOne Time Witness struct å¯¹è±¡</p>
<ul>
<li><p>è¿™ä¸ªç»“æ„ä½“åªèƒ½åœ¨æ¨¡å—åŒåå¤§å†™, å¹¶ä¸”ç”±ç³»ç»Ÿæ§åˆ¶åªæ„é€ ä¸€æ¬¡</p>
<p>ä¾‹å¦‚  0x2::sui::SUI<br>0X433 :: rmb::RMB</p>
</li>
<li><p>ä¸èƒ½é€šè¿‡ç¼–ç æ„é€ è¿™ä¸ªå¯¹è±¡</p>
</li>
<li><p>é¿å…é€šè¿‡å‡çº§package,å¢åŠ ä¸€ä¸ªå‡½æ•° æ¥æ„é€ otw å¯¹è±¡</p>
</li>
</ul>
<p>è¿™ä¸ªä¾‹å­ä¸­ witness å¯¹è±¡ åªä¼šåœ¨æ˜¯ä¸€ä¸ªOTW å¯¹è±¡,è¿™ä¸ªå¯¹è±¡åœ¨æ¨¡å—åˆå§‹åŒ–çš„æ—¶å€™æ„å»º,ä¼ å…¥è¿™ä¸ªå‡½æ•°ä¹‹å,åœ¨è¿™ä¸ªå‡½æ•°ç»“æŸåé”€æ¯,å› ä¸ºå®ƒæ˜¯ç§»åŠ¨æ‰€æœ‰æƒä¼ é€’(æ²¡æœ‰copy ability), åŒæ—¶å…·æœ‰drop ability.</p>
<p>è¿™ä¸ªæ–¹æ³•æ‰§è¡Œçš„ç»“æœ,ä¼šè®©è¿™ä¸ªè´§å¸ç›¸å…³æŸ¥åˆ°Coin,CoinMetadata ,TreasuryCap  ,Supply,Balance è¿™ä¸€ç³»åˆ—å¯¹è±¡,éƒ½æœ‰ä¸ªç±»å‹å‚æ•°<code>type-arg</code>æ˜¯<code>witness</code>å‚æ•°çš„ç±»å‹.</p>
<h2 id="2-2-ç¤ºä¾‹-å‘è¡Œä¸€ç§æ—¥å…ƒ"><a href="#2-2-ç¤ºä¾‹-å‘è¡Œä¸€ç§æ—¥å…ƒ" class="headerlink" title="2.2  ç¤ºä¾‹:å‘è¡Œä¸€ç§æ—¥å…ƒ"></a>2.2  ç¤ºä¾‹:å‘è¡Œä¸€ç§æ—¥å…ƒ</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span> <span class="attr">coin_jp</span>::jp&#123;</span><br><span class="line">    <span class="keyword">public</span> struct <span class="variable constant_">JP</span> has drop&#123; &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="title class_">JpUrl</span>:vector&lt;u8&gt; = b<span class="string">&quot;https://tse4-mm.cn.bing.net/th/id/OIP-C.XVkbV--98d7_YfeLR2a_fAHaHa&quot;</span>;</span><br><span class="line"></span><br><span class="line">    fun <span class="title function_">init</span>(<span class="params"> jp :JP , ctx : &amp;mut <span class="title class_">TxContext</span></span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title function_">let</span> (treasuryCap,coinMetadata) = <span class="attr">sui</span>::<span class="attr">coin</span>::<span class="title function_">create_currency</span>(</span><br><span class="line">                jp, </span><br><span class="line">                <span class="number">0</span>, </span><br><span class="line">                b<span class="string">&quot;YEN&quot;</span>,</span><br><span class="line">                b<span class="string">&quot;YEN of Japan&quot;</span>, </span><br><span class="line">                b<span class="string">&quot;Japanese money&quot;</span>,</span><br><span class="line">                <span class="attr">option</span>::<span class="title function_">some</span>(<span class="attr">sui</span>::<span class="attr">url</span>::<span class="title function_">new_unsafe_from_bytes</span>(<span class="title class_">JpUrl</span>)),</span><br><span class="line">                ctx);</span><br><span class="line"></span><br><span class="line">        <span class="attr">transfer</span>::<span class="title function_">public_transfer</span>(treasuryCap,ctx.<span class="title function_">sender</span>());</span><br><span class="line">        <span class="attr">transfer</span>::<span class="title function_">public_freeze_object</span>(coinMetadata);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ³¨æ„æ¨¡å—åjpå’Œ struct JP çš„å¯¹åº”å…³ç³»,OTW ç»“æ„ä½“æ˜¯æ¨¡å—åçš„å¤§å†™. è¿™ä¸ªç»“æ„ä½“JP ,å°±æ˜¯ä¸€ä¸ªOTW ç»“æ„ä½“, </li>
<li>initå‡½æ•°ä¼ å…¥çš„jpå¯¹è±¡,æ˜¯packageåœ¨éƒ¨ç½²çš„æ—¶å€™è‡ªåŠ¨æ„é€ å‡ºæ¥çš„å¯¹è±¡.</li>
<li>ä»¥åæ— æ³•é€šè¿‡å‡çº§packageæ¥é‡æ–°æ„å»ºä¸€ä¸ªJP ç±»å‹çš„å¯¹è±¡.è¿™å°±ä¿è¯äº†é“¸å¸èƒ½åŠ› TreasuryCap.total_supplyçš„å”¯ä¸€æ€§.</li>
</ul>
<p>è¿™ä¸ªå®šä¹‰,ç­‰äºè®¾ç½®äº†ä¸€ä¸ªæ—¥å…ƒçš„å¤–è§‚å®šä¹‰(CoinMetadata), æ—¥å…ƒçš„å¢å‘æƒé™ TreasuryCap ,   ä»¥åå‘è¡Œçš„æ—¥å…ƒ,ä½™é¢, éƒ½æœ‰ç‰¹æ€§èŠ±çº¹:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">coin_jp::jp::JP</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªcoin_jpæ˜¯åœ°å€,å½“move packageåº”è¯¥åœ¨å‘å¸ƒçš„æ—¶å€™,ç¡®å®šå…¶åœ°å€å–å€¼.</p>
<h2 id="2-3-æ–°å»ºè´§å¸æµç¨‹"><a href="#2-3-æ–°å»ºè´§å¸æµç¨‹" class="headerlink" title="2.3  æ–°å»ºè´§å¸æµç¨‹"></a>2.3  æ–°å»ºè´§å¸æµç¨‹</h2><p><img src="images/image-20241116225504184-1731949327268-9.png" alt="image-20241116225504184"></p>
<p>å‘å¸ƒè¿™ä¸ªåˆçº¦å°±æ˜¯è¯ç”Ÿäº†ä¸€ç§è´§å¸,æˆ‘ä»¬å…¶å®åªæ˜¯å®šä¹‰äº†ä¸€ç§é“¸å¸æƒ(åŒ…æ‹¬è´§å¸å¢åŠ  å‡å°‘çš„èƒ½åŠ›), å’Œè´§å¸çš„æ ·å¼ CoinMetadata, (æ–¹ä¾¿åœ¨suiscanä¸Šæµè§ˆå®ƒ)</p>
<h1 id="3-è´§å¸çš„å¢å‘"><a href="#3-è´§å¸çš„å¢å‘" class="headerlink" title="3.è´§å¸çš„å¢å‘"></a>3.è´§å¸çš„å¢å‘</h1><p>å¢åŠ è´§å¸ï¼ˆmintï¼‰æµç¨‹</p>
<p><img src="images/image-20241116231338675-1731949327269-11.png" alt="image-20241116231338675"></p>
<pre><code>1. å®¢æˆ·ç«¯å‘èµ·mint_and_transfer çš„rpcè°ƒç”¨ ã€‚ å®¢æˆ·ç«¯éœ€è¦æ‹¥æœ‰è®¿é—®TreasuryCapå¯¹è±¡çš„æƒåˆ© ï¼ˆå¢å‘è´§å¸çš„æƒåŠ›ï¼‰
1. TreasuryCap è°ƒç”¨mint æ–¹æ³•è¿˜å¢åŠ è´§å¸
1. Treasury è°ƒç”¨å®ƒçš„total_supplyå¯¹è±¡çš„increase_supply æ–¹æ³•
1. Supply åœ¨balance æ¨¡å—ï¼Œèƒ½æ„å»ºåŒä¸€æ¨¡å—çš„Balanceå¯¹è±¡
1. Supplyè·å¾—Balanceå¯¹è±¡
1. è¿”å›Balanceå¯¹è±¡ç»™TreasuryCapå¯¹è±¡
1. TreasuryCapå¯¹è±¡ï¼Œç”¨Balanceå¯¹è±¡æ¥æ„é€  coinæ¨¡å—ä¸­çš„Coinå¯¹è±¡
1. è¿”å›Coinå¯¹è±¡
1. é€šè¿‡public_transferæ–¹æ³•ï¼Œè®²Coinå­˜åˆ°é“¾ä¸Šï¼Œå½’å±ç»™mint_and_transfer å‚æ•°ä¸­çš„åœ°å€ã€‚#
</code></pre>
<h1 id="4-å‘å¸ƒåˆçº¦ï¼Œå¢å‘è´§å¸çš„è°ƒç”¨è„šæœ¬ï¼š"><a href="#4-å‘å¸ƒåˆçº¦ï¼Œå¢å‘è´§å¸çš„è°ƒç”¨è„šæœ¬ï¼š" class="headerlink" title="4. å‘å¸ƒåˆçº¦ï¼Œå¢å‘è´§å¸çš„è°ƒç”¨è„šæœ¬ï¼š"></a>4. å‘å¸ƒåˆçº¦ï¼Œå¢å‘è´§å¸çš„è°ƒç”¨è„šæœ¬ï¼š</h1><h2 id="4-1-å‘å¸ƒåˆçº¦-è„šæœ¬"><a href="#4-1-å‘å¸ƒåˆçº¦-è„šæœ¬" class="headerlink" title="4.1 å‘å¸ƒåˆçº¦ è„šæœ¬"></a>4.1 å‘å¸ƒåˆçº¦ è„šæœ¬</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sui client publish --skip-fetch-latest-git-deps --skip-dependency-verification</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥çœ‹è¾“å‡ºç»“æœä¸­çš„ 0x2::coin::TreasuryCap å¯¹è±¡</span><br><span class="line"> â”‚ ObjectID: 0x8e1bebaac6dd33bf486fb294981f13fb6946051f465db0c25401b61b01f7421e                                     â”‚</span><br><span class="line">â”‚  â”‚ Sender: 0x540105a7d2f5f54a812c630f2996f1790ed0e60d1f9a870ce397f03e4cec9b38                                       â”‚</span><br><span class="line">â”‚  â”‚ Owner: Account Address ( 0x540105a7d2f5f54a812c630f2996f1790ed0e60d1f9a870ce397f03e4cec9b38 )                    â”‚</span><br><span class="line">â”‚  â”‚ ObjectType: 0x2::coin::TreasuryCap&lt;0x65a0995fd59c97b94fd975a3fb42c745cdff54711c1caae2934858e6eb99adb4::jp::JP&gt;   â”‚</span><br><span class="line">â”‚  â”‚ Version: 236167313                                                                                               â”‚</span><br><span class="line">â”‚  â”‚ Digest: BnpekhzZQWQnR77hpGMZyhafRrMe57AyJainuFX8xEjg   </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç›¸å…³å¯¹è±¡æ ‡è¯†, ä¸ºåç»­å¢å‘æä¾›å˜é‡.</p>
<table>
<thead>
<tr>
<th>å¯¹è±¡å</th>
<th>export name</th>
<th>å¯¹è±¡å€¼</th>
</tr>
</thead>
<tbody><tr>
<td>packageåœ°å€</td>
<td>PKG</td>
<td>0x65a0995fd59c97b94fd975a3fb42c745cdff54711c1caae2934858e6eb99adb4</td>
</tr>
<tr>
<td>0x2::coin::TreasuryCap å¯¹è±¡id</td>
<td>JP_CAP</td>
<td>0x8e1bebaac6dd33bf486fb294981f13fb6946051f465db0c25401b61b01f7421e</td>
</tr>
</tbody></table>
<h2 id="4-2-è°ƒç”¨åˆçº¦-å¢å‘è´§å¸"><a href="#4-2-è°ƒç”¨åˆçº¦-å¢å‘è´§å¸" class="headerlink" title="4.2 è°ƒç”¨åˆçº¦ å¢å‘è´§å¸"></a>4.2 è°ƒç”¨åˆçº¦ å¢å‘è´§å¸</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ®å‰é¢çš„packageåœ°å€å’Œ</span></span><br><span class="line"><span class="built_in">export</span>  PKG=0x65a0995fd59c97b94fd975a3fb42c745cdff54711c1caae2934858e6eb99adb4</span><br><span class="line"><span class="built_in">export</span> JP_CAP=0x8e1bebaac6dd33bf486fb294981f13fb6946051f465db0c25401b61b01f7421e</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å½“å‰æ¿€æ´»çš„åœ°å€</span></span><br><span class="line"><span class="built_in">export</span> C_ADDR=`sui client active-address`</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œé“¸å¸,transferç»™æœ¬åœ°å€</span></span><br><span class="line">sui client call --package 0x2 --module coin --<span class="keyword">function</span> mint_and_transfer --type-args <span class="variable">$PKG</span>::jp::JP  --args <span class="variable">$JP_CAP</span>   8800000   <span class="variable">$C_ADDR</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹è¾“å‡ºç»“æœ,æœ‰åˆ›å»ºçš„0x2::coin::Coin å¯¹è±¡.0x95245c704b124aa96f49ab1cdd459c7219d1dc1165faaeae80a514524e8308e2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> Created Objects:                                                                                                   â”‚</span><br><span class="line">â”‚  â”Œâ”€â”€                                                                                                               â”‚</span><br><span class="line">â”‚  â”‚ ObjectID: 0x95245c704b124aa96f49ab1cdd459c7219d1dc1165faaeae80a514524e8308e2                                    â”‚</span><br><span class="line">â”‚  â”‚ Sender: 0x540105a7d2f5f54a812c630f2996f1790ed0e60d1f9a870ce397f03e4cec9b38                                      â”‚</span><br><span class="line">â”‚  â”‚ Owner: Account Address ( 0x540105a7d2f5f54a812c630f2996f1790ed0e60d1f9a870ce397f03e4cec9b38 )                   â”‚</span><br><span class="line">â”‚  â”‚ ObjectType: 0x2::coin::Coin&lt;0x65a0995fd59c97b94fd975a3fb42c745cdff54711c1caae2934858e6eb99adb4::jp::JP&gt;         â”‚</span><br><span class="line">â”‚  â”‚ Version: 236167314                                                                                              â”‚</span><br><span class="line">â”‚  â”‚ Digest: Gh2shitikPnbxxffpPj5mnWwrUCNJChEPyCNaBB2YHMV     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-3-ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹ä½™é¢"><a href="#4-3-ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹ä½™é¢" class="headerlink" title="4.3  ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹ä½™é¢"></a>4.3  ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹ä½™é¢</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥çœ‹è·å¾—è´§å¸</span><br><span class="line">sui client balance $C_ADDR</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ljl@ljl-i5-14400:~/work/sui/move-cn/letsmove/mover/nextuser/code$ sui client balance</span><br><span class="line">[warn] Client/Server api version mismatch, client api version : 1.37.1, server api version : 1.37.2</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ Balance of coins owned by this address       â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚</span><br><span class="line">â”‚ â”‚ coin          balance (raw)  balance     â”‚ â”‚</span><br><span class="line">â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚</span><br><span class="line">â”‚ â”‚ Sui           3637300968     3.63 SUI    â”‚ â”‚</span><br><span class="line">â”‚ â”‚ YEN of Japan  8800000        8.80M YEN   â”‚ â”‚</span><br><span class="line">â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚</span><br></pre></td></tr></table></figure>

<h2 id="4-4-sui-scanä¸ŠæŸ¥çœ‹coinå¯¹è±¡"><a href="#4-4-sui-scanä¸ŠæŸ¥çœ‹coinå¯¹è±¡" class="headerlink" title="4.4  sui scanä¸ŠæŸ¥çœ‹coinå¯¹è±¡"></a>4.4  sui scanä¸ŠæŸ¥çœ‹coinå¯¹è±¡</h2><p><a target="_blank" rel="noopener" href="https://suiscan.xyz/testnet/object/0x95245c704b124aa96f49ab1cdd459c7219d1dc1165faaeae80a514524e8308e2">https://suiscan.xyz/testnet/object/0x95245c704b124aa96f49ab1cdd459c7219d1dc1165faaeae80a514524e8308e2</a></p>
<p><img src="images/image-20241116223844785-1731949327269-10.png" alt="image-20241116223844785"></p>
<p>   1 . èƒ½çœ‹åˆ°è¿™ä¸ªæ³›å‹çš„T å‚æ•°æ˜¯æ¨¡å‹åjpå’Œç»“æ„ä½“åJPçš„ç›¸ä¼¼æ€§</p>
<ol start="2">
<li>owneræ˜¯é“¸å¸æ—¶ä¼ é€’çš„åœ°å€</li>
<li>æ˜¾ç¤ºäº†è´§å¸çš„ä½™é¢ä¸å›¾æ ‡</li>
</ol>
<h1 id="5-é™„å½•"><a href="#5-é™„å½•" class="headerlink" title="5. é™„å½•:"></a>5. é™„å½•:</h1><p>æœ€è¿‘åœ¨å‚åŠ HOH å…±å­¦æ´»åŠ¨,</p>
<p>ğŸ’§ <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/d0brr-ao6cZ5t8Z5OO1Mog">HOHæ°´åˆ†å­å…¬ä¼—å·</a></p>
<p>ğŸŒŠ <a target="_blank" rel="noopener" href="https://x.com/0xHOH">HOHæ°´åˆ†å­Xè´¦å·</a></p>
<p>ğŸ“¹ <a target="_blank" rel="noopener" href="https://space.bilibili.com/3493269495352098">è¯¾ç¨‹Bç«™è´¦å·</a></p>
<p>ğŸ’» Githubä»“åº“ <a target="_blank" rel="noopener" href="https://github.com/move-cn/letsmove">https://github.com/move-cn/letsmove</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.walrus.mov/2024/11/10/sui/sui-coin-concepts/" data-id="cm3n9nnuz0000rzo3gjzp677v" data-title="sui coin çš„ä¸€äº›æ¦‚å¿µ è®¾è®¡æ€æƒ³å’Œç»ƒä¹ " class="article-share-link"><span class="fa fa-share">Compartir</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/ability/" rel="tag">ability</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/move/" rel="tag">move</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/sui/" rel="tag">sui</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-sui/sui-move-ability" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="2024/11/10/sui/sui-move-ability/" class="article-date">
  <time class="dt-published" datetime="2024-11-09T16:08:11.000Z" itemprop="datePublished">2024-11-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="categories/sui/">sui</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="2024/11/10/sui/sui-move-ability/">Move å¯¹è±¡çš„æœ‰4ç§èƒ½åŠ›(abliity) è®¾è®¡è€ƒè™‘</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Move-å¯¹è±¡çš„æœ‰4ç§èƒ½åŠ›-abliity"><a href="#Move-å¯¹è±¡çš„æœ‰4ç§èƒ½åŠ›-abliity" class="headerlink" title="Move å¯¹è±¡çš„æœ‰4ç§èƒ½åŠ›(abliity)"></a>Move å¯¹è±¡çš„æœ‰4ç§èƒ½åŠ›(abliity)</h1><h2 id="1-å¯¹è±¡çš„å‡ ç§å­˜å‚¨çŠ¶æ€"><a href="#1-å¯¹è±¡çš„å‡ ç§å­˜å‚¨çŠ¶æ€" class="headerlink" title="1. å¯¹è±¡çš„å‡ ç§å­˜å‚¨çŠ¶æ€:"></a>1. å¯¹è±¡çš„å‡ ç§å­˜å‚¨çŠ¶æ€:</h2><ul>
<li><p>æ–°å»ºçš„å¯¹è±¡ï¼Œ è¿›å…¥æœªæ›¾å­˜å‚¨çŠ¶æ€ï¼Œä¸€ä¸ªäº¤æ˜“ç»“æŸä¹‹åï¼Œå¯¹è±¡è¦ä¹ˆè¢«é”€æ¯ï¼Œè¦ä¹ˆè¢«å­˜å‚¨åˆ°ç½‘ç»œçš„é“¾ä¸Šå­˜å‚¨ã€‚</p>
</li>
<li><p>é“¾ä¸Šå­˜å‚¨çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥å€Ÿç”¨å¼•ç”¨å‚ä¸äº¤æ˜“è¿ç®—</p>
</li>
<li><p>è¿è¡Œæ€çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡shareæˆ–freeze ç¼–ç¨‹å…±äº«å¯¹è±¡ã€‚freezeçš„å¯¹è±¡æ˜¯åªè¯»çš„ã€‚</p>
</li>
<li><p>é“¾ä¸Šå­˜å‚¨å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°è°ƒç”¨ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œç§»åŠ¨æˆè¿è¡Œæ€ï¼Œè¿›å…¥è¿è¡Œæ€ä¹‹åï¼Œåˆå¯ä»¥é‡æ–°è¿›å…¥ææ„æˆ–é‡æ–°å­˜åˆ°é“¾ä¸Šã€‚</p>
</li>
</ul>
<p><img src="images/image-20241114154521620.png" alt="image-20241114154521620"></p>
<h2 id="2-å¯¹è±¡å…·æœ‰çš„å››ç§ability-èƒ½åŠ›"><a href="#2-å¯¹è±¡å…·æœ‰çš„å››ç§ability-èƒ½åŠ›" class="headerlink" title="2.  å¯¹è±¡å…·æœ‰çš„å››ç§ability (èƒ½åŠ›)"></a>2.  å¯¹è±¡å…·æœ‰çš„å››ç§ability (èƒ½åŠ›)</h2><p>è¿™å››ç§èƒ½åŠ›æ˜¯ï¼š</p>
<ul>
<li><p><code>copy</code></p>
<ul>
<li>å…è®¸å¤åˆ¶å…·æœ‰æ­¤åŠŸèƒ½çš„ç±»å‹çš„å€¼ã€‚</li>
<li>å½“èµ‹å€¼æˆ–ä¼ å‚æ•°æ—¶,ä¼šè‡ªåŠ¨æ‹·è´æˆæ–°å¯¹è±¡</li>
<li>å¦‚æœæ²¡æœ‰å®ç°copyèƒ½åŠ›, èµ‹å€¼çš„æ—¶å€™,æ˜¯å¯¹è±¡è¢«ç§»åŠ¨</li>
</ul>
</li>
<li><p><code>drop</code></p>
<ul>
<li>å…è®¸è·³å‡ºä½œç”¨åŸŸè‡ªåŠ¨åˆ é™¤</li>
</ul>
</li>
<li><p><code>store</code></p>
<ul>
<li>å…è®¸å…·æœ‰æ­¤åŠŸèƒ½çš„ç±»å‹çš„å€¼å­˜åœ¨äº é“¾ä¸Šä¸­çš„å€¼ä¸­ã€‚  å­˜åœ¨sui ç½‘ç»œä¸Šçš„å¯¹è±¡çš„å­—æ®µ</li>
<li>å¯¹äº Suiï¼Œæ§åˆ¶å¯¹è±¡å†…éƒ¨å¯ä»¥å­˜å‚¨å“ªäº›<a target="_blank" rel="noopener" href="https://move-book.com/reference/abilities/object.html">æ•°æ®ã€‚</a> è¿˜æ§åˆ¶å“ªäº›ç±»å‹å¯ä»¥åœ¨å…¶å®šä¹‰æ¨¡å—ä¹‹å¤–ä¼ </li>
</ul>
</li>
<li><p><code>key</code></p>
<ul>
<li><p>å…è®¸ç±»å‹ç”¨ä½œå­˜å‚¨çš„ â€œkeyâ€ã€‚è¡¨é¢ä¸Šï¼Œè¿™æ„å‘³ç€è¯¥å€¼å¯ä»¥æ˜¯ å­˜å‚¨ä¸­çš„é¡¶çº§ä»·å€¼;æ¢å¥è¯è¯´ï¼Œå®ƒä¸éœ€è¦åŒ…å«åœ¨å¦ä¸€ä¸ªå€¼ä¸­ï¼Œä»¥ åœ¨ä»“åº“é‡Œã€‚</p>
</li>
<li><p>å¯¹äº Suiï¼Œç”¨äºè¡¨ç¤º<a target="_blank" rel="noopener" href="https://move-book.com/reference/abilities/object.html">å¯¹è±¡</a>ã€‚</p>
</li>
</ul>
</li>
</ul>
<h3 id="2-1-å¦‚æœæœ‰copyèƒ½åŠ›-èµ‹å€¼å°±æ˜¯æ‹·è´æˆä¸€ä¸ªæ–°å¯¹è±¡"><a href="#2-1-å¦‚æœæœ‰copyèƒ½åŠ›-èµ‹å€¼å°±æ˜¯æ‹·è´æˆä¸€ä¸ªæ–°å¯¹è±¡" class="headerlink" title="2.1 å¦‚æœæœ‰copyèƒ½åŠ›,èµ‹å€¼å°±æ˜¯æ‹·è´æˆä¸€ä¸ªæ–°å¯¹è±¡"></a>2.1 å¦‚æœæœ‰copyèƒ½åŠ›,èµ‹å€¼å°±æ˜¯æ‹·è´æˆä¸€ä¸ªæ–°å¯¹è±¡</h3><p><img src="images/image-20241111194804064.png" alt="image-20241111194804064"></p>
<ul>
<li><p>ä¸Šå›¾ä¸­27è¡Œ,cå¯¹è±¡è¢«æ‹·è´åˆ°d,cå’ŒdæŒ‡å‘çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡, </p>
</li>
<li><p>28 è¡Œä¿®æ”¹äº†d,ä½†æ˜¯cæ²¡æœ‰è¢«ä¿®æ”¹</p>
</li>
<li><p>32è¡Œå’Œ33è¡Œä¸­,cå’Œdå–å€¼ä¸åŒ.</p>
</li>
</ul>
<h3 id="2-2-å¦‚æœæ²¡æœ‰copy-èƒ½åŠ›-èµ‹å€¼å°±æ˜¯ç§»åŠ¨å¯¹è±¡"><a href="#2-2-å¦‚æœæ²¡æœ‰copy-èƒ½åŠ›-èµ‹å€¼å°±æ˜¯ç§»åŠ¨å¯¹è±¡" class="headerlink" title="2.2 å¦‚æœæ²¡æœ‰copy èƒ½åŠ›,èµ‹å€¼å°±æ˜¯ç§»åŠ¨å¯¹è±¡"></a>2.2 å¦‚æœæ²¡æœ‰copy èƒ½åŠ›,èµ‹å€¼å°±æ˜¯ç§»åŠ¨å¯¹è±¡</h3><p>ä¸‹é¢ä¾‹å­ä¸­ std::debug::print(&amp;c); ä¼šç¼–è¯‘å¤±è´¥ï¼Œå› ä¸º c å¯¹è±¡ä»¥åŠè¯¥ç§»åŠ¨ç»™däº†</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> struct <span class="title class_">NonCopyable</span> &#123;</span><br><span class="line">    value :u64,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#[test]</span><br><span class="line">fun <span class="title function_">test_non_copy</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> c = <span class="title class_">NonCopyable</span>&#123; <span class="attr">value</span>:<span class="number">33</span>&#125;;</span><br><span class="line">    <span class="keyword">let</span> d = c ;</span><br><span class="line">    <span class="attr">std</span>::<span class="attr">debug</span>::<span class="title function_">print</span>(&amp;c); <span class="comment">//æ­¤æ—¶cå¯¹è±¡å·²ç»è¢«ç§»åŠ¨ç»™d</span></span><br><span class="line">    <span class="attr">std</span>::<span class="attr">debug</span>::<span class="title function_">print</span>(&amp;d);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// sui::test_utils::destroy(c);</span></span><br><span class="line">    <span class="attr">sui</span>::<span class="attr">test_utils</span>::<span class="title function_">destroy</span>(d);</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>



<h3 id="2-3-é”€æ¯-drop"><a href="#2-3-é”€æ¯-drop" class="headerlink" title="2.3  é”€æ¯ (drop)"></a>2.3  é”€æ¯ (drop)</h3><h4 id="2-3-1-ç¦»å¼€ä½œç”¨åŸŸè‡ªåŠ¨é”€æ¯-éœ€è¦å…·æœ‰dropèƒ½åŠ›"><a href="#2-3-1-ç¦»å¼€ä½œç”¨åŸŸè‡ªåŠ¨é”€æ¯-éœ€è¦å…·æœ‰dropèƒ½åŠ›" class="headerlink" title="2.3.1 ç¦»å¼€ä½œç”¨åŸŸè‡ªåŠ¨é”€æ¯,éœ€è¦å…·æœ‰dropèƒ½åŠ›"></a>2.3.1 ç¦»å¼€ä½œç”¨åŸŸè‡ªåŠ¨é”€æ¯,éœ€è¦å…·æœ‰dropèƒ½åŠ›</h4><figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> struct <span class="title class_">IgnoreMe</span> has drop&#123;</span><br><span class="line">    <span class="attr">a</span>:u32,</span><br><span class="line">    <span class="attr">b</span>:u32</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#[test]</span><br><span class="line">fun <span class="title function_">test_ignore</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> im = <span class="title class_">IgnoreMe</span>&#123;<span class="attr">a</span>:<span class="number">3</span>,<span class="attr">b</span>:<span class="number">4</span>&#125;;</span><br><span class="line">    <span class="title function_">print</span>(&amp;im);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šæ–‡å®šä¹‰çš„IgnoreMe å¯¹è±¡im å…·æœ‰è‡ªåŠ¨ææ„çš„èƒ½åŠ›<code>has drop</code>,åœ¨ç¦»å¼€å‡½æ•°çš„ä½œç”¨åŸŸæ—¶å€™è‡ªåŠ¨ææ„.</p>
<h3 id="2-3-2-æ²¡æœ‰dropèƒ½åŠ›çš„å¯¹è±¡éœ€è¦ä¸»åŠ¨ææ„æˆ–ä¿å­˜åˆ°é“¾ä¸Š"><a href="#2-3-2-æ²¡æœ‰dropèƒ½åŠ›çš„å¯¹è±¡éœ€è¦ä¸»åŠ¨ææ„æˆ–ä¿å­˜åˆ°é“¾ä¸Š" class="headerlink" title="2.3.2 æ²¡æœ‰dropèƒ½åŠ›çš„å¯¹è±¡éœ€è¦ä¸»åŠ¨ææ„æˆ–ä¿å­˜åˆ°é“¾ä¸Š"></a>2.3.2 æ²¡æœ‰dropèƒ½åŠ›çš„å¯¹è±¡éœ€è¦ä¸»åŠ¨ææ„æˆ–ä¿å­˜åˆ°é“¾ä¸Š</h3> <figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> struct <span class="title class_">NoDrop</span>&#123; value :u64 &#125;</span><br><span class="line"></span><br><span class="line"> #[test]</span><br><span class="line"> fun <span class="title function_">test_nodrop</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">let</span> no_drop = <span class="title class_">NoDrop</span>&#123; value :<span class="number">34</span>&#125;;</span><br><span class="line">     <span class="title function_">print</span>(&amp;no_drop);</span><br><span class="line">     </span><br><span class="line">     <span class="keyword">let</span> <span class="title class_">NoDrop</span>&#123; <span class="attr">value</span>: _ &#125; = no_drop;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­ NoDropç±»å‹æ²¡æœ‰dropèƒ½åŠ›,å¯¹è±¡ç¦»å¼€ä½œç”¨åŸŸ,éœ€è¦ææ„,æˆ–è€…å°†å¯¹è±¡çš„æ‰€æœ‰æƒè½¬ç§».</p>
<ul>
<li>ç¬¬8è¡Œæ˜¯ææ„å¯¹è±¡çš„ä»£ç </li>
</ul>
<h3 id="2-3-4-ä¸èƒ½ææ„æ—¶-èƒ½è½¬ç§»æ‰€æœ‰æƒ"><a href="#2-3-4-ä¸èƒ½ææ„æ—¶-èƒ½è½¬ç§»æ‰€æœ‰æƒ" class="headerlink" title="2.3.4  ä¸èƒ½ææ„æ—¶,èƒ½è½¬ç§»æ‰€æœ‰æƒ:"></a>2.3.4  ä¸èƒ½ææ„æ—¶,èƒ½è½¬ç§»æ‰€æœ‰æƒ:</h3> <figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fun <span class="title function_">useNoDrop</span>(o : <span class="title class_">NoDrop</span> ) : <span class="title class_">NoDrop</span>&#123;</span><br><span class="line">    <span class="attr">std</span>::<span class="attr">debug</span>::<span class="title function_">print</span>(&amp;o);</span><br><span class="line">    o</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#[test]</span><br><span class="line">fun <span class="title function_">testUseNoDrop</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> o = <span class="title class_">NoDrop</span>&#123;value :<span class="number">4</span>&#125;;</span><br><span class="line">    <span class="keyword">let</span> d = <span class="title function_">useNoDrop</span>(o);</span><br><span class="line">    <span class="title class_">NoDrop</span>&#123;<span class="attr">value</span>:_&#125; = d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¬¬1è¡Œå‡½æ•°UseNoDropè·å¾—äº†å¯¹è±¡o</li>
<li>ç¬¬3è¡Œ,å‡½æ•°å°†Nå“¦Dropå¯¹è±¡o è¿”å›å‡ºå»,å°†æ‰€æœ‰æƒè½¬ç§»å‡ºå».</li>
<li>ç¬¬10 è¡Œ,æ˜¾ç¤ºä»£ç ææ„è¿™ä¸ªNoDropå¯¹è±¡</li>
</ul>
<h3 id="2-3-5-ç‹¬ç«‹å­˜å‚¨åœ¨é“¾ä¸Š"><a href="#2-3-5-ç‹¬ç«‹å­˜å‚¨åœ¨é“¾ä¸Š" class="headerlink" title="2.3.5  ç‹¬ç«‹å­˜å‚¨åœ¨é“¾ä¸Š"></a>2.3.5  ç‹¬ç«‹å­˜å‚¨åœ¨é“¾ä¸Š</h3><p>å¯¹è±¡ç‹¬ç«‹å­˜å‚¨åœ¨é“¾ä¸Š,å¿…é¡»å…·æœ‰keyèƒ½åŠ› <code>has key</code></p>
<p><img src="images/image-20241114085958845.png" alt="image-20241114085958845"></p>
<figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> struct <span class="title class_">Keyable</span> has key&#123;</span><br><span class="line">    id : <span class="variable constant_">UID</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#[test]</span><br><span class="line">fun <span class="title function_">test_key</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> mut ctx = tx_context ::<span class="title function_">dummy</span>();</span><br><span class="line">    <span class="keyword">let</span> k = <span class="title class_">Keyable</span>&#123; <span class="attr">id</span>: <span class="attr">object</span>::<span class="title function_">new</span>(&amp;mut ctx)&#125;;</span><br><span class="line">    <span class="attr">std</span>::<span class="attr">debug</span>::<span class="title function_">print</span>(&amp;k);</span><br><span class="line">    <span class="attr">transfer</span>::<span class="title function_">transfer</span>(k,ctx.<span class="title function_">sender</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­ä¸­Keyableæ˜¯å…·æœ‰keyèƒ½åŠ›çš„,å¯ä»¥é€šè¿‡transferä¼ é€’åˆ°suiç½‘ç»œä¸Šå­˜å‚¨, æŒ‡å®šowneråœ°å€.</p>
<h3 id="2-3-6-å¯¹è±¡ä½œä¸º-å…±äº«å¯¹è±¡å­˜å‚¨åœ¨é“¾ä¸Š-éœ€è¦å…·æœ‰keyèƒ½åŠ›"><a href="#2-3-6-å¯¹è±¡ä½œä¸º-å…±äº«å¯¹è±¡å­˜å‚¨åœ¨é“¾ä¸Š-éœ€è¦å…·æœ‰keyèƒ½åŠ›" class="headerlink" title="2.3.6   å¯¹è±¡ä½œä¸º å…±äº«å¯¹è±¡å­˜å‚¨åœ¨é“¾ä¸Š,éœ€è¦å…·æœ‰keyèƒ½åŠ›"></a>2.3.6   å¯¹è±¡ä½œä¸º å…±äº«å¯¹è±¡å­˜å‚¨åœ¨é“¾ä¸Š,éœ€è¦å…·æœ‰keyèƒ½åŠ›</h3><p><img src="images/image-20241114091033160.png" alt="image-20241114091033160"></p>
<h5 id><a href="#" class="headerlink" title></a></h5><h3 id="2-3-7-å¯¹è±¡ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†å­˜å‚¨-éœ€è¦å…·æœ‰storeèƒ½åŠ›"><a href="#2-3-7-å¯¹è±¡ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†å­˜å‚¨-éœ€è¦å…·æœ‰storeèƒ½åŠ›" class="headerlink" title="2.3.7 å¯¹è±¡ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†å­˜å‚¨,éœ€è¦å…·æœ‰storeèƒ½åŠ›"></a>2.3.7 å¯¹è±¡ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†å­˜å‚¨,éœ€è¦å…·æœ‰storeèƒ½åŠ›</h3><figure class="highlight ts"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">use <span class="attr">std</span>::<span class="attr">string</span>::<span class="title class_">String</span>;</span><br><span class="line"><span class="keyword">public</span> struct <span class="title class_">Grandson</span> has store&#123;</span><br><span class="line">    name : <span class="title class_">String</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> struct <span class="title class_">Child</span> has store&#123;</span><br><span class="line">    name : <span class="title class_">String</span>,</span><br><span class="line">    child : <span class="title class_">Grandson</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> struct <span class="title class_">Parent</span> has key&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="variable constant_">UID</span>,</span><br><span class="line">    <span class="attr">child</span>: <span class="title class_">Child</span>,</span><br><span class="line">&#125;</span><br><span class="line">#[test]</span><br><span class="line">fun  <span class="title function_">test_store_child</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> mut ctx = <span class="attr">tx_context</span>::<span class="title function_">dummy</span>();</span><br><span class="line">    <span class="keyword">let</span> foo = <span class="title class_">Parent</span> &#123;</span><br><span class="line">        id : <span class="attr">object</span>::<span class="title function_">new</span>(&amp;mut ctx),</span><br><span class="line">        <span class="attr">child</span>: <span class="title class_">Child</span> &#123;</span><br><span class="line">            name : b<span class="string">&quot;one child&quot;</span>.<span class="title function_">to_string</span>(),</span><br><span class="line">            <span class="attr">child</span>: <span class="title class_">Grandson</span>&#123;</span><br><span class="line">                name : b<span class="string">&quot;a grandson&quot;</span>.<span class="title function_">to_string</span>(),</span><br><span class="line"></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="attr">std</span>::<span class="attr">debug</span>::<span class="title function_">print</span>(&amp;foo);</span><br><span class="line">    <span class="attr">transfer</span>::<span class="title function_">freeze_object</span>(foo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Parentæ˜¯ç‹¬ç«‹å­˜å‚¨,å…·æœ‰keyèƒ½åŠ›</p>
</li>
<li><p>Child éƒ½æ˜¯ä½œä¸ºç‹¬ç«‹å­˜å‚¨å¯¹è±¡Parentçš„å­—æ®µ</p>
</li>
<li><p>Grandson ä½œä¸ºChildçš„å­—æ®µå­˜å‚¨åœ¨é“¾ä¸Š,</p>
</li>
<li><p>Child å’ŒGrandson éƒ½å…·æœ‰storeèƒ½åŠ›</p>
</li>
</ul>
<p><img src="images/image-20241114095326972.png" alt="image-20241114095326972"></p>
<h3 id="2-3-8-æ— ablity-å¯¹è±¡å°±å¿…é¡»åœ¨moduleå†…æä¾›æ–¹æ³•å»ææ„å®ƒ"><a href="#2-3-8-æ— ablity-å¯¹è±¡å°±å¿…é¡»åœ¨moduleå†…æä¾›æ–¹æ³•å»ææ„å®ƒ" class="headerlink" title="2.3.8 æ— ablity å¯¹è±¡å°±å¿…é¡»åœ¨moduleå†…æä¾›æ–¹æ³•å»ææ„å®ƒ"></a>2.3.8 æ— ablity å¯¹è±¡å°±å¿…é¡»åœ¨moduleå†…æä¾›æ–¹æ³•å»ææ„å®ƒ</h3><ul>
<li><p>ä¸€ä¸ªå¯¹è±¡,æ²¡æœ‰ä»»ä½•ability ,å°±æ˜¯hot potato</p>
</li>
<li><p>æ²¡æœ‰key å’Œstore æ— æ³•ä¿å­˜åœ¨é“¾ä¸Š</p>
</li>
<li><p>æ²¡æœ‰drop ä¸ä¼šè‡ªåŠ¨ææ„</p>
</li>
<li><p>åªèƒ½åœ¨æœ¬æ¨¡å—ææ„, å› ä¸ºå¤–éƒ¨æ¨¡å—æ— æ³•ç›´æ¥è®¿é—®structçš„å­—æ®µ</p>
</li>
<li><p>ä¸‹å›¾ä¸­æ¨¡å—A, éœ€è¦ä½¿ç”¨æ¨¡å—Bä¸­çš„Foo å¯¹è±¡,ä½¿ç”¨å®Œæ¯•éœ€è¦è°ƒç”¨æ¨¡å—B çš„ææ„æ–¹æ³•</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> struct <span class="title class_">Foo</span> &#123;</span><br><span class="line">    value :u32</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-3-8-1-æ ¹æ®å¯¹è±¡ä¸èƒ½å¤–éƒ¨ææ„çš„ç‰¹æ€§-æ„é€ å€Ÿè´·æ¨¡å‹"><a href="#2-3-8-1-æ ¹æ®å¯¹è±¡ä¸èƒ½å¤–éƒ¨ææ„çš„ç‰¹æ€§-æ„é€ å€Ÿè´·æ¨¡å‹" class="headerlink" title="2.3.8.1 æ ¹æ®å¯¹è±¡ä¸èƒ½å¤–éƒ¨ææ„çš„ç‰¹æ€§,æ„é€ å€Ÿè´·æ¨¡å‹"></a>2.3.8.1 æ ¹æ®å¯¹è±¡ä¸èƒ½å¤–éƒ¨ææ„çš„ç‰¹æ€§,æ„é€ å€Ÿè´·æ¨¡å‹</h4><p><img src="images/image-20241114080921239.png" alt="image-20241114080921239"></p>
<h4 id="2-3-8-2-é—ªç”µè´·çš„é€»è¾‘"><a href="#2-3-8-2-é—ªç”µè´·çš„é€»è¾‘" class="headerlink" title="2.3.8.2 é—ªç”µè´·çš„é€»è¾‘"></a>2.3.8.2 é—ªç”µè´·çš„é€»è¾‘</h4><p><img src="images/image-20241111213310276.png" alt="image-20241111213310276"></p>
<ul>
<li>å®šä¹‰é—ªç”µè´·çš„å‡ºå€Ÿæ–¹,åœ¨borrowçš„æ—¶å€™è·å¾—Coinå’Œ Loanå¯¹è±¡,  </li>
<li>åœ¨repayçš„æ—¶å€™æ‰èƒ½é”€æ¯Loanå¯¹è±¡, å¦‚æœå€Ÿå‡ºæ”¾ä¸è°ƒç”¨repay,æ— æ³•é”€æ¯Loanå¯¹è±¡,äº¤æ˜“ä¼šå›æ»š.</li>
<li>replayçš„æ—¶å€™éœ€è¦æ ¡éªŒä¼ å…¥çš„coin è¦å¤šäºborrowçš„coin, å¤šå‡ºæ¥çš„éƒ¨åˆ†ä½œä¸ºå›æŠ¥.<ul>
<li>ä¸‹é¢æ˜¯ è´·æ–¹ä»£ç çš„ä¾‹å­</li>
</ul>
</li>
</ul>
<figure class="highlight c++"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> book::loan;</span><br><span class="line"><span class="comment">//hot potato pattern</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> <span class="title class_">Loan</span>&#123;</span><br><span class="line">    feedback: u64, <span class="comment">//è¿˜é’±æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> <span class="title class_">Coin</span> has key,store&#123;</span><br><span class="line">	id:UID,</span><br><span class="line">	amount:u64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å€Ÿå‡ºé’±</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> fun <span class="title">borrow</span><span class="params">(amount:u64,ctx:&amp;mut TxContext)</span> :(Coin,Loan)&#123;</span></span><br><span class="line">	let feedback = amount * <span class="number">103</span> /<span class="number">100</span>;</span><br><span class="line">	let c = Coin&#123; id: object::<span class="built_in">new</span>(ctx),amount&#125;;</span><br><span class="line">	(c, Loan&#123;feedback&#125;) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> ErrNotEnoughFeedback:u64 = <span class="number">43</span>;</span><br><span class="line"><span class="type">const</span> OWNER_ADDR :address = @<span class="number">0xafe36044ef56d22494bfe6231e78dd128f097693f2d974761ee4d649e61f5fa2</span>;<span class="comment">//todo</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> fun <span class="title">repay</span><span class="params">(coin: Coin,loan:Loan)</span></span>&#123;</span><br><span class="line">	assert!(coin.amount &gt;= loan.feedback,ErrNotEnoughFeedback);</span><br><span class="line">	transfer::<span class="built_in">public_transfer</span>(coin,OWNER_ADDR);</span><br><span class="line">	Loan&#123; feedback:_&#125; = loan;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">``` &#123;.line-numbers&#125;</span><br><span class="line"></span><br><span class="line">ä¸‹é¢æ˜¯å€Ÿæ–¹æ¨¡å—çš„ä»£ç ,ä½¿ç”¨æµ‹è¯•ä»£ç æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">```c++</span><br><span class="line">#[test_only]</span><br><span class="line"><span class="keyword">module</span> book::test_loan;</span><br><span class="line">use book::loan::Coin;</span><br><span class="line"></span><br><span class="line"><span class="comment">////todo è´·æ¬¾åèµšé’±çš„ä¸šåŠ¡é€»è¾‘,è¿™é‡Œæ²¡æœ‰å®ç°</span></span><br><span class="line"><span class="function">fun <span class="title">earn_money</span><span class="params">(coin : Coin )</span> :Coin&#123;</span></span><br><span class="line">    coin</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#[test]</span><br><span class="line">#[<span class="built_in">expected_failure</span>(abort_code=book::loan::ErrNotEnoughFeedback)]</span><br><span class="line"><span class="function">fun <span class="title">borrow_test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	let mut ctx = tx_context::<span class="built_in">dummy</span>();</span><br><span class="line">	<span class="built_in">let</span> (coin,loan) = book::loan::<span class="built_in">borrow</span>(<span class="number">233</span>,&amp;mut ctx);</span><br><span class="line">	let new_money = <span class="built_in">earn_money</span>(coin);</span><br><span class="line">	book::loan::<span class="built_in">repay</span>(new_money,loan);</span><br><span class="line">	<span class="comment">//todo èµšé’±äº†ï¼Œå¯ä»¥æŠŠfeedback-amount çš„é’±ï¼Œå­˜å…¥è‡ªå·±é’±åŒ…</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-3-10-key-store-ability"><a href="#2-3-10-key-store-ability" class="headerlink" title="2.3.10 key + store ability"></a>2.3.10 key + store ability</h3><p>ç›®å‰å…¶ä»–æ¨¡å—å­˜åˆ°é“¾ä¸Šçš„å¯¹è±¡,éƒ½éœ€è¦key+storeèƒ½åŠ›</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> fun <span class="built_in">public_transfer</span>&lt;T: key + store&gt;(obj: T, recipient: address) &#123;</span><br><span class="line">    <span class="built_in">transfer_impl</span>(obj, recipient)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> fun <span class="built_in">public_freeze_object</span>&lt;T: key + store&gt;(obj: T) &#123;</span><br><span class="line">    <span class="built_in">freeze_object_impl</span>(obj)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> fun <span class="built_in">public_share_object</span>&lt;T: key + store&gt;(obj: T) &#123;</span><br><span class="line">    <span class="built_in">share_object_impl</span>(obj)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•:"></a>é™„å½•:</h1><p>æœ€è¿‘åœ¨å‚åŠ HOH å…±å­¦æ´»åŠ¨,</p>
<p>ğŸ’§ <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/d0brr-ao6cZ5t8Z5OO1Mog">HOHæ°´åˆ†å­å…¬ä¼—å·</a></p>
<p>ğŸŒŠ <a target="_blank" rel="noopener" href="https://x.com/0xHOH">HOHæ°´åˆ†å­Xè´¦å·</a></p>
<p>ğŸ“¹ <a target="_blank" rel="noopener" href="https://space.bilibili.com/3493269495352098">è¯¾ç¨‹Bç«™è´¦å·</a></p>
<p>ğŸ’» Githubä»“åº“ <a target="_blank" rel="noopener" href="https://github.com/move-cn/letsmove">https://github.com/move-cn/letsmove</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.walrus.mov/2024/11/10/sui/sui-move-ability/" data-id="cm3n9nnv10001rzo3cy8e3oes" data-title="Move å¯¹è±¡çš„æœ‰4ç§èƒ½åŠ›(abliity) è®¾è®¡è€ƒè™‘" class="article-share-link"><span class="fa fa-share">Compartir</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/ability/" rel="tag">ability</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/move/" rel="tag">move</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/sui/" rel="tag">sui</a></li></ul>

    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">CategorÃ­as</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="categories/hexo/">hexo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="categories/hexo/dns/">dns</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="categories/sui/">sui</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="tags/ability/" rel="tag">ability</a></li><li class="tag-list-item"><a class="tag-list-link" href="tags/blog/" rel="tag">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="tags/dns/" rel="tag">dns</a></li><li class="tag-list-item"><a class="tag-list-link" href="tags/github-page/" rel="tag">github page</a></li><li class="tag-list-item"><a class="tag-list-link" href="tags/move/" rel="tag">move</a></li><li class="tag-list-item"><a class="tag-list-link" href="tags/package-upgrade/" rel="tag">package upgrade</a></li><li class="tag-list-item"><a class="tag-list-link" href="tags/sui/" rel="tag">sui</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nube de Tags</h3>
    <div class="widget tagcloud">
      <a href="tags/ability/" style="font-size: 15px;">ability</a> <a href="tags/blog/" style="font-size: 10px;">blog</a> <a href="tags/dns/" style="font-size: 10px;">dns</a> <a href="tags/github-page/" style="font-size: 10px;">github page</a> <a href="tags/move/" style="font-size: 20px;">move</a> <a href="tags/package-upgrade/" style="font-size: 10px;">package upgrade</a> <a href="tags/sui/" style="font-size: 20px;">sui</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archivos</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="archives/2024/11/">November 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Posts recientes</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="2024/11/23/sui/sui%20witness/">(no title)</a>
          </li>
        
          <li>
            <a href="2024/11/19/walrus/walrus-first/">(no title)</a>
          </li>
        
          <li>
            <a href="2024/11/19/hexo-install-tips/">ä½¿ç”¨hexoæ­å»ºä¸ªäººä¸»é¡µ</a>
          </li>
        
          <li>
            <a href="2024/11/18/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="2024/11/11/sui/sui-colearn-qa1/">2024 -11-11  ç¬¬ä¸€å‘¨Sui Moveè®­ç»ƒè¥è¯¾ç¨‹ç­”ç–‘é—®é¢˜</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 nextuser<br>
      Construido por <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="index.html" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="js/jquery-3.6.4.min.js"></script>



  
<script src="fancybox/jquery.fancybox.min.js"></script>




<script src="js/script.js"></script>





  </div>
</body>
</html>